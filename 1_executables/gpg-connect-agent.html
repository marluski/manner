<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Mon Apr  7 17:26:34 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>GPG-CONNECT-AGENT</title>

</head>
<body>

<h1 align="center">GPG-CONNECT-AGENT</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#CONTROL COMMANDS">CONTROL COMMANDS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><b>gpg-connect-agent</b>
- Communicate with a running agent</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><b>gpg-connect-agent</b>
[<i>options</i>]<i>[commands]</i></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The
<b>gpg-connect-agent</b> is a utility to communicate with a
running <b>gpg-agent</b>. It is useful to check out the
commands <b>gpg-agent</b> provides using the Assuan
interface. It might also be useful for scripting simple
applications. Input is expected at stdin and output gets
printed to stdout.</p>

<p style="margin-left:9%; margin-top: 1em">It is very
similar to running <b>gpg-agent</b> in server mode; but here
we connect to a running instance.</p>

<p style="margin-left:9%; margin-top: 1em">The following
options may be used: <b><br>
--dirmngr</b></p>

<p style="margin-left:18%;">Connect to a running directory
manager (keyserver client) instead of to the gpg-agent. If a
dirmngr is not running, start it.</p>

<p style="margin-left:9%;"><b>--keyboxd</b></p>

<p style="margin-left:18%;">Connect to a running keybox
daemon instead of to the gpg-agent. If a keyboxd is not
running, start it.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p><b>-S</b></p></td>
<td width="88%">
</td></tr>
</table>


<p style="margin-left:9%; margin-top: 1em"><b>--raw-socket</b>
<i>name</i></p>

<p style="margin-left:18%;">Connect to socket <i>name</i>
assuming this is an Assuan style server. Do not run any
special initializations or environment checks. This may be
used to directly connect to any Assuan style socket
server.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="8%">


<p><b>-E</b></p></td>
<td width="1%"></td>
<td width="82%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="8%">


<p><b>--exec</b></p></td>
<td width="1%"></td>
<td width="82%">


<p>Take the rest of the command line as a program and
it&rsquo;s arguments and execute it as an Assuan server.
Here is how you would run <b>gpgsm</b>:</p></td></tr>
</table>

<p style="margin-left:12%;">gpg-connect-agent --exec gpgsm
--server</p>

<p style="margin-left:9%;">Note that you may not use
options on the command line in this case.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>-v</b></p></td>
<td width="88%">
</td></tr>
</table>


<p style="margin-left:9%; margin-top: 1em"><b>--verbose</b></p>

<p style="margin-left:18%;">Output additional information
while running.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p><b>-q</b></p></td>
<td width="88%">
</td></tr>
</table>


<p style="margin-left:9%; margin-top: 1em"><b>--quiet</b></p>

<p style="margin-left:18%;">Try to be as quiet as
possible.</p>

<p style="margin-left:9%;"><b>--homedir</b> <i>dir</i></p>

<p style="margin-left:18%;">Set the name of the home
directory to <i>dir</i>. If this option is not used, the
home directory defaults to
&lsquo;<i>&#732;/.gnupg</i>&rsquo;. It is only recognized
when given on the command line. It also overrides any home
directory stated through the environment variable
&lsquo;<i>GNUPGHOME</i>&rsquo; or (on Windows systems) by
means of the Registry entry
<i>HKCU\Software\GNU\GnuPG:HomeDir</i>.</p>

<p style="margin-left:18%; margin-top: 1em">On Windows
systems it is possible to install GnuPG as a portable
application. In this case only this command line option is
considered, all other ways to set a home directory are
ignored.</p>

<p style="margin-left:9%;"><b>--chuid</b> <i>uid</i></p>

<p style="margin-left:18%;">Change the current user to
<i>uid</i> which may either be a number or a name. This can
be used from the root account to run gpg-connect-agent for
another user. If <i>uid</i> is not the current UID a
standard PATH is set and the envvar GNUPGHOME is unset. To
override the latter the option <b>--homedir</b> can be used.
This option has only an effect when used on the command
line. This option has currently no effect at all on
Windows.</p>

<p style="margin-left:9%;"><b>--no-ext-connect</b></p>

<p style="margin-left:18%;">When using <b>-S</b> or
<b>--exec</b>, <b>gpg-connect-agent</b> connects to the
Assuan server in extended mode to allow descriptor passing.
This option makes it use the old mode.</p>

<p style="margin-left:9%;"><b>--no-autostart</b></p>

<p style="margin-left:18%;">Do not start the gpg-agent or
the dirmngr if it has not yet been started.</p>

<p style="margin-left:9%;"><b>--no-history</b></p>

<p style="margin-left:18%;">In interactive mode the command
line history is usually saved and restored to and from a
file below the GnuPG home directory. This option inhibits
the use of that file.</p>

<p style="margin-left:9%;"><b>--agent-program</b>
<i>file</i></p>

<p style="margin-left:18%;">Specify the agent program to be
started if none is running. The default value is determined
by running <b>gpgconf</b> with the option
<b>--list-dirs</b>. Note that the pipe symbol (<b>|</b>) is
used for a regression test suite hack and may thus not be
used in the file name.</p>

<p style="margin-left:9%;"><b>--dirmngr-program</b>
<i>file</i></p>

<p style="margin-left:18%;">Specify the directory manager
(keyserver client) program to be started if none is running.
This has only an effect if used together with the option
<b>--dirmngr</b>.</p>

<p style="margin-left:9%;"><b>--keyboxd-program</b>
<i>file</i></p>

<p style="margin-left:18%;">Specify the keybox daemon
program to be started if none is running. This has only an
effect if used together with the option
<b>--keyboxd</b>.</p>

<p style="margin-left:9%;"><b>-r</b> <i>file</i> <b><br>
--run</b> <i>file</i></p>

<p style="margin-left:18%;">Run the commands from
<i>file</i> at startup and then continue with the regular
input method. Note, that commands given on the command line
are executed after this file.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p><b>-s</b></p></td>
<td width="88%">
</td></tr>
</table>


<p style="margin-left:9%; margin-top: 1em"><b>--subst</b></p>

<p style="margin-left:18%;">Run the command <b>/subst</b>
at startup.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="6%">


<p><b>--hex</b></p></td>
<td width="3%"></td>
<td width="82%">


<p>Print data lines in a hex format and the ASCII
representation of non-control characters.</p></td></tr>
</table>

<p style="margin-left:9%;"><b>--decode</b></p>

<p style="margin-left:18%;">Decode data lines. That is to
remove percent escapes but make sure that a new line always
starts with a D and a space.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p><b>-u</b></p></td>
<td width="88%">
</td></tr>
</table>


<p style="margin-left:9%; margin-top: 1em"><b>--unbuffered</b></p>

<p style="margin-left:18%;">Set stdin and stdout into
unbuffered I/O mode. This this sometimes useful for
scripting.</p>

<h2>CONTROL COMMANDS
<a name="CONTROL COMMANDS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">While reading
Assuan commands, gpg-agent also allows a few special
commands to control its operation. These control commands
all start with a slash (<b>/</b>). <b><br>
/echo</b> <i>args</i></p>

<p style="margin-left:18%;">Just print <i>args</i>.</p>

<p style="margin-left:9%;"><b>/let</b> <i>name
value</i></p>

<p style="margin-left:18%;">Set the variable <i>name</i> to
<i>value</i>. Variables are only substituted on the input if
the <b>/subst</b> has been used. Variables are referenced by
prefixing the name with a dollar sign and optionally include
the name in curly braces. The rules for a valid name are
identically to those of the standard bourne shell. This is
not yet enforced but may be in the future. When used with
curly braces no leading or trailing white space is
allowed.</p>

<p style="margin-left:18%; margin-top: 1em">If a variable
is not found, it is searched in the environment and if found
copied to the table of variables.</p>

<p style="margin-left:18%; margin-top: 1em">Variable
functions are available: The name of the function must be
followed by at least one space and the at least one
argument. The following functions are available:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="4%">


<p><b>get</b></p></td>
<td width="5%"></td>
<td width="73%">


<p>Return a value described by the argument. Available
arguments are:</p></td></tr>
</table>

<p style="margin-left:27%;"><b>cwd</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="36%"></td>
<td width="38%">


<p style="margin-top: 1em">The current working
directory.</p> </td>
<td width="26%">
</td></tr>
</table>

<p style="margin-left:27%;"><b>homedir</b></p>

<p style="margin-left:36%;">The gnupg homedir.</p>

<p style="margin-left:27%;"><b>sysconfdir</b></p>

<p style="margin-left:36%;">GnuPG&rsquo;s system
configuration directory.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="27%"></td>
<td width="8%">


<p><b>bindir</b></p></td>
<td width="1%"></td>
<td width="33%">


<p>GnuPG&rsquo;s binary directory.</p></td>
<td width="31%">
</td></tr>
<tr valign="top" align="left">
<td width="27%"></td>
<td width="8%">


<p><b>libdir</b></p></td>
<td width="1%"></td>
<td width="33%">


<p>GnuPG&rsquo;s library directory.</p></td>
<td width="31%">
</td></tr>
</table>

<p style="margin-left:27%;"><b>libexecdir</b></p>

<p style="margin-left:36%;">GnuPG&rsquo;s library directory
for executable files.</p>

<p style="margin-left:27%;"><b>datadir</b></p>

<p style="margin-left:36%;">GnuPG&rsquo;s data
directory.</p>

<p style="margin-left:27%;"><b>serverpid</b></p>

<p style="margin-left:36%;">The PID of the current server.
Command <b>/serverpid</b> must have been given to return a
useful value.</p>

<p style="margin-left:18%;"><b>unescape</b> <i>args</i></p>

<p style="margin-left:27%;">Remove C-style escapes from
<i>args</i>. Note that <b>\0</b> and <b>\x00</b> terminate
the returned string implicitly. The string to be converted
are the entire arguments right behind the delimiting space
of the function name.</p>

<p style="margin-left:18%;"><b>unpercent</b> <i>args</i>
<b><br>
unpercent+</b> <i>args</i></p>

<p style="margin-left:27%;">Remove percent style escaping
from <i>args</i>. Note that <b>%00</b> terminates the string
implicitly. The string to be converted are the entire
arguments right behind the delimiting space of the function
name. <b>unpercent+</b> also maps plus signs to a
spaces.</p>

<p style="margin-left:18%;"><b>percent</b> <i>args</i>
<b><br>
percent+</b> <i>args</i></p>

<p style="margin-left:27%;">Escape the <i>args</i> using
percent style escaping. Tabs, formfeeds, linefeeds, carriage
returns and colons are escaped. <b>percent+</b> also maps
spaces to plus signs.</p>

<p style="margin-left:18%;"><b>errcode</b> <i>arg</i>
<b><br>
errsource</b> <i>arg</i> <b><br>
errstring</b> <i>arg</i></p>

<p style="margin-left:27%;">Assume <i>arg</i> is an integer
and evaluate it using <b>strtol</b>. Return the gpg-error
error code, error source or a formatted string with the
error code and error source.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p><b>+</b></p></td>
<td width="8%"></td>
<td width="73%">
</td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p><b>-</b></p></td>
<td width="8%"></td>
<td width="73%">
</td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p><b>*</b></p></td>
<td width="8%"></td>
<td width="73%">
</td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p><b>/</b></p></td>
<td width="8%"></td>
<td width="73%">
</td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p><b>%</b></p></td>
<td width="8%"></td>
<td width="73%">


<p>Evaluate all arguments as long integers using
<b>strtol</b> and apply this operator. A division by zero
yields an empty string.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p><b>!</b></p></td>
<td width="8%"></td>
<td width="73%">
</td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p><b>|</b></p></td>
<td width="8%"></td>
<td width="73%">
</td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p><b>&amp;</b></p></td>
<td width="8%"></td>
<td width="73%">


<p>Evaluate all arguments as long integers using
<b>strtol</b> and apply the logical operators NOT, OR or
AND. The NOT operator works on the last argument only.</p></td></tr>
</table>

<p style="margin-left:9%;"><b>/definq</b> <i>name
var</i></p>

<p style="margin-left:18%;">Use content of the variable
<i>var</i> for inquiries with <i>name</i>. <i>name</i> may
be an asterisk (<b>*</b>) to match any inquiry.</p>

<p style="margin-left:9%;"><b>/definqfile</b> <i>name
file</i></p>

<p style="margin-left:18%;">Use content of <i>file</i> for
inquiries with <i>name</i>. <i>name</i> may be an asterisk
(<b>*</b>) to match any inquiry.</p>

<p style="margin-left:9%;"><b>/definqprog</b> <i>name
prog</i></p>

<p style="margin-left:18%;">Run <i>prog</i> for inquiries
matching <i>name</i> and pass the entire line to it as
command line arguments.</p>

<p style="margin-left:9%;"><b>/datafile</b> <i>name</i></p>

<p style="margin-left:18%;">Write all data lines from the
server to the file <i>name</i>. The file is opened for
writing and created if it does not exists. An existing file
is first truncated to 0. The data written to the file fully
decoded. Using a single dash for <i>name</i> writes to
stdout. The file is kept open until a new file is set using
this command or this command is used without an
argument.</p>

<p style="margin-left:9%;"><b>/showdef</b></p>

<p style="margin-left:18%;">Print all definitions</p>

<p style="margin-left:9%;"><b>/cleardef</b></p>

<p style="margin-left:18%;">Delete all definitions</p>

<p style="margin-left:9%;"><b>/sendfd</b> <i>file
mode</i></p>

<p style="margin-left:18%;">Open <i>file</i> in <i>mode</i>
(which needs to be a valid <b>fopen</b> mode string) and
send the file descriptor to the server. This is usually
followed by a command like <b>INPUT FD</b> to set the input
source for other commands.</p>

<p style="margin-left:9%;"><b>/recvfd</b></p>

<p style="margin-left:18%;">Not yet implemented.</p>

<p style="margin-left:9%;"><b>/open</b> <i>var file</i>
<b>[</b><i>mode</i><b>]</b></p>

<p style="margin-left:18%;">Open <i>file</i> and assign the
file descriptor to <i>var</i>. Warning: This command is
experimental and might change in future versions.</p>

<p style="margin-left:9%;"><b>/close</b> <i>fd</i></p>

<p style="margin-left:18%;">Close the file descriptor
<i>fd</i>. Warning: This command is experimental and might
change in future versions.</p>

<p style="margin-left:9%;"><b>/showopen</b></p>

<p style="margin-left:18%;">Show a list of open files.</p>

<p style="margin-left:9%;"><b>/serverpid</b></p>

<p style="margin-left:18%;">Send the Assuan command
<b>GETINFO pid</b> to the server and store the returned PID
for internal purposes.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="8%">


<p><b>/sleep</b></p></td>
<td width="1%"></td>
<td width="49%">


<p>Sleep for a second.</p></td>
<td width="33%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="8%">


<p><b>/hex</b></p></td>
<td width="1%"></td>
<td width="49%">
</td>
<td width="33%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="8%">


<p><b>/nohex</b></p></td>
<td width="1%"></td>
<td width="49%">


<p>Same as the command line option <b>--hex</b>.</p></td>
<td width="33%">
</td></tr>
</table>

<p style="margin-left:9%;"><b>/decode <br>
/nodecode</b></p>

<p style="margin-left:18%;">Same as the command line option
<b>--decode</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="8%">


<p><b>/subst</b></p></td>
<td width="83%">
</td></tr>
</table>


<p style="margin-left:9%; margin-top: 1em"><b>/nosubst</b></p>

<p style="margin-left:18%;">Enable and disable variable
substitution. It defaults to disabled unless the command
line option <b>--subst</b> has been used. If /subst as been
enabled once, leading whitespace is removed from input lines
which makes scripts easier to read.</p>

<p style="margin-left:9%;"><b>/while</b>
<i>condition</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="5%">


<p><b>/end</b></p></td>
<td width="4%"></td>
<td width="82%">


<p>These commands provide a way for executing loops. All
lines between the <b>while</b> and the corresponding
<b>end</b> are executed as long as the evaluation of
<i>condition</i> yields a non-zero value or is the string
<b>true</b> or <b>yes</b>. The evaluation is done by passing
<i>condition</i> to the <b>strtol</b> function. Example:</p></td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">/subst <br>
/let i 3 <br>
/while $i <br>
/echo loop counter is $i <br>
/let i ${- $i 1} <br>
/end</p>

<p style="margin-left:9%;"><b>/if</b> <i>condition</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="5%">


<p><b>/end</b></p></td>
<td width="4%"></td>
<td width="82%">


<p>These commands provide a way for conditional execution.
All lines between the <b>if</b> and the corresponding
<b>end</b> are executed only if the evaluation of
<i>condition</i> yields a non-zero value or is the string
<b>true</b> or <b>yes</b>. The evaluation is done by passing
<i>condition</i> to the <b>strtol</b> function.</p></td></tr>
</table>

<p style="margin-left:9%;"><b>/run</b> <i>file</i></p>

<p style="margin-left:18%;">Run commands from
<i>file</i>.</p>

<p style="margin-left:9%;"><b>/history --clear</b></p>

<p style="margin-left:18%;">Clear the command history.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="6%">


<p><b>/bye</b></p></td>
<td width="3%"></td>
<td width="55%">


<p>Terminate the connection and the program.</p></td>
<td width="27%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="6%">


<p><b>/help</b></p></td>
<td width="3%"></td>
<td width="55%">


<p>Print a list of available control commands.</p></td>
<td width="27%">
</td></tr>
</table>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><b>gpg-agent</b>(1),
<b>scdaemon</b>(1)</p>

<p style="margin-left:9%; margin-top: 1em">The full
documentation for this tool is maintained as a Texinfo
manual. If GnuPG and the info program are properly installed
at your site, the command</p>

<p style="margin-left:12%; margin-top: 1em">info gnupg</p>

<p style="margin-left:9%; margin-top: 1em">should give you
access to the complete manual including a menu structure and
an index.</p>
<hr>
</body>
</html>
