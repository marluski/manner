<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Mon Apr  7 17:31:59 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>VIRT-LOGIN-SHELL</title>

</head>
<body>

<h1 align="center">VIRT-LOGIN-SHELL</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#CONFIG">CONFIG</a><br>
<a href="#EXIT STATUS">EXIT STATUS</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#LICENSE">LICENSE</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em">virt-login-shell
- tool to execute a shell within a container</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><b>virt-login-shell</b>
[<i>OPTION</i>]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The
<b>virt-login-shell</b> program is a setuid shell that is
used to join an LXC container that matches the user's name.
If the container is not running, <b>virt-login-shell</b>
will attempt to start the container. <b>virt-login-shell</b>
is not allowed to be run by root. Normal users will get
added to a container that matches their username, if it
exists, and they are configured in
<b>/etc/libvirt/virt-login-shell.conf</b>.</p>

<p style="margin-left:9%; margin-top: 1em">The basic
structure of most <b>virt-login-shell</b> usage is:</p>


<p style="margin-left:13%; margin-top: 1em">virt-login-shell</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em"><b>-c
CMD</b></p>

<p style="margin-left:9%; margin-top: 1em">Instruct the
shell to run CMD instead of presenting an interactive shell
prompt.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-h</b>,
<b>--help</b></p>

<p style="margin-left:9%; margin-top: 1em">Display command
line help usage then exit.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-V</b>,
<b>--version</b></p>

<p style="margin-left:9%; margin-top: 1em">Display version
information then exit.</p>

<h2>CONFIG
<a name="CONFIG"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">By default,
<b>virt-login-shell</b> will execute the <b>/bin/sh</b>
program for the user. You can modify this behaviour by
defining the shell variable in
<b>/etc/libvirt/virt-login-shell.conf</b>. e.g.</p>

<p style="margin-left:13%; margin-top: 1em">shell = [
&quot;/bin/bash&quot; ]</p>

<p style="margin-left:9%; margin-top: 1em">If the
<b>auto_shell</b> config option is set then it will attempt
to automatically detect the shell from <b>/etc/password</b>
inside the container. This should only be done if the
container has a separate <b>/etc</b> directory from the
host, otherwise it will end up recursively invoking
<b>virt-login-shell</b>. e.g.</p>

<p style="margin-left:13%; margin-top: 1em">auto_shell =
1</p>

<p style="margin-left:9%; margin-top: 1em">By default no
users are allowed to use virt-login-shell, if you want to
allow certain users to use virt-login-shell, you need to
modify the allowed_users variable in
/etc/libvirt/virt-login-shell.conf. e.g.</p>

<p style="margin-left:13%; margin-top: 1em">allowed_users =
[ &quot;tom&quot;, &quot;dick&quot;, &quot;harry&quot; ]</p>

<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><b>virt-login-shell</b>
normally returns the exit status of the command it executed.
If the command was killed by a signal, but that signal is
not fatal to virt-login-shell, then it returns the signal
number plus 128.</p>

<p style="margin-left:9%; margin-top: 1em">Exit status
generated by <b>virt-login-shell</b> itself:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>0</b> An option was used to learn more about this
binary.</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>125</b> Generic error before attempting execution of
the configured shell; for example, if libvirtd is not
running.</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>126</b> The configured shell exists but could not be
executed.</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>127</b> The configured shell could not be found.</p></td></tr>
</table>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Please report
all bugs you discover. This should be done via either:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p style="margin-top: 1em">1.</p></td>
<td width="1%"></td>
<td width="20%">


<p style="margin-top: 1em">the mailing list</p></td>
<td width="67%">
</td></tr>
</table>


<p style="margin-left:13%; margin-top: 1em">&lt;https://libvirt.org/contact.html&gt;</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p style="margin-top: 1em">2.</p></td>
<td width="1%"></td>
<td width="19%">


<p style="margin-top: 1em">the bug tracker</p></td>
<td width="68%">
</td></tr>
</table>


<p style="margin-left:13%; margin-top: 1em">&lt;https://libvirt.org/bugs.html&gt;</p>

<p style="margin-left:9%; margin-top: 1em">Alternatively,
you may report bugs to your software distributor /
vendor.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Daniel Walsh</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Copyright (C)
2013-2014 Red Hat, Inc., and the authors listed in the
libvirt AUTHORS file.</p>

<h2>LICENSE
<a name="LICENSE"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><b>virt-login-shell</b>
is distributed under the terms of the GNU LGPL v2+. This is
free software; see the source for copying conditions. There
is NO warranty; not even for MERCHANTABILITY or FITNESS FOR
A PARTICULAR PURPOSE</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">virsh(1),
&lt;https://libvirt.org/&gt;</p>
<hr>
</body>
</html>
