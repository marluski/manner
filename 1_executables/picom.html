<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Mon Apr  7 17:29:31 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PICOM</title>

</head>
<body>

<h1 align="center">PICOM</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#WINDOW RULES">WINDOW RULES</a><br>
<a href="#Syntax">Syntax</a><br>
<a href="#Migrating old rules">Migrating old rules</a><br>
<a href="#FORMAT OF CONDITIONS">FORMAT OF CONDITIONS</a><br>
<a href="#ANIMATIONS">ANIMATIONS</a><br>
<a href="#Common options">Common options</a><br>
<a href="#Presets">Presets</a><br>
<a href="#Advanced">Advanced</a><br>
<a href="#Share your animations">Share your animations</a><br>
<a href="#SHADER INTERFACE">SHADER INTERFACE</a><br>
<a href="#CONFIGURATION FILES">CONFIGURATION FILES</a><br>
<a href="#BLUR">BLUR</a><br>
<a href="#SIGNALS">SIGNALS</a><br>
<a href="#D-BUS API">D-BUS API</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#RESOURCES">RESOURCES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">picom - a
compositor for X11</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em"><b>picom</b>
[<i>OPTIONS</i>]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">picom is a
compositor based on Dana Jansens' version of xcompmgr (which
itself was written by Keith Packard). It includes some
improvements over the original xcompmgr, like window frame
opacity and inactive window transparency.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em"><b>-h</b>,
<b>--help</b></p>

<p style="margin-left:14%;">Get the usage text embedded in
program code, which may be more up-to-date than this man
page.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-r</b>,
<b>--shadow-radius</b>=<i>RADIUS</i></p>

<p style="margin-left:14%;">The blur radius for shadows, in
pixels. (defaults to 12)</p>

<p style="margin-left:9%; margin-top: 1em"><b>-o</b>,
<b>--shadow-opacity</b>=<i>OPACITY</i></p>

<p style="margin-left:14%;">The opacity of shadows. (0.0 -
1.0, defaults to 0.75)</p>

<p style="margin-left:9%; margin-top: 1em"><b>-l</b>,
<b>--shadow-offset-x</b>=<i>OFFSET</i></p>

<p style="margin-left:14%;">The left offset for shadows, in
pixels. (defaults to -15)</p>

<p style="margin-left:9%; margin-top: 1em"><b>-t</b>,
<b>--shadow-offset-y</b>=<i>OFFSET</i></p>

<p style="margin-left:14%;">The top offset for shadows, in
pixels. (defaults to -15)</p>

<p style="margin-left:9%; margin-top: 1em"><b>-I</b>,
<b>--fade-in-step</b>=<i>OPACITY_STEP</i></p>

<p style="margin-left:14%;">Opacity change between steps
while fading in. (0.01 - 1.0, defaults to 0.028)</p>

<p style="margin-left:9%; margin-top: 1em"><b>-O</b>,
<b>--fade-out-step</b>=<i>OPACITY_STEP</i></p>

<p style="margin-left:14%;">Opacity change between steps
while fading out. (0.01 - 1.0, defaults to 0.03)</p>

<p style="margin-left:9%; margin-top: 1em"><b>-D</b>,
<b>--fade-delta</b>=<i>MILLISECONDS</i></p>

<p style="margin-left:14%;">The time between steps in fade
step, in milliseconds. (&gt; 0, defaults to 10)</p>

<p style="margin-left:9%; margin-top: 1em"><b>-c</b>,
<b>--shadow</b></p>

<p style="margin-left:14%;">Enabled client-side shadows on
windows. Note desktop windows (windows with
<i>_NET_WM_WINDOW_TYPE_DESKTOP</i>) never get shadow, unless
explicitly requested using the wintypes option.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-f</b>,
<b>--fading</b></p>

<p style="margin-left:14%;">Fade windows in/out when
opening/closing and when opacity changes, unless
<b>--no-fading-openclose</b> is used.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-i</b>,
<b>--inactive-opacity</b>=<i>OPACITY</i></p>

<p style="margin-left:14%;">Opacity of inactive windows.
(0.1 - 1.0, defaults to 1.0). Using this option is
discouraged, see the <b>WINDOW RULES</b> section for the
recommended way to set window-specific opacity.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-e</b>,
<b>--frame-opacity</b>=<i>OPACITY</i></p>

<p style="margin-left:14%;">Opacity of window titlebars and
borders. (0.1 - 1.0, disabled by default)</p>

<p style="margin-left:9%; margin-top: 1em"><b>-b</b>,
<b>--daemon</b></p>

<p style="margin-left:14%;">Daemonize process. Fork to
background after initialization. This option can only be set
from the command line, setting this in the configuration
file will have no effect.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--log-level</b></p>

<p style="margin-left:14%;">Set the log level. Possible
values are &quot;TRACE&quot;, &quot;DEBUG&quot;,
&quot;INFO&quot;, &quot;WARN&quot;, &quot;ERROR&quot;, in
increasing level of importance. Case doesn&rsquo;t matter.
If using the &quot;TRACE&quot; log level, it&rsquo;s better
to log into a file using <b>--log-file</b>, since it can
generate a huge stream of logs.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--log-file</b></p>

<p style="margin-left:14%;">Set the log file. If
<b>--log-file</b> is never specified, logs will be written
to stderr. Otherwise, logs will to written to the given
file, though some of the early logs might still be written
to the stderr. When setting this option from the config
file, it is recommended to use an absolute path.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--legacy-backends</b></p>

<p style="margin-left:14%;">Use the old version of the
backends. This option can not be set from the config
file.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--show-all-xerrors</b></p>

<p style="margin-left:14%;">Show all X errors (for
debugging).</p>

<p style="margin-left:9%; margin-top: 1em"><b>--config</b>
<i>PATH</i></p>

<p style="margin-left:14%;">Look for configuration file at
the path. See <b>CONFIGURATION FILES</b> section below for
where picom looks for a configuration file by default. Use
/dev/null to avoid loading configuration file.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--write-pid-path</b>
<i>PATH</i></p>

<p style="margin-left:14%;">Write process ID to a file. it
is recommended to use an absolute path.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--plugins</b>
<i>PATH</i></p>

<p style="margin-left:14%;">Specify plugins to load.
Plugins will first be searched in current working directory
(unless specified in the config file, in which case this
step is skipped), then in $XDG_CONFIG_HOME/picom/plugins,
then in $XDG_CONFIG_DIRS/picom/plugins. If all of the above
fail, the plugin name is passed directly to the dynamic
loader. Can be specified multiple times to load more than
one plugins.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--shadow-color</b>
<i>STRING</i></p>

<p style="margin-left:14%;">Color of shadow, as a hex
string (e.g. <i>#000000</i>)</p>


<p style="margin-left:9%; margin-top: 1em"><b>--shadow-red</b>
<i>VALUE</i></p>

<p style="margin-left:14%;">Red color value of shadow (0.0
- 1.0, defaults to 0).</p>


<p style="margin-left:9%; margin-top: 1em"><b>--shadow-green</b>
<i>VALUE</i></p>

<p style="margin-left:14%;">Green color value of shadow
(0.0 - 1.0, defaults to 0).</p>


<p style="margin-left:9%; margin-top: 1em"><b>--shadow-blue</b>
<i>VALUE</i></p>

<p style="margin-left:14%;">Blue color value of shadow (0.0
- 1.0, defaults to 0).</p>


<p style="margin-left:9%; margin-top: 1em"><b>--inactive-opacity-override</b></p>

<p style="margin-left:14%;">Let inactive opacity set by
<b>-i</b> override the <i>_NET_WM_WINDOW_OPACITY</i> values
of windows. Using this is discouraged, see the <b>WINDOW
RULES</b> section for the recommended way to set
window-specific opacity.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--active-opacity</b>
<i>OPACITY</i></p>

<p style="margin-left:14%;">Default opacity for active
windows. (0.0 - 1.0, defaults to 1.0). Using this is
discouraged, see the <b>WINDOW RULES</b> section for the
recommended way to set window-specific opacity.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--inactive-dim</b>
<i>VALUE</i></p>

<p style="margin-left:14%;">Dim inactive windows. (0.0 -
1.0, defaults to 0.0). Using this option is discouraged, see
the <b>WINDOW RULES</b> section for the recommended way to
set window-specific dim levels.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--corner-radius</b>
<i>VALUE</i></p>

<p style="margin-left:14%;">Sets the radius of rounded
window corners. When &gt; 0, the compositor will round the
corners of windows. Does not interact well with
<b>--transparent-clipping</b>. (defaults to 0).</p>


<p style="margin-left:9%; margin-top: 1em"><b>--corner-radius-rules</b>
<i>RADIUS</i>:<i>CONDITION</i></p>

<p style="margin-left:14%;">Specify a list of corner radius
rules. Overrides the corner radii of matching windows. This
option takes precedence over the
<b>--rounded-corners-exclude</b> option, and also overrides
the default exclusion of fullscreen windows. The condition
has the same format as <b>--opacity-rule</b>. Using this is
discouraged, see the <b>WINDOW RULES</b> section for the
recommended way to set window-specific corner radius.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--rounded-corners-exclude</b>
<i>CONDITION</i></p>

<p style="margin-left:14%;">Exclude conditions for rounded
corners. Using this is discouraged, see the <b>WINDOW
RULES</b> section for the recommended way to set
window-specific corner radius.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--no-frame-pacing</b></p>

<p style="margin-left:14%;">Disable vsync-aware frame
pacing. By default, the compositor tries to make sure it
only renders once per vblank interval, and also the render
happens as late as possible to minimize the latency from
updates to the screen. However this can sometimes cause
stuttering, or even lowered frame rate. This option can be
used to disable frame pacing.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--mark-wmwin-focused</b></p>

<p style="margin-left:14%;">Try to detect WM windows (a
non-override-redirect window with no child that has
<i>WM_STATE</i>) and mark them as active. Using this is
discouraged, see the <b>WINDOW RULES</b> section for the
recommended way to set window-specific rules.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--mark-ovredir-focused</b></p>

<p style="margin-left:14%;">Mark override-redirect windows
that doesn&rsquo;t have a child window with <i>WM_STATE</i>
focused. Using this is discouraged, see the <b>WINDOW
RULES</b> section for the recommended way to set
window-specific rules.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--no-fading-openclose</b></p>

<p style="margin-left:14%;">Do not fade on window
open/close.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--no-fading-destroyed-argb</b></p>

<p style="margin-left:14%;">Do not fade destroyed ARGB
windows with WM frame. Workaround of bugs in Openbox,
Fluxbox, etc.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--shadow-ignore-shaped</b></p>

<p style="margin-left:14%;">Do not paint shadows on shaped
windows. Note shaped windows here means windows setting its
shape through X Shape extension. Those using ARGB background
is beyond our control. Deprecated, see the <b>WINDOW
RULES</b> section for the recommended way to set
window-specific shadow.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--detect-rounded-corners</b></p>

<p style="margin-left:14%;">Try to detect windows with
rounded corners and don&rsquo;t consider them shaped
windows. The accuracy is not very high, unfortunately.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--detect-client-opacity</b></p>

<p style="margin-left:14%;">Detect
<i>_NET_WM_WINDOW_OPACITY</i> on client windows, useful for
window managers not passing <i>_NET_WM_WINDOW_OPACITY</i> of
client windows to frame windows.</p>

<p style="margin-left:9%; margin-top: 1em"><b>--vsync</b>,
<b>--no-vsync</b></p>

<p style="margin-left:14%;">Enable/disable VSync.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--use-ewmh-active-win</b></p>

<p style="margin-left:14%;">Use EWMH
<i>_NET_ACTIVE_WINDOW</i> to determine currently focused
window, rather than listening to 'FocusIn'/'FocusOut' event.
Might have more accuracy, provided that the WM supports
it.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--unredir-if-possible</b></p>

<p style="margin-left:14%;">Unredirect all windows in some
cases. Known to cause flickering when
redirecting/unredirecting windows. Currently, unredirecting
is triggered by following conditions:</p>

<p style="margin-left:19%; margin-top: 1em">&bull; If the
top level window is taking up the entire screen. In
multi-monitor setup, this means ALL monitors.</p>

<p style="margin-left:19%; margin-top: 1em">&bull; If there
is no window.</p>

<p style="margin-left:19%; margin-top: 1em">&bull; If a
window is fullscreen according to its WM hints. (can be
disabled with <b>--no-ewmh-fullscreen</b>).</p>

<p style="margin-left:19%; margin-top: 1em">&bull; If a
window requests to bypass the compositor
(<i>_NET_WM_BYPASS_COMPOSITOR</i>). Windows are also
unredirected unconditionally when monitors are powered off,
regardless if <b>--unredir-if-possible</b> is set.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--unredir-if-possible-delay</b>
<i>MILLISECONDS</i></p>

<p style="margin-left:14%;">Delay before unredirecting the
window, in milliseconds. Defaults to 0.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--unredir-if-possible-exclude</b>
<i>CONDITION</i></p>

<p style="margin-left:14%;">Conditions of windows that
shouldn&rsquo;t be considered full-screen for unredirecting
screen. Using this is discouraged, see the <b>WINDOW
RULES</b> section for the recommended way to set
window-specific unredirect.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--shadow-exclude</b>
<i>CONDITION</i></p>

<p style="margin-left:14%;">Specify a list of conditions of
windows that should have no shadow. Using this is
discouraged, see the <b>WINDOW RULES</b> section for the
recommended way to set window-specific shadow.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--clip-shadow-above</b>
<i>CONDITION</i></p>

<p style="margin-left:14%;">Specify a list of conditions of
windows that should have no shadow painted over, such as a
dock window. Using this is discouraged, see the <b>WINDOW
RULES</b> section for the recommended way to set
window-specific shadow clipping.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--fade-exclude</b>
<i>CONDITION</i></p>

<p style="margin-left:14%;">Specify a list of conditions of
windows that should not be faded. Using this is discouraged,
see the <b>WINDOW RULES</b> section for the recommended way
to set window-specific fading.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--focus-exclude</b>
<i>CONDITION</i></p>

<p style="margin-left:14%;">Specify a list of conditions of
windows that should always be considered focused. Using this
is discouraged, see the <b>WINDOW RULES</b> section for the
recommended way for doing this.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--inactive-dim-fixed</b></p>

<p style="margin-left:14%;">Use fixed inactive dim value,
instead of adjusting according to window opacity.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--detect-transient</b></p>

<p style="margin-left:14%;">Use <i>WM_TRANSIENT_FOR</i> to
group windows, and consider windows in the same group
focused at the same time.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--detect-client-leader</b></p>

<p style="margin-left:14%;">Use <i>WM_CLIENT_LEADER</i> to
group windows, and consider windows in the same group
focused at the same time. This usually means windows from
the same application will be considered focused or unfocused
at the same time.<i>WM_TRANSIENT_FOR</i> has higher priority
if <b>--detect-transient</b> is enabled, too.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--blur-method</b>,
<b>--blur-size</b>, <b>--blur-deviation</b>,
<b>--blur-strength</b></p>

<p style="margin-left:14%;">Parameters for background
blurring, see the <b>BLUR</b> section for more
information.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--blur-background</b></p>

<p style="margin-left:14%;">Blur background of
semi-transparent / ARGB windows. Bad in performance, with
driver-dependent behavior. The name of the switch may change
without prior notifications.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--blur-background-frame</b></p>

<p style="margin-left:14%;">Blur background of windows when
the window frame is not opaque. Implies
<b>--blur-background</b>. Bad in performance, with
driver-dependent behavior. The name may change.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--blur-background-fixed</b></p>

<p style="margin-left:14%;">Use fixed blur strength rather
than adjusting according to window opacity.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--blur-kern</b>
<i>MATRIX</i></p>

<p style="margin-left:14%;">Specify the blur convolution
kernel, with the following format:</p>


<p style="margin-left:19%; margin-top: 1em">WIDTH,HEIGHT,ELE1,ELE2,ELE3,ELE4,ELE5...</p>

<p style="margin-left:14%; margin-top: 1em">In other words,
the matrix is formatted as a list of comma separated
numbers. The first two numbers must be integers, which
specify the width and height of the matrix. They must be odd
numbers. Then, the following width * height - 1 numbers
specifies the numbers in the matrix, row by row, excluding
the center element.</p>

<p style="margin-left:14%; margin-top: 1em">The elements
are finite floating point numbers. The decimal pointer has
to be <i>.</i> (a period), scientific notation is not
supported.</p>

<p style="margin-left:14%; margin-top: 1em">The element in
the center will either be 1.0 or varying based on opacity,
depending on whether you have
<b>--blur-background-fixed</b>. Yet the automatic adjustment
of blur factor may not work well with a custom blur
kernel.</p>

<p style="margin-left:14%; margin-top: 1em">A 7x7 Gaussian
blur kernel (sigma = 0.84089642) looks like:</p>

<p style="margin-left:19%; margin-top: 1em">--blur-kern
'7,7,0.000003,0.000102,0.000849,0.001723,0.000849,0.000102,0.000003,0.000102,0.003494,0.029143,0.059106,0.029143,0.003494,0.000102,0.000849,0.029143,0.243117,0.493069,0.243117,0.029143,0.000849,0.001723,0.059106,0.493069,0.493069,0.059106,0.001723,0.000849,0.029143,0.243117,0.493069,0.243117,0.029143,0.000849,0.000102,0.003494,0.029143,0.059106,0.029143,0.003494,0.000102,0.000003,0.000102,0.000849,0.001723,0.000849,0.000102,0.000003'</p>

<p style="margin-left:14%; margin-top: 1em">May also be one
of the predefined kernels: 3x3box (default), 5x5box, 7x7box,
3x3gaussian, 5x5gaussian, 7x7gaussian, 9x9gaussian,
11x11gaussian. All Gaussian kernels are generated with sigma
= 0.84089642 . If you find yourself needing to generate
custom blur kernels, you might want to try the new blur
configuration (See <b>BLUR</b>).</p>


<p style="margin-left:9%; margin-top: 1em"><b>--blur-background-exclude</b>
<i>CONDITION</i></p>

<p style="margin-left:14%;">Exclude conditions for
background blur.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--resize-damage</b>
<i>INTEGER</i></p>

<p style="margin-left:14%;">Resize damaged region by a
specific number of pixels. A positive value enlarges it
while a negative one shrinks it. If the value is positive,
those additional pixels will not be actually painted to
screen, only used in blur calculation, and such. (Due to
technical limitations, with <b>--use-damage</b>, those
pixels will still be incorrectly painted to screen.)
Primarily used to fix the line corruption issues of blur, in
which case you should use the blur radius value here (e.g.
with a 3x3 kernel, you should use --resize-damage 1, with a
5x5 one you use --resize-damage 2, and so on). May or may
not work with <b>--glx-no-stencil</b>. Only works with
<b>--legacy-backends</b>. Shrinking doesn&rsquo;t function
correctly.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--invert-color-include</b>
<i>CONDITION</i></p>

<p style="margin-left:14%;">Specify a list of conditions of
windows that should be painted with inverted color.
Resource-hogging, and is not well tested. Using this is
discouraged, see the <b>WINDOW RULES</b> section for the
recommended way to do this.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--opacity-rule</b>
<i>OPACITY</i>:<i>CONDITION</i></p>

<p style="margin-left:14%;">Specify a list of opacity
rules, in the format PERCENT:PATTERN, like 50:name *=
&quot;Firefox&quot;. picom-trans is recommended over this.
Note we don&rsquo;t make any guarantee about possible
conflicts with other programs that set
<i>_NET_WM_WINDOW_OPACITY</i> on frame or client windows.
Using this is discouraged, see the <b>WINDOW RULES</b>
section for the recommended way to set window-specific
opacity.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--crop-shadow-to-monitor</b></p>

<p style="margin-left:14%;">Crop shadow of a window fully
on a particular monitor to that monitor. This is currently
implemented using the X RandR extension.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--backend</b>
<i>BACKEND</i></p>

<p style="margin-left:14%;">Specify the backend to use:
xrender, glx, or xr_glx_hybrid. xrender is the default
one.</p>

<p style="margin-left:19%; margin-top: 1em">&bull; xrender
backend performs all rendering operations with X Render
extension. It is what xcompmgr uses, and is generally a safe
fallback when you encounter rendering artifacts or
instability.</p>

<p style="margin-left:19%; margin-top: 1em">&bull; glx
(OpenGL) backend performs all rendering operations with
OpenGL. It is more friendly to some VSync methods, and has
significantly superior performance on color inversion
(<b>--invert-color-include</b>) or blur
(<b>--blur-background</b>). It requires proper OpenGL 2.0
support from your driver and hardware. You may wish to look
at the GLX performance optimization options below.
<b>--xrender-sync-fence</b> might be needed on some systems
to avoid delay in changes of screen contents.</p>

<p style="margin-left:19%; margin-top: 1em">&bull;
xr_glx_hybrid backend renders the updated screen contents
with X Render and presents it on the screen with GLX. It
attempts to address the rendering issues some users
encountered with GLX backend and enables the better VSync of
GLX backends. <b>--vsync-use-glfinish</b> might fix some
rendering issues with this backend.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--glx-no-stencil</b></p>

<p style="margin-left:14%;">GLX backend: Avoid using
stencil buffer, useful if you don&rsquo;t have a stencil
buffer. Might cause incorrect opacity when rendering
transparent content (but never practically happened) and may
not work with <b>--blur-background</b>. My tests show a 15%
performance boost. Recommended.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--glx-no-rebind-pixmap</b></p>

<p style="margin-left:14%;">GLX backend: Avoid rebinding
pixmap on window damage. Probably could improve performance
on rapid window content changes, but is known to break
things on some drivers (LLVMpipe, xf86-video-intel, etc.).
Recommended if it works.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--no-use-damage</b></p>

<p style="margin-left:14%;">Disable the use of damage
information. This cause the whole screen to be redrawn every
time, instead of the part of the screen has actually
changed. Potentially degrades the performance, but might fix
some artifacts.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--xrender-sync-fence</b></p>

<p style="margin-left:14%;">Use X Sync fence to sync
clients' draw calls, to make sure all draw calls are
finished before picom starts drawing. Needed on
nvidia-drivers with GLX backend for some users.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--glx-fshader-win</b>
<i>SHADER</i></p>

<p style="margin-left:14%;">GLX backend: Use specified GLSL
fragment shader for rendering window contents. See
compton-default-fshader-win.glsl and
compton-fake-transparency-fshader-win.glsl in the source
tree for examples. Only works with <b>--legacy-backends</b>
enabled.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--force-win-blend</b></p>

<p style="margin-left:14%;">Force all windows to be painted
with blending. Useful if you have a <b>--glx-fshader-win</b>
that could turn opaque pixels transparent.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--dbus</b></p>

<p style="margin-left:14%;">Enable remote control via
D-Bus. See the <b>D-BUS API</b> section below for more
details.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--benchmark</b>
<i>CYCLES</i></p>

<p style="margin-left:14%;">Benchmark mode. Repeatedly
paint until reaching the specified cycles.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--benchmark-wid</b>
<i>WINDOW_ID</i></p>

<p style="margin-left:14%;">Specify window ID to repaint in
benchmark mode. If omitted or is 0, the whole screen is
repainted.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--no-ewmh-fullscreen</b></p>

<p style="margin-left:14%;">Do not use EWMH to detect
fullscreen windows. Reverts to checking if a window is
fullscreen based only on its size and coordinates.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--max-brightness</b></p>

<p style="margin-left:14%;">Dimming bright windows so their
brightness doesn&rsquo;t exceed this set value. Brightness
of a window is estimated by averaging all pixels in the
window, so this could comes with a performance hit. Setting
this to 1.0 disables this behaviour. Requires
<b>--use-damage</b> to be disabled. (default: 1.0)</p>


<p style="margin-left:9%; margin-top: 1em"><b>--transparent-clipping</b></p>

<p style="margin-left:14%;">Make transparent windows clip
other windows like non-transparent windows do, instead of
blending on top of them.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--transparent-clipping-exclude</b>
<i>CONDITION</i></p>

<p style="margin-left:14%;">Specify a list of conditions of
windows that should never have transparent clipping applied.
Useful for screenshot tools, where you need to be able to
see through transparent parts of the window.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--window-shader-fg</b>
<i>SHADER</i></p>

<p style="margin-left:14%;">Specify GLSL fragment shader
path for rendering window contents. Does not work when
<b>--legacy-backends</b> is enabled. Shader is searched
first relative to the directory the configuration file is
in, then in the usual places for a configuration file. See
section <b>SHADER INTERFACE</b> below for more details on
the interface.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--window-shader-fg-rule</b>
<i>SHADER</i>:<i>CONDITION</i></p>

<p style="margin-left:14%;">Specify GLSL fragment shader
path for rendering window contents using patterns. Similar
to <b>--opacity-rule</b>, arguments should be in the format
of <i>SHADER:CONDITION</i>, e.g. &quot;shader.frag:name =
'window'&quot;. Leading and trailing whitespaces in
<i>SHADER</i> will be trimmed. If <i>SHADER</i> is
&quot;default&quot;, then the default shader will be used
for the matching windows. (This also unfortunately means you
can&rsquo;t use a shader file named &quot;default&quot;).
Does not work when <b>--legacy-backends</b> is enabled.
Using this is discouraged, see the <b>WINDOW RULES</b>
section for the recommended way to set window-specific
shaders.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--dithered-present</b></p>

<p style="margin-left:14%;">Use higher precision during
rendering, and apply dither when presenting the rendered
screen. Reduces banding artifacts, but might cause
performance degradation. Only works with OpenGL.</p>

<h2>WINDOW RULES
<a name="WINDOW RULES"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Window rules
allow you to set window-specific options which can be used
to change appearance of windows based on certain conditions.
Note there are other options that also cover some of the
functionality of window rules, but window rules are more
flexible and powerful. If you are creating a fresh
configuration file, it is recommended to use window rules
instead of the other options.</p>

<p style="margin-left:9%; margin-top: 1em">Following is a
list of all the options that are superseded by window
rules:</p>


<p style="margin-left:9%; margin-top: 1em"><b>--shadow-ignore-shaped</b>,
<b>-i</b>, <b>--inactive-opacity</b>=<i>OPACITY</i>,
<b>--active-opacity</b> <i>OPACITY</i>,
<b>--inactive-opacity-override</b>, <b>--inactive-dim</b>
<i>VALUE</i>, <b>--mark-wmwin-focused</b>,
<b>--mark-ovredir-focused</b>, <b>--invert-color-include</b>
<i>CONDITION</i>, <b>--shadow-exclude</b> <i>CONDITION</i>,
<b>--fade-exclude</b> <i>CONDITION</i>,
<b>--focus-exclude</b> <i>CONDITION</i>,
<b>--rounded-corners-exclude</b> <i>CONDITION</i>,
<b>--blur-background-exclude</b> <i>CONDITION</i>,
<b>--opacity-rule</b> <i>OPACITY</i>:<i>CONDITION</i>,
<b>--corner-radius-rules</b> <i>RADIUS</i>:<i>CONDITION</i>,
<b>--window-shader-fg-rule</b>
<i>SHADER</i>:<i>CONDITION</i>, <b>--clip-shadow-above</b>
<i>CONDITION</i>. As well as the <b>wintypes</b>
configuration file option.</p>

<p style="margin-left:9%; margin-top: 1em">If window rules
option is used, none of the above options will have any
effect. And warning messages will be issued. When the window
rules option is used, the compositor will also behave
somewhat differently in certain cases. One such case is that
fullscreen windows will no longer have their rounded corners
disabled by default.</p>

<p style="margin-left:9%; margin-top: 1em">If you are
currently using some of these options and want to switch to
window rules, or if you want to keep the existing behavior,
see the <b>Migrating old rules</b> section for how to
convert them.</p>

<h3>Syntax
<a name="Syntax"></a>
</h3>


<p style="margin-left:9%; margin-top: 1em">Window rules are
only available in the configuration file. To set window
rules, set the rules option in the configuration file to
something like this:</p>

<p style="margin-left:14%; margin-top: 1em">rules = ( <br>
{ match = &quot;focused&quot;; opacity = 1; }, <br>
{ match = &quot;name = 'firefox'&quot;; shadow = true; },
<br>
# ... and so on <br>
)</p>

<p style="margin-left:9%; margin-top: 1em">rules = ( ... )
sets the option to a list, which can contain multiple
sub-items. For rules, each sub-item must be a group (i.e. {
key = value; ... }), representing a condition and a set of
options to apply when the condition is met. These sub-items
are matched in the order they appear in the configuration
file, options are applied as the conditions are matched. If
the same option is set multiple times, the last one will
take effect.</p>

<p style="margin-left:9%; margin-top: 1em">Within each
sub-item, these keys are available:</p>

<p style="margin-left:14%; margin-top: 1em">match</p>

<p style="margin-left:19%;">The condition string to match
windows with. See the <b>FORMAT OF CONDITIONS</b> section
below for the syntax of condition strings. If not specified,
the rule will always match.</p>

<p style="margin-left:14%; margin-top: 1em">shadow</p>

<p style="margin-left:19%;">Whether to draw shadow under
the matching window.</p>


<p style="margin-left:14%; margin-top: 1em">full-shadow</p>

<p style="margin-left:19%;">Controls whether shadow is
drawn under the parts of the window that you normally
won&rsquo;t be able to see. Useful when the window has parts
of it transparent, and you want shadows in those areas.</p>

<p style="margin-left:14%; margin-top: 1em">fade</p>

<p style="margin-left:19%;">Whether to fade the matching
window in/out when opening/closing it. When animations are
used, this will have no effect. This can only be used to
disable fading animations enabled by option <b>-f</b>,
<b>--fading</b>.</p>

<p style="margin-left:14%; margin-top: 1em">opacity</p>

<p style="margin-left:19%;">Opacity of the matching window.
(0.0 - 1.0). If not explicitly set by a rule, the opacity
value from the window properties (e.g.
_NET_WM_WINDOW_OPACITY) will be used.</p>

<p style="margin-left:14%; margin-top: 1em">dim</p>

<p style="margin-left:19%;">Dim level of the matching
window. Larger value means more dimming. (0.0 - 1.0)</p>


<p style="margin-left:14%; margin-top: 1em">corner-radius</p>

<p style="margin-left:19%;">Corner radius of the matching
window in number of pixels. 0 means no corner rounding.</p>


<p style="margin-left:14%; margin-top: 1em">blur-background</p>

<p style="margin-left:19%;">Whether the background of the
matching window should be blurred.</p>


<p style="margin-left:14%; margin-top: 1em">invert-color</p>

<p style="margin-left:19%;">Whether to invert the color of
the matching window.</p>


<p style="margin-left:14%; margin-top: 1em">clip-shadow-above</p>

<p style="margin-left:19%;">Whether to prevent the matching
window from being painted over by shadows.</p>

<p style="margin-left:14%; margin-top: 1em">unredir</p>

<p style="margin-left:19%;">Whether the matching window
should cause the compositor to unredirect the screen, and
whether it should trigger the screen to be redirected again
if it is currently unredirected. This could be a boolean
value, if <i>true</i>, the screen will be unredirected if
the matching window meets certain conditions; if
<i>false</i>, it will never cause the screen to be
unredirected. If the screen is currently unredirected, and
there is no other window that will trigger unredirection,
both of these choices will cause the screen to be redirected
again. To control that behavior as well, you can set unredir
to either <i>preferred</i>, such windows will not cause the
screen to be redirected in this situation, and will behave
like true otherwise; or <i>passive</i>, which not only
won&rsquo;t cause redirection in this case, but also
won&rsquo;t actively cause the screen to be unredirected.
The last possible value for this option is <i>forced</i>,
any of the windows having their unredir set to forced will
cause the screen to be unredirected unconditionally. The
value of the <i>_NET_WM_BYPASS_COMPOSITOR</i> property on
the window will be considered iff unredir is not explicitly
set by any rule.</p>


<p style="margin-left:14%; margin-top: 1em">transparent-clipping</p>

<p style="margin-left:19%;">Whether to make the matching
window clip other windows like opaque windows do, instead of
blending on top of them. When applied to transparent
windows, this means nothing will be painted under the
transparent parts of the window, essentially cuts a hole in
the screen.</p>

<p style="margin-left:14%; margin-top: 1em">shader</p>

<p style="margin-left:19%;">GLSL fragment shader path for
rendering window contents. See section <b>SHADER
INTERFACE</b> below for more details on the interface.</p>

<p style="margin-left:14%; margin-top: 1em">animations</p>

<p style="margin-left:19%;">Define window-specific
animation scripts. The format of this option is the same as
the top-level <i>animations</i> option. You can find more
information in the <b>ANIMATIONS</b> section. If animation
scripts are defined in multiple matching rules, they will be
merged together. If multiple matching rules contain
animation scripts for the same trigger, the last one will
take effect, the same as other options.</p>

<h3>Migrating old rules
<a name="Migrating old rules"></a>
</h3>


<p style="margin-left:9%; margin-top: 1em">Most of the rule
options should 1:1 map to the new window rules. Here is a
list of the non-trivial ones and how to achieve the same
effect with window rules.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Inactive
dimming and opacity</b></p>

<p style="margin-left:14%;">This includes options
<b>-i</b>, <b>--inactive-opacity</b>=<i>OPACITY</i>,
<b>--inactive-dim</b> <i>VALUE</i>, <b>--active-opacity</b>
<i>OPACITY</i>, <b>--inactive-opacity-override</b>,
<b>--mark-wmwin-focused</b>, and
<b>--mark-ovredir-focused</b>. When using the window rules,
the compositor no longer have an &quot;active window&quot;
concept, as it is easy to achieve with window rules. You can
use match = &quot;focused || group_focused&quot; to match
windows that would have been considered active with the old
options. Then you can set the opacity and dim level for
matched windows accordingly. <b>--mark-wmwin-focused</b> and
<b>--mark-ovredir-focused</b> can be achieved by adding ||
wmwin and || override_redirect to the match string,
respectively. <b>--inactive-opacity-override</b> can be
achieved by setting opacity-override = true.</p>


<p style="margin-left:19%; margin-top: 1em"><b><big>Note</big></b></p>

<p style="margin-left:19%; margin-top: 1em">Setting
<i>opacity</i> explicitly with a rule will override the
opacity value from the window properties (i.e.
<i>_NET_WM_WINDOW_OPACITY</i>), which is used by tools like
picom-trans for setting the opacity of window. If you would
like to keep using tools like picom-trans, you can choose to
set the opacity only for windows without the opacity
property by matching ! _NET_WM_WINDOW_OPACITY.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Active
window</b></p>

<p style="margin-left:14%;">This includes option
<b>--focus-exclude</b> <i>CONDITION</i>. This option was
only used to influence what windows are considered active,
to apply inactive opacity and dimming. Since with window
rules you no longer need the compositor to help you decide
what is active and what is not (see above), this option is
no longer needed.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Rounded
corners and fullscreen windows</b></p>

<p style="margin-left:14%;">Rounded corners are no longer
automatically disabled for fullscreen windows. If you want
to disable rounded corners for fullscreen windows, you can
use the following rule:</p>

<p style="margin-left:19%; margin-top: 1em">rules = ( <br>
{ match = &quot;fullscreen&quot;; corner-radius = 0; }, <br>
)</p>

<h2>FORMAT OF CONDITIONS
<a name="FORMAT OF CONDITIONS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em"><big>Some
options accept a condition string to match certain windows.
A condition string is formed by one or more conditions,
joined by logical operators.</big></p>

<p style="margin-left:9%; margin-top: 1em"><big>Formal
grammar for a condition looks like this:</big></p>

<p style="margin-left:14%; margin-top: 1em"><big>Condition
&lt;- Term ('||' Term)* <br>
Term &lt;- Item ('&amp;&amp;' Item)* <br>
Item &lt;- '!'? Target '@'? ('[' Index ']')? (Operator
Pattern)? | '(' Condition ')'</big></p>

<p style="margin-left:9%; margin-top: 1em"><big>Concretely
speaking, a condition is a sequence of one or more simple
pattern matching <i>Item</i>s, joined by logical operators
&amp;&amp; (and) and || (or). &amp;&amp; has higher
precedence than ||. Both operators are left-associative.
Parentheses can be used to raise precedence. If an
<i>Item</i> has a leading negation operator (!), the result
of the item is negated.</big></p>

<p style="margin-left:9%; margin-top: 1em"><big>Inside an
<i>Item</i>:</big></p>


<p style="margin-left:9%; margin-top: 1em"><big><i>Target</i></big></p>

<p style="margin-left:14%;"><big>is either a predefined
target name, or the name of a window property to
match.</big></p>

<p style="margin-left:14%; margin-top: 1em"><big>Supported
predefined targets are:</big></p>

<p style="margin-left:19%; margin-top: 1em"><big>x, y, x2,
y2</big></p>

<p style="margin-left:24%;"><big>Window coordinates, from
the top-left corner of the window (x, y) to the bottom-right
corner (x2, y2).</big></p>

<p style="margin-left:19%; margin-top: 1em"><big>width,
height</big></p>

<p style="margin-left:24%;"><big>Size of the
window.</big></p>

<p style="margin-left:19%; margin-top: 1em"><big>widthb,
heightb</big></p>

<p style="margin-left:24%;"><big>Like width and height, but
including the window border.</big></p>


<p style="margin-left:19%; margin-top: 1em"><big>border_width</big></p>

<p style="margin-left:24%;"><big>Width of the window
border.</big></p>


<p style="margin-left:19%; margin-top: 1em"><big>fullscreen</big></p>

<p style="margin-left:24%;"><big>Whether the window is
fullscreen. If <b>--no-ewmh-fullscreen</b> is set, this is
determined by the window size and position; otherwise, it is
determined by the <i>_NET_WM_STATE_FULLSCREEN</i>
property.</big></p>


<p style="margin-left:19%; margin-top: 1em"><big>override_redirect</big></p>

<p style="margin-left:24%;"><big>Whether the window is
override-redirect.</big></p>


<p style="margin-left:19%; margin-top: 1em"><big>argb</big></p>

<p style="margin-left:24%;"><big>Whether the window has an
ARGB visual.</big></p>


<p style="margin-left:19%; margin-top: 1em"><big>focused</big></p>

<p style="margin-left:24%;"><big>Whether the window is
focused.</big></p>


<p style="margin-left:19%; margin-top: 1em"><big>group_focused</big></p>

<p style="margin-left:24%;"><big>Whether the window is in
the same window group as the focused window. This requires
<b>--detect-transient</b> or
<b>--detect-client-leader</b>.</big></p>


<p style="margin-left:19%; margin-top: 1em"><big>wmwin</big></p>

<p style="margin-left:24%;"><big>Whether the window looks
like a WM window, i.e. has no client window and is not
override-redirected.</big></p>


<p style="margin-left:19%; margin-top: 1em"><big>bounding_shaped</big></p>

<p style="margin-left:24%;"><big>Whether the window has a
bounding shape.</big></p>


<p style="margin-left:19%; margin-top: 1em"><big>rounded_corners</big></p>

<p style="margin-left:24%;"><big>Whether the window
bounding shape only has rounded corners, and is otherwise
rectangular. This implies bounding_shaped. Requires
<b>--detect-rounded-corners</b>. This has no relation to
<b>--corner-radius</b> <i>VALUE</i>.</big></p>


<p style="margin-left:19%; margin-top: 1em"><big>window_type</big></p>

<p style="margin-left:24%;"><big>Window type, as defined by
<i>_NET_WM_WINDOW_TYPE</i>. Name only, e.g. <i>normal</i>
means <i>_NET_WM_WINDOW_TYPE_NORMAL</i>. Because a window
can have multiple types, testing for equality succeeds if
any of the window&rsquo;s types match.</big></p>


<p style="margin-left:19%; margin-top: 1em"><big>name</big></p>

<p style="margin-left:24%;"><big>Name of the window. This
is either <i>_NET_WM_NAME</i> or <i>_WM_NAME</i>.</big></p>

<p style="margin-left:19%; margin-top: 1em"><big>class_i,
class_g</big></p>

<p style="margin-left:24%;"><big>Instance and general class
of the window. This is the first and second value of
<i>_WM_CLASS</i>, respectively.</big></p>


<p style="margin-left:19%; margin-top: 1em"><big>role</big></p>

<p style="margin-left:24%;"><big>Window role. This is the
value of <i>_WM_WINDOW_ROLE</i>.</big></p>


<p style="margin-left:14%; margin-top: 1em"><big><i>Target</i>
can be followed by an optional @ if the window attribute
should be be looked up on client window. Otherwise the frame
window will be used.</big></p>


<p style="margin-left:9%; margin-top: 1em"><big><i>Index</i></big></p>

<p style="margin-left:14%;"><big>is the index number of the
property to look up. For example, [2] returns the third
value of the property. If not specified, the first value
(index [0]) is used implicitly. Use the special value [*] to
perform matching against all available property values using
logical OR. None of the predefined targets have multiple
values, so do not use this with them.</big></p>


<p style="margin-left:9%; margin-top: 1em"><big><i>Operator</i>
and <i>Pattern</i></big></p>

<p style="margin-left:14%;"><big>define how <i>Target</i>
will be matched. They can be omitted together, in which case
the existence of the window property is checked when
<i>Target</i> is not a predefined target; for a predefined
<i>Target</i>, omitting <i>Operator</i> and <i>Pattern</i>
is equivalent to writing != 0.</big></p>

<p style="margin-left:14%; margin-top: 1em"><big>Available
operators change depends on the type of <i>Target</i> being
matched. If the target is a number, the operators are =,
&gt;, &lt;, &gt;=, &lt;=, as well as their negation,
obtained by prefixing the operator with ! (e.g. !=, !&gt;,
etc.). If the target is a string, the operators are =
(strict equal), *= (substring match), &#710;= (starts with),
%= (match with glob), &#732;= (match with regex), as well as
their case insensitive variants ?=, *?=, &#710;?=, %?=,
&#732;?=. String operators can be negated by prefixing the
operator with ! as well (e.g. !=, !*=, etc.).</big></p>


<p style="margin-left:14%; margin-top: 1em"><big><i>Pattern</i>
is either an integer or a string enclosed by single or
double quotes. Python-3-style escape sequences are supported
for strings. Boolean values are interpreted as integers,
i.e. writing true is equivalent to 1, and false 0.</big></p>


<p style="margin-left:9%; margin-top: 1em"><big>Examples:</big></p>

<p style="margin-left:14%; margin-top: 1em"><big># If the
window is focused <br>
focused <br>
focused = 1 <br>
# If the window is not override-redirected <br>
!override_redirect <br>
override_redirect = false <br>
override_redirect != true <br>
override_redirect != 1 <br>
# If the window is a menu <br>
window_type *= &quot;menu&quot; <br>
_NET_WM_WINDOW_TYPE@ *= &quot;MENU&quot; <br>
# If the window is marked hidden: _NET_WM_STATE contains
_NET_WM_STATE_HIDDEN <br>
_NET_WM_STATE@[*] = &quot;_NET_WM_STATE_HIDDEN&quot; <br>
# If the window is marked sticky: _NET_WM_STATE contains an
atom that contains <br>
# &quot;sticky&quot;, ignore case <br>
_NET_WM_STATE@[*] *?= &quot;sticky&quot; <br>
# If the window name contains &quot;Firefox&quot;, ignore
case <br>
name *?= &quot;Firefox&quot; <br>
_NET_WM_NAME@ *?= &quot;Firefox&quot; <br>
# If the window name ends with &quot;Firefox&quot; <br>
name %= &quot;*Firefox&quot; <br>
name &#732;= &quot;Firefox$&quot; <br>
# If the window has a property _COMPTON_SHADOW with value 0,
type CARDINAL, <br>
# format 32, value 0, on its frame window <br>
_COMPTON_SHADOW = 0 <br>
# If the third value of _NET_FRAME_EXTENTS is less than 20,
or there's no <br>
# _NET_FRAME_EXTENTS property on client window <br>
_NET_FRAME_EXTENTS@[2] &lt; 20 || !_NET_FRAME_EXTENTS@ <br>
# The pattern here will be parsed as &quot;dd4&quot; <br>
name = &quot;\x64\x64\o64&quot; <br>
# These two are equivalent <br>
name = 'Firefox' || name = 'Chromium' &amp;&amp; class_i =
'Navigator' <br>
name = 'Firefox' || (name = 'Chromium' &amp;&amp; class_i =
'Navigator')</big></p>

<h2>ANIMATIONS
<a name="ANIMATIONS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em"><big>picom
supports fading animation when you open or close a window.
In addition to that, picom also has a very powerful
animation script system, which can be used to animate many
aspects of a window based on certain triggers. Animation
scripts can be defined in your configuration file by setting
the option <i>animations</i>. It is also possible to define
animations per-window using the <b>WINDOW RULES</b> system,
by setting the animations option in a rule. (Read the rest
of this section first before you go there.)</big></p>

<p style="margin-left:9%; margin-top: 1em"><big>The basic
syntax of the <i>animations</i> option is as
follows:</big></p>


<p style="margin-left:14%; margin-top: 1em"><big>animations
= ({ <br>
triggers = [ ... ]; <br>
suppressions = [ ... ];</big></p>

<p style="margin-left:14%; margin-top: 1em"><big># more
options follow <br>
... <br>
}, { <br>
# another animation script <br>
}, ...)</big></p>

<p style="margin-left:9%; margin-top: 1em"><big>animations
= ( ... ) sets <i>animations</i> to a list, which can
contain multiple sub-items, each item is an animation
script. An animation script is a group containing multiple
entries (i.e. { key = value; ... }). All animation scripts
share some common options, like <i>triggers</i> and
<i>suppressions</i>, they also contain more options that
either defines the actual animation, or selects an animation
preset.</big></p>

<h3>Common options
<a name="Common options"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><big><i>triggers</i></big></p>

<p style="margin-left:14%;"><big>A list of triggers
specifying when this animation should be started. Each
trigger can have at most one animation script associated to
it, otherwise the behavior is undefined, and a warning will
be issued.</big></p>

<p style="margin-left:14%; margin-top: 1em"><big>Valid
triggers are:</big></p>


<p style="margin-left:19%; margin-top: 1em"><big><i>open</i></big></p>

<p style="margin-left:24%;"><big>When a window is
opened.</big></p>


<p style="margin-left:19%; margin-top: 1em"><big><i>close</i></big></p>

<p style="margin-left:24%;"><big>When a window is
closed.</big></p>


<p style="margin-left:19%; margin-top: 1em"><big><i>show</i></big></p>

<p style="margin-left:24%;"><big>When a minimized or
iconified window is shown.</big></p>


<p style="margin-left:19%; margin-top: 1em"><big><i>hide</i></big></p>

<p style="margin-left:24%;"><big>When a window is minimized
or iconified.</big></p>


<p style="margin-left:19%; margin-top: 1em"><big><i>increase-opacity</i></big></p>

<p style="margin-left:24%;"><big>When the opacity of a
window is increased.</big></p>


<p style="margin-left:19%; margin-top: 1em"><big><i>decrease-opacity</i></big></p>

<p style="margin-left:24%;"><big>When the opacity of a
window is decreased.</big></p>


<p style="margin-left:19%; margin-top: 1em"><big><i>geometry</i></big></p>

<p style="margin-left:24%;"><big>When the geometry of a
window is changed. (EXPERIMENTAL)</big></p>


<p style="margin-left:29%; margin-top: 1em"><big><b><big>Warning</big></b></big></p>

<p style="margin-left:29%; margin-top: 1em"><big>The
<i>geometry</i> trigger is experimental. Using this means
you accept the caveat that geometry animations will also
trigger when you manually resize or move a window, like when
you drag the window around with your mouse.</big></p>


<p style="margin-left:9%; margin-top: 1em"><big><i>suppressions</i></big></p>

<p style="margin-left:14%;"><big>Which other animations
should be suppressed when this animation is running.
Normally, if another trigger is activated while an animation
is already running, the animation in progress will be
interrupted and the new animation will start. If you want to
prevent this, you can set the suppressions option to a list
of triggers that should be suppressed. This is optional, the
default value for this is an empty list.</big></p>

<h3>Presets
<a name="Presets"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><big><big>Defining
an animation is a bit involved. To make animations more
approachable, without you having to learn the nitty-gritty
details of the script system, picom provides a number of
presets that you can use by just specifying a handful of
options.</big></big></p>

<p style="margin-left:9%; margin-top: 1em"><big><big>To
choose a preset, add a <i>preset</i> option to an animation
script group, like this:</big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big>animations
= ({ <br>
triggers = [ &quot;close&quot;, &quot;hide&quot; ]; <br>
preset = &quot;slide-out&quot;; <br>
direction = &quot;down&quot;; <br>
... <br>
}, ...)</big></big></p>

<p style="margin-left:9%; margin-top: 1em"><big><big>Some
presets have additional options that you can set to
customize the animation. In this example, the
<i>slide-out</i> preset has a <i>direction</i> option
specifying the direction of the sliding
animation.</big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><b><big>Note</big></b></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big>Describing
animations with only words is difficult. We have short video
clips showing off each preset, but sadly they cannot be
included in this manpage. The web version of this document
hosted on our website at &lt;https://picom.app&gt; on the
other hand, does have those clips.</big></big></p>

<p style="margin-left:9%; margin-top: 1em"><big><big>The
following presets are available:</big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><i>slide-in</i>,
<i>slide-out</i></big></big></p>


<p style="margin-left:19%; margin-top: 1em"><big><big>Show/hide
the window with a sliding animation.</big></big></p>


<p style="margin-left:19%; margin-top: 1em"><big><big><b>Options</b></big></big></p>


<p style="margin-left:24%; margin-top: 1em"><big><big><i>direction</i></big></big></p>

<p style="margin-left:29%;"><big><big>The sliding
direction, valid values are <i>up</i>, <i>down</i>,
<i>left</i>, <i>right</i>.</big></big></p>


<p style="margin-left:24%; margin-top: 1em"><big><big><i>duration</i></big></big></p>

<p style="margin-left:29%;"><big><big>Duration of the
animation in seconds. (Can be fractional).</big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><i>fly-in</i>,
<i>fly-out</i></big></big></p>


<p style="margin-left:19%; margin-top: 1em"><big><big>Show/hide
the window with a flying animation.</big></big></p>


<p style="margin-left:19%; margin-top: 1em"><big><big><b>Options</b></big></big></p>


<p style="margin-left:24%; margin-top: 1em"><big><big><i>direction</i></big></big></p>

<p style="margin-left:29%;"><big><big>The flying direction,
valid values are <i>up</i>, <i>down</i>, <i>left</i>,
<i>right</i>.</big></big></p>


<p style="margin-left:24%; margin-top: 1em"><big><big><i>duration</i></big></big></p>

<p style="margin-left:29%;"><big><big>Duration of the
animation in seconds.</big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><i>appear</i>,
<i>disappear</i></big></big></p>


<p style="margin-left:19%; margin-top: 1em"><big><big>Show/hide
the window with a combination of scaling and
fading.</big></big></p>


<p style="margin-left:19%; margin-top: 1em"><big><big><b>Options</b></big></big></p>


<p style="margin-left:24%; margin-top: 1em"><big><big><i>scale</i></big></big></p>

<p style="margin-left:29%;"><big><big>The scaling factor of
the window, 1.0 means no scaling.</big></big></p>


<p style="margin-left:24%; margin-top: 1em"><big><big><i>duration</i></big></big></p>

<p style="margin-left:29%;"><big><big>Duration of the
animation in seconds.</big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><i>geometry-change</i></big></big></p>


<p style="margin-left:19%; margin-top: 1em"><big><big>Animate
the geometry (i.e. size and position) change of the
window.</big></big></p>


<p style="margin-left:24%; margin-top: 1em"><big><big><b><big>Warning</big></b></big></big></p>

<p style="margin-left:24%; margin-top: 1em"><big><big>This
makes use of both the <i>geometry</i> trigger, and the
<i>saved-image-blend</i> output variable. Both of these
features are experimental and may not work as
expected.</big></big></p>


<p style="margin-left:19%; margin-top: 1em"><big><big><b>Options</b></big></big></p>


<p style="margin-left:24%; margin-top: 1em"><big><big><i>duration</i></big></big></p>

<p style="margin-left:29%;"><big><big>Duration of the
animation in seconds.</big></big></p>

<h3>Advanced
<a name="Advanced"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><big><big><big>If
the existing presets don&rsquo;t meet your needs, it is
always possible to define your own animations. To put it
simply, an animation script is just a collection of
variables, and how their values should be computed.
Animation scripts, when running, are evaluated once per
frame, and the values of some of the variables are then used
to animate the window.</big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big><b>Basic
syntax</b></big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big>To
concretely illustrate what the above means, here is an
example:</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big>#
this animation script does nothing to your windows by the
way. <br>
animations = ({ <br>
# common options, these are not part of the collection of
variables <br>
triggers = [ &quot;open&quot; ];</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big>#
variables <br>
a = 10; <br>
b = &quot;a * 10&quot;; <br>
c = &quot;a + b&quot;; <br>
d = { <br>
curve = &quot;cubic-bezier(0.25, 0.1, 0.25, 1.0)&quot;; <br>
duration = 0.5; <br>
delay = 0; <br>
start = 0; <br>
end = 1; <br>
};</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big>#
more options follow <br>
# ... <br>
}, ...)</big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big>A
variable can be defined as a number, an expression, or a
timing function. In the example above, <i>a</i> is defined
to be a number (10), <i>b</i> is defined to be the result of
the expression a * 10, and <i>c</i> similarly. Expression
used to define one variable can refer to other variables in
the same script. This is how you can create complex
animations. Where the variables are defined in the script
does not matter, as long as no circular references
exist.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><b><big>Note</big></b></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big>Because
variable names can contain dashes (-), minus signs in
expressions must be surrounded by spaces. For example, a -
10 means a minus 10, whereas a-10 is a variable named
a-10.</big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big><i>d</i>
is a timing function, which is a group with several options
specifying its behavior. Timing functions are what drives an
animation. If no timing function is defined in an animation
script, nothing will be animated and the animation will end
instantly.</big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big>These
options are valid for a timing
function:</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><i>curve</i></big></big></big></p>

<p style="margin-left:19%;"><big><big><big>Type of the
curve and its parameters. It can be <i>linear</i>, which
takes no parameters and defines a linear curve; or
<i>cubic-bezier</i>, which takes four parameters for the
four control points of the cubic bezier curve; or
<i>step</i>, which takes one or two parameters, the first is
the number of steps, the second is the &quot;jumpterm&quot;,
which can be <i>jump-start</i>, <i>jump-end</i>,
<i>jump-none</i>, or <i>jump-both</i>. This option is
optional, is not specified, the curve will be
linear.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><i>delay</i></big></big></big></p>

<p style="margin-left:19%;"><big><big><big>The number of
seconds to wait before the value starts changing. Optional,
defaults to 0.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><i>duration</i></big></big></big></p>

<p style="margin-left:19%;"><big><big><big>The number of
seconds it will take for the value to go from <i>start</i>
to <i>end</i> once it starts changing. Mandatory. And must
be greater than 0.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><i>start</i></big></big></big></p>

<p style="margin-left:19%;"><big><big><big>The start value
of the variable. Mandatory.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><i>end</i></big></big></big></p>

<p style="margin-left:19%;"><big><big><big>The end value of
the variable. Mandatory.</big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big>All
options except <i>curve</i> can be set to expressions.
Timing function options are not variables
themselves.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><b><big>Note</big></b></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big>If
any of <i>delay</i>, <i>duration</i>, <i>start</i>, or
<i>end</i> is defined with an expression, the expression
will be evaluated only once when the animation starts. The
values of <i>delay</i>, <i>duration</i>, <i>start</i>, and
<i>end</i> will then be fixed for the duration of the
animation.</big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big>The
total duration of an animation is determined by the duration
of the timing function with the longest duration. The
animation will end when the longest timing function ends.
Once an animation ends, its effects on the window will be
removed.</big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big>There
isn&rsquo;t any restriction on what you can name the
variables. Obviously they cannot conflict with the names of
common options (<i>triggers</i>, <i>suppressions</i>, and
<i>preset</i>), but other than that, you can name them
whatever you want as long as libconfig allows it. Some
variable names have special meanings as we will see
below.</big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big><b>Output
variables</b></big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big>Now
you know how to write an animation script. But what we just
wrote doesn&rsquo;t actually do anything to the window. To
animate a window, we define a set of special variable names
which we will call &quot;output variables&quot;. If you
define variables with these names, their values will be used
to animate the window.</big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big>For
example, if you define an animation script like
this:</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big>animations
= ({ <br>
triggers = [ &quot;open&quot; ]; <br>
offset-x = { <br>
duration = 2; <br>
start = 0; <br>
end = 100; <br>
}; <br>
}, ...)</big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big>Then
when a window opens, it will move 100 pixels to the right
over the course of 2 seconds.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><b><big>Warning</big></b></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big>Although
we did say you can name your variables whatever you want, if
some of them become output variables in the future, your
animation script will behave unexpectedly. To avoid this
kind of problems, we reserve several classes of variable
names which we will never use for special variables. These
are: 1) any names that start with a single letter followed
by a dash (e.g. a-, b-, etc.); 2) any names that start with
var-, tmp-, or user-. If you need to define a non-output
variable, use one of these names.</big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big>Currently,
these output variables are supported:</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><i>offset-x</i>,
<i>offset-y</i></big></big></big></p>

<p style="margin-left:19%;"><big><big><big>The offset of
the window in the X and Y direction, respectively. The
window body will be moved by this amount. Note this does not
affect the shadow, so if you define these but not
<i>shadow-offset-x</i> or <i>shadow-offset-y</i>, the shadow
will remain where the window was without the
animation.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><i>shadow-offset-x</i>,
<i>shadow-offset-y</i></big></big></big></p>

<p style="margin-left:19%;"><big><big><big>The offset of
the shadow in the X and Y direction, respectively. The
shadow will be moved by this amount.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><i>opacity</i></big></big></big></p>

<p style="margin-left:19%;"><big><big><big>The opacity of
the window. This is a number between 0 and
1.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><i>blur-opacity</i></big></big></big></p>

<p style="margin-left:19%;"><big><big><big>The opacity of
the blur behind the window. This is a number between 0 and
1.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><i>shadow-opacity</i></big></big></big></p>

<p style="margin-left:19%;"><big><big><big>The opacity of
the shadow. This is a number between 0 and
1.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><i>scale-x</i>,
<i>scale-y</i>, <i>shadow-scale-x</i>,
<i>shadow-scale-y</i></big></big></big></p>

<p style="margin-left:19%;"><big><big><big>The scaling
factor of the window and shadow in the X and Y direction,
respectively. 1.0 means no scaling. The window body and the
shadow are scaled independently.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><i>crop-x</i>,
<i>crop-y</i>, <i>crop-width</i>,
<i>crop-height</i></big></big></big></p>

<p style="margin-left:19%;"><big><big><big>These four
values combined defines a rectangle on the screen. The
window and its shadow will be cropped to this rectangle. If
not defined, the window and shadow will not be
cropped.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><i>saved-image-blend</i></big></big></big></p>

<p style="margin-left:19%;"><big><big><big>When the
window&rsquo;s geometry changes, its content will often
change drastically, creating a jarring discontinuity. This
output variable allows you to blend the window&rsquo;s
content before and after the geometry change, the before and
after images will be stretched appropriately to match the
animation. This way you can smoothly animated geometry
changes. This is a number between 0 and 1. 0 means the saved
image is not used, whereas 1 means you will only see the
saved image. (EXPERIMENTAL)</big></big></big></p>


<p style="margin-left:24%; margin-top: 1em"><big><big><big><b><big>Warning</big></b></big></big></big></p>


<p style="margin-left:24%; margin-top: 1em"><big><big><big>The
<i>saved-image-blend</i> variable is experimental. It might
work incorrectly, cause visual artifacts, or slow down your
system. You are welcome to open an issue on GitHub if you
encounter any problems to help us improve it, though
resolution is not guaranteed.</big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big>All
coordinates are in pixels, and are in the coordinate system
of the screen. Sizes are also in
pixels.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><b><big>Important</big></b></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big>If
an output variable name is not defined in your animation
script, it will take the default value for whichever state
the window is in. Specifically, if you don&rsquo;t define an
<i>opacity</i> variable in the animation script for the
&quot;close&quot; or &quot;hide&quot; trigger, a closed
window will, by default, have 0 opacity. So you will just
see it disappear instantly. Oftentimes, you will want to set
<i>opacity</i> to 1 to make the window visible for the
duration of the animation.</big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big><b>Context
variables</b></big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big>Now
you know how to animate a window. But this is still not
powerful enough to support most animations you might want to
define. For example, if you want your window to fly out the
right side of your screen, the amount of pixels it has to
move depends on where it is on the screen, and its width.
For the last piece of the puzzle, we have context
variables.</big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big>A
context variable is a variable picom defines for you, and
you can use them in expressions like any other variables.
Their values reflect certain attributes of the window you
are animating.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><b><big>Warning</big></b></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big>If
you define a variable with the same name as a context
variable, your variable will shadow the context variable.
Since more context variables can be added in the future,
this can be difficult to avoid. Thus, the same rule for
output variables applies here as well: if you need to define
a temporary variable, use one of the reserved
names.</big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big>Currently,
these context variables are defined:</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><i>window-x</i>,
<i>window-y</i></big></big></big></p>

<p style="margin-left:19%;"><big><big><big>The coordinates
of the top-left corner of the window.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><i>window-width</i>,
<i>window-height</i></big></big></big></p>

<p style="margin-left:19%;"><big><big><big>The size of the
window.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><i>window-x-before</i>,
<i>window-y-before</i>, <i>window-width-before</i>,
<i>window-height-before</i></big></big></big></p>

<p style="margin-left:19%;"><big><big><big>The size and
coordinates of the window from the previous frame. This is
only meaningfully different from the normal window geometry
variables inside animations triggered by the <i>geometry</i>
trigger.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><i>window-monitor-x</i>,
<i>window-monitor-y</i>, <i>window-monitor-width</i>,
<i>window-monitor-height</i></big></big></big></p>

<p style="margin-left:19%;"><big><big><big>Defines the
rectangle which reflects the monitor the window is on. If
the window is not fully contained in any monitor, the
rectangle will reflect the entire virtual
screen.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><i>window-raw-opacity-before</i>,
<i>window-raw-opacity</i></big></big></big></p>

<p style="margin-left:19%;"><big><big><big>Animation
triggers are usually accompanied by a change in the
window&rsquo;s opacity. For example, when a window is
opened, its opacity changes from 0 to 1. These two variables
reflect the opacity of the window for the previous and
current frame. They are useful if you want to smoothly
transition the window&rsquo;s opacity.</big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><b><big>Important</big></b></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big>All
of the <i>window-*-before</i> variables are updated every
frame, and reflects the state of the window in the previous
frame. Which means they will only be meaningful for a single
frame, when an animation has just been triggered. Which
means you should only use them to define the <i>start</i>,
<i>end</i>, <i>duration</i>, or <i>delay</i> values of a
timing function, since these values are only evaluated once
when the animation starts.</big></big></big></p>

<h3>Share your animations
<a name="Share your animations"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><big><big><big><big>If
you have created an animation script that you think is
particularly cool, you are encouraged to share it with the
community. You can submit an issue or a pull request to
picom on GitHub, and get a chance to have your animation
included as one of the presets, so it can be used by
everyone.</big></big></big></big></p>

<h2>SHADER INTERFACE
<a name="SHADER INTERFACE"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><big><big><big><big>This
secion describes the interface of a custom shader, how it is
used by picom, and what parameters are passed by picom to
the shader. This does not apply to the legacy
backends.</big></big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big><big>A
custom shader is a GLSL fragment shader program, which can
be used to override the default way of how a window is
rendered. If a custom shader is used, the default picom
effects (e.g. dimming, color inversion, etc.) will no longer
be automatically applied. It would be the custom
shader&rsquo;s responsibility to apply these
effects.</big></big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big><big>The
interface between picom and a custom shader is dependent on
which backend is being used. The xrender backend
doesn&rsquo;t support shader at all. Here we descibe the
interface provided by the glx
backend.</big></big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big><big>The
shader must define a function, <i>vec4 window_shader()</i>,
which would be the entry point of the shader. The returned
<i>vec4</i> will be used to set <i>gl_FragColor</i>. A
function, <i>vec4 default_post_processing(vec4 c)</i>, is
provided for applying the default picom effects to input
color 'c'.</big></big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big><big>The
following uniform/input variables are made available to the
shader:</big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big>in
vec2 texcoord; // texture coordinate of the
fragment</big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big>uniform
float opacity; // opacity of the window (0.0 - 1.0) <br>
uniform float dim; // dimming factor of the window (0.0 -
1.0, higher means more dim) <br>
uniform float corner_radius; // corner radius of the window
(pixels) <br>
uniform float border_width; // estimated border width of the
window (pixels) <br>
uniform bool invert_color; // whether to invert the color of
the window <br>
uniform sampler2D tex; // texture of the window <br>
uniform vec2 effective_size; // effective dimensions of the
texture (repeats pixels if larger than tex) <br>
uniform sampler2D brightness; // estimated brightness of the
window, 1x1 texture <br>
uniform float max_brightness; // configured maximum
brightness of the window (0.0 - 1.0) <br>
uniform float time; // time in milliseconds, counting from
an unspecified starting point</big></big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big><big>The
default behavior of picom window rendering can be replicated
by the following shader:</big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big>#version
330 <br>
in vec2 texcoord; // texture coordinate of the
fragment</big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big>uniform
sampler2D tex; // texture of the
window</big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big>//
Default window post-processing: <br>
// 1) invert color <br>
// 2) opacity / transparency <br>
// 3) max-brightness clamping <br>
// 4) rounded corners <br>
vec4 default_post_processing(vec4
c);</big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big>//
Default window shader: <br>
// 1) fetch the specified pixel <br>
// 2) apply default post-processing <br>
vec4 window_shader() { <br>
vec2 texsize = textureSize(tex, 0); <br>
vec4 c = texture2D(tex, texcoord / texsize, 0); <br>
return default_post_processing(c); <br>
}</big></big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big><big>The
interface is expected to be mostly
stable.</big></big></big></big></p>

<h2>CONFIGURATION FILES
<a name="CONFIGURATION FILES"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><big><big><big><big>picom
could read from a configuration file if libconfig support is
compiled in. If <b>--config</b> is not used, picom will seek
for a configuration file in $XDG_CONFIG_HOME/picom.conf
(&#732;/.config/picom.conf, usually), then
$XDG_CONFIG_HOME/picom/picom.conf, then
$XDG_CONFIG_DIRS/picom.conf (often /etc/xdg/picom.conf),
then
$XDG_CONFIG_DIRS/picom/picom.conf.</big></big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big><big>When
@include directive is used in the config file, picom will
first search for the included file in the parent directory
of picom.conf, then in $XDG_CONFIG_HOME/picom/include/, then
in
$XDG_CONFIG_DIRS/picom/include.</big></big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big><big>picom
uses general libconfig configuration file format. A sample
configuration file is available as picom.sample.conf in the
source tree. Most of command line switches can be used as
options in configuration file as well. For example,
<b>--vsync</b> option documented above can be set in the
configuration file using &lsquo;vsync = &lsquo;. Command
line options will always overwrite the settings in the
configuration file.</big></big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big><big>Some
options can only be set in the configuration file. Such
options include rules (see <b>WINDOW RULES</b>), animations
(see <b>ANIMATIONS</b>), wintypes (see
below).</big></big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big><big>Window-type-specific
settings allow you to set window-specific options based on
the window type. These settings are exposed only in
configuration file. The format of this option is as
follows:</big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big>wintypes:
<br>
{ <br>
WINDOW_TYPE = { fade = BOOL; shadow = BOOL; opacity = FLOAT;
focus = BOOL; blur-background = BOOL; full-shadow = BOOL;
clip-shadow-above = BOOL; redir-ignore = BOOL; }; <br>
};</big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big><b><big>Warning</big></b></big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big>Using
this is highly discouraged, see the <b>WINDOW RULES</b>
section for the recommended way to set window-specific
options.</big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big><b><big>Important</big></b></big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big>According
to the window manager specification, a window can have
multiple types. But due to the limitation of how
<i>wintypes</i> was implemented, if a window has multiple
types, then for the purpose of applying wintypes options,
one of the window types will be chosen at random. Again, you
are recommended to use <b>WINDOW RULES</b>
instead.</big></big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big><big><i>WINDOW_TYPE</i>
is one of the 15 window types defined in EWMH standard:
&quot;unknown&quot;, &quot;desktop&quot;, &quot;dock&quot;,
&quot;toolbar&quot;, &quot;menu&quot;, &quot;utility&quot;,
&quot;splash&quot;, &quot;dialog&quot;, &quot;normal&quot;,
&quot;dropdown_menu&quot;, &quot;popup_menu&quot;,
&quot;tooltip&quot;, &quot;notification&quot;,
&quot;combo&quot;, and
&quot;dnd&quot;.</big></big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big><big>Following
per window-type options are
available:</big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big>fade,
shadow</big></big></big></big></p>

<p style="margin-left:19%;"><big><big><big><big>Controls
window-type-specific shadow and fade
settings.</big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big>opacity</big></big></big></big></p>

<p style="margin-left:19%;"><big><big><big><big>Controls
default opacity of the window
type.</big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big>focus</big></big></big></big></p>

<p style="margin-left:19%;"><big><big><big><big>Controls
whether the window of this type is to be always considered
focused. (By default, all window types except
&quot;normal&quot; and &quot;dialog&quot; has this
on.)</big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big>blur-background</big></big></big></big></p>

<p style="margin-left:19%;"><big><big><big><big>Controls
whether the window of this type will have its transparent
background blurred.</big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big>full-shadow</big></big></big></big></p>

<p style="margin-left:19%;"><big><big><big><big>Controls
whether shadow is drawn under the parts of the window that
you normally won&rsquo;t be able to see. Useful when the
window has parts of it transparent, and you want shadows in
those areas.</big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big>clip-shadow-above</big></big></big></big></p>

<p style="margin-left:19%;"><big><big><big><big>Controls
whether shadows that would have been drawn above the window
should be clipped. Useful for dock windows that should have
no shadow painted on top.</big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big>redir-ignore</big></big></big></big></p>

<p style="margin-left:19%;"><big><big><big><big>Controls
whether this type of windows should cause screen to become
redirected again after been unredirected. If you have
<b>--unredir-if-possible</b> set, and doesn&rsquo;t want
certain window to cause unnecessary screen redirection, you
can set this to true.</big></big></big></big></p>

<h2>BLUR
<a name="BLUR"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><big><big><big><big><big>You
can configure how the window background is blurred using a
'blur' section in your configuration file. Here is an
example:</big></big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big><big>blur:
<br>
{ <br>
method = &quot;gaussian&quot;; <br>
size = 10; <br>
deviation = 5.0; <br>
};</big></big></big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big><big><big>Available
options of the <i>blur</i> section
are:</big></big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big><big><b>method</b></big></big></big></big></big></p>

<p style="margin-left:19%;"><big><big><big><big><big>A
string. Controls the blur method. Corresponds to the
<b>--blur-method</b> command line option. Available choices
are: <i>none</i> to disable blurring; <i>gaussian</i> for
gaussian blur; <i>box</i> for box blur; <i>kernel</i> for
convolution blur with a custom kernel; <i>dual_kawase</i>
for dual-filter kawase blur. Note: <i>gaussian</i>,
<i>box</i> and <i>dual_kawase</i> blur methods are not
supported by the legacy backends. (default:
none)</big></big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big><big><b>size</b></big></big></big></big></big></p>

<p style="margin-left:19%;"><big><big><big><big><big>An
integer. The size of the blur kernel, required by
<i>gaussian</i> and <i>box</i> blur methods. For the
<i>kernel</i> method, the size is included in the kernel.
Corresponds to the <b>--blur-size</b> command line option
(default: 3).</big></big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big><big><b>deviation</b></big></big></big></big></big></p>

<p style="margin-left:19%;"><big><big><big><big><big>A
floating point number. The standard deviation for the
<i>gaussian</i> blur method. Corresponds to the
<b>--blur-deviation</b> command line option (default:
0.84089642).</big></big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big><big><b>strength</b></big></big></big></big></big></p>

<p style="margin-left:19%;"><big><big><big><big><big>An
integer in the range 0-20. The strength of the
<i>dual_kawase</i> blur method. Corresponds to the
<b>--blur-strength</b> command line option. If set to zero,
the value requested by <b>--blur-size</b> is approximated
(default: 5).</big></big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big><big><b>kernel</b></big></big></big></big></big></p>

<p style="margin-left:19%;"><big><big><big><big><big>A
string. The kernel to use for the <i>kernel</i> blur method,
specified in the same format as the <b>--blur-kern</b>
option. Corresponds to the <b>--blur-kern</b> command line
option.</big></big></big></big></big></p>

<h2>SIGNALS
<a name="SIGNALS"></a>
</h2>



<p style="margin-left:14%; margin-top: 1em"><big><big><big><big><big>&bull;
picom reinitializes itself upon receiving
SIGUSR1.</big></big></big></big></big></p>

<h2>D-BUS API
<a name="D-BUS API"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><big><big><big><big><big>It&rsquo;s
possible to control picom via D-Bus messages, by running
picom with <b>--dbus</b> and send messages to
com.github.chjj.compton.&lt;DISPLAY&gt;. &lt;DISPLAY&gt; is
the display used by picom, with all non-alphanumeric
characters transformed to underscores. For DISPLAY=:0.0 you
should use com.github.chjj.compton._0_0, for
example.</big></big></big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big><big><big>The
D-Bus methods and signals are not yet stable, thus
undocumented right now.</big></big></big></big></big></p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>



<p style="margin-left:14%; margin-top: 1em"><big><big><big><big><big>&bull;
Disable configuration file
parsing:</big></big></big></big></big></p>


<p style="margin-left:19%; margin-top: 1em"><big><big><big><big><big>$
picom --config /dev/null</big></big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big><big>&bull;
Run picom with client-side shadow and
fading:</big></big></big></big></big></p>


<p style="margin-left:19%; margin-top: 1em"><big><big><big><big><big>$
picom -cf</big></big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big><big>&bull;
Same thing as above, plus making inactive windows 80%
transparent, making frame 80% transparent, don&rsquo;t fade
on window open/close, and fork to
background:</big></big></big></big></big></p>


<p style="margin-left:19%; margin-top: 1em"><big><big><big><big><big>$
picom -bcf -i 0.8 -e 0.8
--no-fading-openclose</big></big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big><big>&bull;
Draw white shadows:</big></big></big></big></big></p>


<p style="margin-left:19%; margin-top: 1em"><big><big><big><big><big>$
picom -c --shadow-red 1 --shadow-green 1 --shadow-blue
1</big></big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big><big>&bull;
Avoid drawing shadows on wbar
window:</big></big></big></big></big></p>


<p style="margin-left:19%; margin-top: 1em"><big><big><big><big><big>$
picom -c --shadow-exclude 'class_g =
&quot;wbar&quot;'</big></big></big></big></big></p>


<p style="margin-left:14%; margin-top: 1em"><big><big><big><big><big>&bull;
Enable VSync with GLX
backend:</big></big></big></big></big></p>


<p style="margin-left:19%; margin-top: 1em"><big><big><big><big><big>$
picom --backend glx
--vsync</big></big></big></big></big></p>

<h2>BUGS
<a name="BUGS"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><big><big><big><big><big>Please
submit bug reports to
&lt;https://github.com/yshui/picom&gt;.</big></big></big></big></big></p>


<p style="margin-left:9%; margin-top: 1em"><big><big><big><big><big>Out
dated information in this man page is considered a
bug.</big></big></big></big></big></p>

<h2>RESOURCES
<a name="RESOURCES"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><big><big><big><big><big>Homepage:
&lt;https://github.com/yshui/picom&gt;</big></big></big></big></big></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><big><big><big><big><big><b>xcompmgr</b>(1),
<b>picom-inspect</b>(1),
<b>picom-trans</b>(1)</big></big></big></big></big></p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><big><big><big><big><big>Yuxuan
Shui</big></big></big></big></big></p>
<hr>
</body>
</html>
