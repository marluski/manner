<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Mon Apr  7 17:22:50 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>BOOTCTL</title>

</head>
<body>

<h1 align="center">BOOTCTL</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#GENERIC EFI FIRMWARE/BOOT LOADER COMMANDS">GENERIC EFI FIRMWARE/BOOT LOADER COMMANDS</a><br>
<a href="#BOOT LOADER SPECIFICATION COMMANDS">BOOT LOADER SPECIFICATION COMMANDS</a><br>
<a href="#BOOT LOADER INTERFACE COMMANDS">BOOT LOADER INTERFACE COMMANDS</a><br>
<a href="#SYSTEMD-BOOT COMMANDS">SYSTEMD-BOOT COMMANDS</a><br>
<a href="#KERNEL IMAGE COMMANDS">KERNEL IMAGE COMMANDS</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#SIGNED .EFI FILES">SIGNED .EFI FILES</a><br>
<a href="#EXIT STATUS">EXIT STATUS</a><br>
<a href="#ENVIRONMENT">ENVIRONMENT</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#NOTES">NOTES</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">bootctl -
Control EFI firmware boot settings and manage boot
loader</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="38%">


<p style="margin-top: 1em"><b>bootctl</b> [OPTIONS...]
{COMMAND}</p> </td>
<td width="53%">
</td></tr>
</table>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em"><b>bootctl</b>
can check the EFI firmware and boot loader status, list and
manage available boot loaders and boot loader entries, and
install, update, or remove the <b>systemd-boot</b>(7) boot
loader on the current system.</p>

<h2>GENERIC EFI FIRMWARE/BOOT LOADER COMMANDS
<a name="GENERIC EFI FIRMWARE/BOOT LOADER COMMANDS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">These commands
are available on any EFI system, regardless of the boot
loader used.</p>


<p style="margin-left:9%; margin-top: 1em"><b>status</b></p>

<p style="margin-left:14%;">Shows brief information about
the system firmware, the boot loader that was used to boot
the system, the boot loaders currently available in the ESP,
the boot loaders listed in the firmware's list of boot
loaders and the current default boot loader entry. If no
command is specified, this is the implied default.</p>

<p style="margin-left:14%; margin-top: 1em">See the example
below for details of the output.</p>

<p style="margin-left:14%; margin-top: 1em">Added in
version 239.</p>


<p style="margin-left:9%; margin-top: 1em"><b>reboot-to-firmware</b>
[<i>BOOL</i>]</p>

<p style="margin-left:14%;">Query or set the
&quot;Reboot-Into-Firmware-Setup&quot; flag of the EFI
firmware. Takes a boolean argument which controls whether to
show the firmware setup on next system reboot. If the
argument is omitted shows the current status of the flag, or
whether the flag is supported. This controls the same flag
as <b>systemctl reboot --firmware-setup</b>, but is more
low-level and allows setting the flag independently from
actually requesting a reboot.</p>

<p style="margin-left:14%; margin-top: 1em">Hint: use
<b>systemctl reboot --firmware-setup</b> to reboot into
firmware setup once. See <b>systemctl</b>(1) for
details.</p>

<p style="margin-left:14%; margin-top: 1em">Added in
version 251.</p>

<h2>BOOT LOADER SPECIFICATION COMMANDS
<a name="BOOT LOADER SPECIFICATION COMMANDS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">These commands
are available for all boot loaders that implement the
<b><font color="#0000FF">Boot Loader
Specification</font></b>
<small><font color="#000000">[1]</font></small>
<font color="#000000">, such as
<b>systemd-boot</b>.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>list</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Shows all
available boot loader entries implementing the</font>
<b><font color="#0000FF">Boot Loader
Specification</font></b>
<small><font color="#000000">[1]</font></small>
<font color="#000000">, as well as any other entries
discovered or automatically generated by a boot loader
implementing the</font> <b><font color="#0000FF">Boot Loader
Interface</font></b>
<small><font color="#000000">[2]</font></small>
<font color="#000000">. JSON output may be requested with
<b>--json=</b>.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">See
the example below for details of the output.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 239.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>unlink</b>
<i>ID</i></font></p>

<p style="margin-left:14%;"><font color="#000000">Removes a
boot loader entry including the files it refers to. Takes a
single boot loader entry ID string or a glob pattern as
argument. Referenced files such as kernel or initrd are only
removed if no other entry refers to them.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 253.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>cleanup</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Removes
files from the ESP and XBOOTLDR partitions that belong to
the entry token but are not referenced in any boot loader
entries.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 253.</font></p>

<h2>BOOT LOADER INTERFACE COMMANDS
<a name="BOOT LOADER INTERFACE COMMANDS"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><font color="#000000">These
commands are available for all boot loaders that implement
the</font> <b><font color="#0000FF">Boot Loader
Specification</font></b>
<small><font color="#000000">[1]</font></small>
<font color="#000000">and the</font>
<b><font color="#0000FF">Boot Loader Interface</font></b>
<small><font color="#000000">[2]</font></small>
<font color="#000000">, such as
<b>systemd-boot</b>.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>set-default</b>
<i>ID</i>, <b>set-oneshot</b> <i>ID</i></font></p>

<p style="margin-left:14%;"><font color="#000000">Sets the
default boot loader entry. Takes a single boot loader entry
ID string or a glob pattern as argument. The
<b>set-oneshot</b> command will set the default entry only
for the next boot, the <b>set-default</b> will set it
persistently for all future boots.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000"><b>bootctl
list</b> can be used to list available boot loader entries
and their IDs.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">In
addition, the boot loader entry ID may be specified as one
of: <b>@default</b>, <b>@oneshot</b> or <b>@current</b>,
which correspond to the current default boot loader entry
for all future boots, the current default boot loader entry
for the next boot, and the currently booted boot loader
entry. These special IDs are resolved to the current values
of the EFI variables <i>LoaderEntryDefault</i>,
<i>LoaderEntryOneShot</i> and <i>LoaderEntrySelected</i>,
see</font> <b><font color="#0000FF">Boot Loader
Specification</font></b>
<small><font color="#000000">[1]</font></small>
<font color="#000000">for details. These special IDs are
primarily useful as a quick way to persistently make the
currently booted boot loader entry the default choice, or to
upgrade the default boot loader entry for the next boot to
the default boot loader entry for all future boots, but may
be used for other operations too.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">If
set to <b>@saved</b> the chosen entry will be saved as an
EFI variable on every boot and automatically selected the
next time the boot loader starts.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">When
an empty string (&quot;&quot;) is specified as the ID, then
the corresponding EFI variable will be unset.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Hint:
use <b>systemctl reboot --boot-loader-entry=</b><i>ID</i> to
reboot into a specific boot entry and <b>systemctl reboot
--boot-loader-menu=</b><i>timeout</i> to reboot into the
boot loader menu once. See <b>systemctl</b>(1) for
details.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 240.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>set-timeout</b>
<i>TIMEOUT</i>, <b>set-timeout-oneshot</b>
<i>TIMEOUT</i></font></p>

<p style="margin-left:14%;"><font color="#000000">Sets the
boot loader menu timeout in seconds. The
<b>set-timeout-oneshot</b> command will set the timeout only
for the next boot. See <b>systemd.time</b>(7) for details
about the syntax of time spans.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">If
this is set to <b>menu-disabled</b> or <b>menu-hidden</b> or
<b>0</b>, no menu is shown and the default entry will be
booted immediately, while setting this to <b>menu-force</b>
disables the timeout while always showing the menu. When an
empty string (&quot;&quot;) is specified the bootloader will
revert to its default menu timeout.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 250.</font></p>

<h2>SYSTEMD-BOOT COMMANDS
<a name="SYSTEMD-BOOT COMMANDS"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><font color="#000000">These
commands manage the <b>systemd-boot</b> EFI boot loader, and
do not work in conjunction with other boot
loaders.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>install</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Installs
<b>systemd-boot</b> into the EFI system partition. A copy of
<b>systemd-boot</b> will be stored as the EFI
default/fallback loader at <i>ESP</i>/EFI/BOOT/BOOT*.EFI.
The boot loader is then added to the top of the firmware's
boot loader list.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 239.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>update</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Updates
all installed versions of <b>systemd-boot</b>(7), if the
available version is newer than the version installed in the
EFI system partition. This also includes the EFI
default/fallback loader at <i>ESP</i>/EFI/BOOT/BOOT*.EFI.
The boot loader is then added to end of the firmware's boot
loader list if missing.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 239.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>remove</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Removes
all installed versions of <b>systemd-boot</b> from the EFI
system partition and the firmware's boot loader
list.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 239.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>is-installed</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Checks
whether <b>systemd-boot</b> is installed in the ESP. Note
that a single ESP might host multiple boot loaders; this
hence checks whether <b>systemd-boot</b> is one (of possibly
many) installed boot loaders &mdash; and neither whether it
is the default nor whether it is registered in any EFI
variables.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 243.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>random-seed</b></font></p>


<p style="margin-left:14%;"><font color="#000000">Generates
a random seed and stores it in the EFI System Partition
(ESP), for use by the <b>systemd-boot</b> boot loader. If a
random seed already exists in the ESP it is refreshed. Also
generates a random 'system token' and stores it persistently
as an EFI variable, if one has not been set before. If the
boot loader finds the random seed in the ESP and the system
token in the EFI variable it will derive a random seed to
pass to the OS and a new seed to store in the ESP from the
combination of both. The random seed passed to the OS is
credited to the kernel's entropy pool by the system manager
during early boot, and permits userspace to boot up with an
entropy pool fully initialized very early on. Also see
<b>systemd-boot-random-seed.service</b>(8).</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">See</font>
<b><font color="#0000FF">Random Seeds</font></b>
<small><font color="#000000">[3]</font></small>
<font color="#000000">for further information.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 243.</font></p>

<h2>KERNEL IMAGE COMMANDS
<a name="KERNEL IMAGE COMMANDS"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>kernel-identify</b>
<i>kernel</i></font></p>

<p style="margin-left:14%;"><font color="#000000">Takes a
kernel image as argument. Checks what kind of kernel the
image is. Returns one of &quot;uki&quot;, &quot;addon&quot;,
&quot;pe&quot;, and &quot;unknown&quot;.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 253.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>kernel-inspect</b>
<i>kernel</i></font></p>

<p style="margin-left:14%;"><font color="#000000">Takes a
kernel image as argument. Prints details about the
image.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 253.</font></p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><font color="#000000">The
following options are understood:</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>--esp-path=</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Path to
the EFI System Partition (ESP). If not specified, /efi/,
/boot/, and /boot/efi/ are checked in turn. It is
recommended to mount the ESP to /efi/, if
possible.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>--boot-path=</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Path to
the Extended Boot Loader partition, as defined in the</font>
<b><font color="#0000FF">Boot Loader
Specification</font></b>
<small><font color="#000000">[1]</font></small>
<font color="#000000">. If not specified, /boot/ is checked.
It is recommended to mount the Extended Boot Loader
partition to /boot/, if possible.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>--root=</b><i>root</i></font></p>

<p style="margin-left:14%;"><font color="#000000">Takes a
directory path as an argument. All paths will be prefixed
with the given alternate <i>root</i> path, including config
search paths.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 252.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>--image=</b><i>image</i></font></p>

<p style="margin-left:14%;"><font color="#000000">Takes a
path to a disk image file or block device node. If
specified, all operations are applied to file system in the
indicated disk image. This option is similar to
<b>--root=</b>, but operates on file systems stored in disk
images or block devices. The disk image should either
contain just a file system or a set of file systems within a
GPT partition table, following the</font>
<b><font color="#0000FF">Discoverable Partitions
Specification</font></b>
<small><font color="#000000">[4]</font></small>
<font color="#000000">. For further information on supported
disk images, see <b>systemd-nspawn</b>(1)'s switch of the
same name.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 252.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>--image-policy=</b><i>policy</i></font></p>

<p style="margin-left:14%;"><font color="#000000">Takes an
image policy string as argument, as per
<b>systemd.image-policy</b>(7). The policy is enforced when
operating on the disk image specified via <b>--image=</b>,
see above. If not specified defaults to the &quot;*&quot;
policy, i.e. all recognized file systems in the image are
used.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>--install-source=</b></font></p>

<p style="margin-left:14%;"><font color="#000000">When
installing binaries with <b>--root=</b> or <b>--image=</b>,
selects where to source them from. Takes one of
&quot;auto&quot; (the default), &quot;image&quot; or
&quot;host&quot;. With &quot;auto&quot; binaries will be
picked from the specified directory or image, and if not
found they will be picked from the host. With
&quot;image&quot; or &quot;host&quot; no fallback search
will be performed if the binaries are not found in the
selected source.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 252.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>-p</b>,
<b>--print-esp-path</b></font></p>

<p style="margin-left:14%;"><font color="#000000">This
option modifies the behaviour of <b>status</b>. Only prints
the path to the EFI System Partition (ESP) to standard
output and exits.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 236.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>-x</b>,
<b>--print-boot-path</b></font></p>

<p style="margin-left:14%;"><font color="#000000">This
option modifies the behaviour of <b>status</b>. Only prints
the path to the Extended Boot Loader partition if it exists,
and the path to the ESP otherwise to standard output and
exit. This command is useful to determine where to place
boot loader entries, as they are preferably placed in the
Extended Boot Loader partition if it exists and in the ESP
otherwise.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Boot
Loader Specification Type #1 entries should generally be
placed in the directory &quot;$(bootctl
-x)/loader/entries/&quot;. Existence of that directory may
also be used as indication that boot loader entry support is
available on the system. Similarly, Boot Loader
Specification Type #2 entries should be placed in the
directory &quot;$(bootctl -x)/EFI/Linux/&quot;.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Note
that this option (similarly to the <b>--print-esp-path</b>
option mentioned above), is available independently from the
boot loader used, i.e. also without <b>systemd-boot</b>
being installed.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 242.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>--print-loader-path</b></font></p>

<p style="margin-left:14%;"><font color="#000000">This
option modifies the behaviour of <b>status</b>: it shows the
absolute path to the boot loader EFI binary used for the
current boot if this information is available. Note that no
attempt is made to verify whether the binary still
exists.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 257.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>--print-stub-path</b></font></p>

<p style="margin-left:14%;"><font color="#000000">This
option modifies the behaviour of <b>status</b>: it shows the
absolute path to the UKI/stub EFI binary used for the
current boot if this information is available. Note that no
attempt is made to verify whether the binary still
exists.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 257.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>-R</b>,
<b>--print-root-device</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Print the
path to the block device node backing the root file system
of the local OS. This prints a path such as /dev/nvme0n1p5.
If the root file system is backed by dm-crypt/LUKS or
dm-verity the underlying block device is returned. If the
root file system is backed by multiple block devices (as
supported by btrfs) the operation will fail. If the switch
is specified twice (i.e. <b>-RR</b>) and the discovered
block device is a partition device the &quot;whole&quot;
block device it belongs to is determined and printed (e.g.
/dev/nvme0n1). If the root file system is &quot;tmpfs&quot;
(or a similar in-memory file system), the block device
backing /usr/ is returned if applicable. If the root file
system is a network file system (e.g. NFS, CIFS) the
operation will fail.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 254.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>--no-variables</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Do not
touch the firmware's boot loader list stored in EFI
variables.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 220.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>--random-seed=yes|no</b></font></p>

<p style="margin-left:14%;"><font color="#000000">By
default the <b>install</b> command initializes a random seed
file in the ESP. When creating an image it may be desirable
to disable that in order to avoid having the same seed in
all instances.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 257.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>--graceful</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Ignore
failure when the EFI System Partition cannot be found, when
EFI variables cannot be written, or a different or newer
boot loader is already installed. Currently only applies to
<b>is-installed</b>, <b>update</b>, and <b>random-seed</b>
verbs.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 244.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>-q</b>,
<b>--quiet</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Suppress
printing of the results of various commands and also the
hints about ESP being unavailable.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 251.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>--make-entry-directory=yes|no</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Controls
creation and deletion of the</font>
<b><font color="#0000FF">Boot Loader
Specification</font></b>
<small><font color="#000000">[1]</font></small>
<font color="#000000">Type #1 entry directory on the file
system containing resources such as kernel and initrd images
during <b>install</b> and <b>remove</b>, respectively. The
directory is named after the entry token, as specified with
<b>--entry-token=</b> parameter described below, and is
placed immediately below the <i>$BOOT</i> root directory
(i.e. beneath the file system returned by the
<b>--print-boot-path</b> option, see above). Defaults to
&quot;no&quot;.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 251.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>--entry-token=</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Controls
how to name and identify boot loader entries for this OS
installation. Accepted during <b>install</b>, and takes one
of &quot;auto&quot;, &quot;machine-id&quot;,
&quot;os-id&quot;, &quot;os-image-id&quot; or an arbitrary
string prefixed by &quot;literal:&quot; as
argument.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">If
set to <b>machine-id</b> the entries are named after the
machine ID of the running system (e.g.
&quot;b0e793a9baf14b5fa13ecbe84ff637ac&quot;). See
<b>machine-id</b>(5) for details about the machine ID
concept and file.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">If
set to <b>os-id</b> the entries are named after the OS ID of
the running system, i.e. the <i>ID=</i> field of
<b>os-release</b>(5) (e.g. &quot;fedora&quot;). Similarly,
if set to <b>os-image-id</b> the entries are named after the
OS image ID of the running system, i.e. the <i>IMAGE_ID=</i>
field of os-release (e.g.
&quot;vendorx-cashier-system&quot;).</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">If
set to <b>auto</b> (the default), the
/etc/kernel/entry-token file will be read if it exists, and
the stored value used. Otherwise if the local machine ID is
initialized it is used. Otherwise <i>IMAGE_ID=</i> from
os-release will be used, if set. Otherwise, <i>ID=</i> from
os-release will be used, if set.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Unless
set to &quot;machine-id&quot;, or when
<b>--make-entry-directory=yes</b> is used the selected token
string is written to a file /etc/kernel/entry-token, to
ensure it will be used for future entries. This file is also
read by <b>kernel-install</b>(8), in order to identify under
which name to generate boot loader entries for newly
installed kernels, or to determine the entry names for
removing old ones.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Using
the machine ID for naming the entries is generally
preferable, however there are cases where using the other
identifiers is a good option. Specifically: if the
identification data that the machine ID entails shall not be
stored on the (unencrypted) <i>$BOOT</i> partition, or if
the ID shall be generated on first boot and is not known
when the entries are prepared. Note that using the machine
ID has the benefit that multiple parallel installations of
the same OS can coexist on the same medium, and they can
update their boot loader entries independently. When using
another identifier (such as the OS ID or the OS image ID),
parallel installations of the same OS would try to use the
same entry name. To support parallel installations, the
installer must use a different entry token when adding a
second installation.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 251.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>--all-architectures</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Install
binaries for all supported EFI architectures (this implies
<b>--no-variables</b>).</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 252.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>--efi-boot-option-description=</b></font></p>


<p style="margin-left:14%;"><font color="#000000">Description
of the entry added to the firmware's boot option list.
Defaults to &quot;Linux Boot Manager&quot;.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Using
the default entry name &quot;Linux Boot Manager&quot; is
generally preferable as only one bootloader installed to a
single ESP partition should be used to boot any number of OS
installations found on the various disks installed in the
system. Specifically distributions should not use this flag
to install a branded entry in the boot option list. However
in situations with multiple disks, each with their own ESP
partition, it can be beneficial to make it easier to
identify the bootloader being used in the firmware's boot
option menu.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 252.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>--dry-run</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Dry run
for <b>unlink</b> and <b>cleanup</b>.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">In
dry run mode, the unlink and cleanup operations only print
the files that would get deleted without actually deleting
them.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 253.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>--secure-boot-auto-enroll=yes|no</b>,
<b>--private-key=</b><i>PATH/URI</i>,
<b>--private-key-source=</b><i>TYPE</i><b>[:</b><i>NAME</i><b>]</b>,
<b>--certificate=</b><i>PATH</i>,
<b>--certificate-source=</b><i>TYPE</i><b>[:</b><i>NAME</i><b>]</b></font></p>


<p style="margin-left:14%;"><font color="#000000">Configure
the ESP for secure boot auto-enrollment when invoking the
<b>install</b> command. Takes a boolean argument. Disabled
by default. Enabling this option will make <b>bootctl</b>
populate the ESP with signed &quot;PK&quot;, &quot;KEK&quot;
and &quot;db&quot; signature databases, each containing the
given certificate in &quot;DER&quot; format as their only
entry. These secure boot signature databases will be picked
up and enrolled by <b>systemd-boot</b> if secure boot is in
setup mode and secure boot auto-enrollment is
enabled.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">When
specifying this option, a certificate and private key have
to be provided as well using the <b>--certificate=</b> and
<b>--private-key=</b> options. The <b>--certificate=</b>
option takes a path to a PEM encoded X.509 certificate or a
URI that's passed to the OpenSSL provider configured with
<b>--certificate-source</b> which takes one of
&quot;file&quot; or &quot;provider&quot;, with the latter
being followed by a specific provider identifier, separated
with a colon, e.g. &quot;provider:pkcs11&quot;. The
<b>--private-key=</b> option can take a path or a URI that
will be passed to the OpenSSL engine or provider, as
specified by <b>--private-key-source=</b> as a
&quot;type:name&quot; tuple, such as
&quot;engine:pkcs11&quot;. The specified OpenSSL signing
engine or provider will be used to sign the EFI signature
lists.</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 257.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>--no-pager</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Do not
pipe output into a pager.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>--json=</b><i>MODE</i></font></p>

<p style="margin-left:14%;"><font color="#000000">Shows
output formatted as JSON. Expects one of &quot;short&quot;
(for the shortest possible output without any redundant
whitespace or line breaks), &quot;pretty&quot; (for a pretty
version of the same, with indentation and line breaks) or
&quot;off&quot; (to turn off JSON output, the
default).</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>-h</b>,
<b>--help</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Print a
short help text and exit.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>--version</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Print a
short version string and exit.</font></p>

<h2>SIGNED .EFI FILES
<a name="SIGNED .EFI FILES"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>bootctl
install</b> and <b>update</b> will look for a
<b>systemd-boot</b> file ending with the
&quot;.efi.signed&quot; suffix first, and copy that instead
of the normal &quot;.efi&quot; file. This allows
distributions or end-users to provide signed images for UEFI
SecureBoot.</font></p>

<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><font color="#000000">On
success, 0 is returned, a non-zero failure code otherwise.
<b>bootctl --print-root-device</b> returns exit status 80 in
case the root file system is not backed by single block
device, and other non-zero exit statuses on other
errors.</font></p>

<h2>ENVIRONMENT
<a name="ENVIRONMENT"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><font color="#000000">If
<i>$SYSTEMD_RELAX_ESP_CHECKS=1</i> is set the validation
checks for the ESP are relaxed, and the path specified with
<b>--esp-path=</b> may refer to any kind of file system on
any kind of partition.</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000">Similarly,
<i>$SYSTEMD_RELAX_XBOOTLDR_CHECKS=1</i> turns off some
validation checks for the Extended Boot Loader
partition.</font></p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>Example&nbsp;1.&nbsp;Output
from status and list</b></font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">$
<b>bootctl status</b> <br>
System: <br>
Firmware: UEFI 2.40 (<i>firmware-version</i>) &larr;
firmware vendor and version <br>
Secure Boot: disabled (setup) &larr; Secure Boot status <br>
TPM2 Support: yes <br>
Boot into FW: supported &larr; does the firmware support
booting into itself</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Current
Boot Loader: &larr; details about sd-boot or another boot
loader <br>
Product: systemd-boot <i>version</i> implementing the</font>
<b><font color="#0000FF">Boot Loader Interface</font></b>
<small><font color="#000000">[2]</font></small>
<font color="#000000"><br>
Features: &#10003; Boot counting <br>
&#10003; Menu timeout control <br>
&#10003; One-shot menu timeout control <br>
&#10003; Default entry control <br>
&#10003; One-shot entry control <br>
&#10003; Support for XBOOTLDR partition <br>
&#10003; Support for passing random seed to OS <br>
&#10003; Load drop-in drivers <br>
&#10003; Boot loader sets ESP information <br>
&#10003; Menu can be disabled <br>
ESP:
/dev/disk/by-partuuid/01234567-89ab-cdef-dead-beef00000000
<br>
File:
&#9492;&#9472;/EFI/systemd/systemd-bootx64.efi</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Random
Seed: &larr; random seed used for entropy in early boot <br>
Passed to OS: yes <br>
System Token: set <br>
Exists: yes</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Available
Boot Loaders on ESP: <br>
ESP: /boot/efi
(/dev/disk/by-partuuid/01234567-89ab-cdef-dead-beef00000000)
<br>
File: &#9492;&#9472;/EFI/systemd/systemd-bootx64.efi
(systemd-boot 251 <br>
File: &#9492;&#9472;/EFI/BOOT/BOOTX64.EFI (systemd-boot
251</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Boot
Loaders Listed in EFI Variables: <br>
Title: Linux Boot Manager <br>
ID: 0x0001 <br>
Status: active, boot-order <br>
Partition: /dev/disk/by-partuuid/... <br>
File:
&#9492;&#9472;/EFI/systemd/systemd-bootx64.efi</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Title:
Fedora <br>
ID: 0x0000 <br>
Status: active, boot-order <br>
Partition: /dev/disk/by-partuuid/... <br>
File: &#9492;&#9472;/EFI/fedora/shimx64.efi</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Title:
Linux-Firmware-Updater <br>
ID: 0x0002 <br>
Status: active, boot-order <br>
Partition: /dev/disk/by-partuuid/... <br>
File: &#9492;&#9472;/EFI/fedora/fwupdx64.efi</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Boot
Loader Entries: <br>
$BOOT: /boot/efi
(/dev/disk/by-partuuid/01234567-89ab-cdef-dead-beef00000000)</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Default
Boot Loader Entry: <br>
type: Boot Loader Specification Type #1 (.conf) <br>
title: Fedora Linux 36 (Workstation Edition) <br>
id: ... <br>
source:
/boot/efi/loader/entries/<i>entry-token</i>-<i>kernel-version</i>.conf
<br>
version: <i>kernel-version</i> <br>
machine-id: ... <br>
linux: /<i>entry-token</i>/<i>kernel-version</i>/linux <br>
initrd: /<i>entry-token</i>/<i>kernel-version</i>/initrd
<br>
options: root=...</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">$
<b>bootctl list</b> <br>
Boot Loader Entries: <br>
type: Boot Loader Specification Type #1 (.conf) <br>
title: Fedora Linux 36 (Workstation Edition) (default)
(selected) <br>
id: ... <br>
source:
/boot/efi/loader/entries/<i>entry-token</i>-<i>kernel-version</i>.conf
<br>
version: <i>kernel-version</i> <br>
machine-id: ... <br>
linux: /<i>entry-token</i>/<i>kernel-version</i>/linux <br>
initrd: /<i>entry-token</i>/<i>kernel-version</i>/initrd
<br>
options: root=...</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">type:
Boot Loader Specification Type #2 (.efi) <br>
title: Fedora Linux 35 (Workstation Edition) <br>
id: ... <br>
source: /boot/efi/EFI/Linux/fedora-<i>kernel-version</i>.efi
<br>
version: <i>kernel-version</i> <br>
machine-id: ... <br>
linux: /EFI/Linux/fedora-<i>kernel-version</i>.efi <br>
options: root=...</font></p>


<p style="margin-left:14%; margin-top: 1em"><font color="#000000">type:
Automatic <br>
title: Reboot Into Firmware Interface <br>
id: auto-reboot-to-firmware-setup <br>
source:
/sys/firmware/efi/efivars/LoaderEntries-4a67b082-0a4c-41cf-b6c7-440b29bb8c4f</font></p>


<p style="margin-left:9%; margin-top: 1em"><font color="#000000">In
the listing, &quot;(default)&quot; specifies the entry that
will be used by default, and &quot;(selected)&quot;
specifies the entry that was selected the last time (i.e. is
currently running).</font></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>systemd-boot</b>(7),</font>
<b><font color="#0000FF">Boot Loader
Specification</font></b>
<small><font color="#000000">[1]</font></small>
<font color="#000000">,</font> <b><font color="#0000FF">Boot
Loader Interface</font></b>
<small><font color="#000000">[2]</font></small>
<font color="#000000">,
<b>systemd-boot-random-seed.service</b>(8)</font></p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="3%">



<p style="margin-top: 1em"><font color="#000000">1.</font></p> </td>
<td width="1%"></td>
<td width="32%">


<p style="margin-top: 1em"><font color="#000000">Boot
Loader Specification</font></p></td>
<td width="54%">
</td></tr>
</table>


<p style="margin-left:14%;"><font color="#000000">https://uapi-group.org/specifications/specs/boot_loader_specification</font></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="3%">



<p style="margin-top: 1em"><font color="#000000">2.</font></p> </td>
<td width="1%"></td>
<td width="27%">


<p style="margin-top: 1em"><font color="#000000">Boot
Loader Interface</font></p></td>
<td width="59%">
</td></tr>
</table>


<p style="margin-left:14%;"><font color="#000000">https://systemd.io/BOOT_LOADER_INTERFACE</font></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="3%">



<p style="margin-top: 1em"><font color="#000000">3.</font></p> </td>
<td width="1%"></td>
<td width="15%">


<p style="margin-top: 1em"><font color="#000000">Random
Seeds</font></p> </td>
<td width="71%">
</td></tr>
</table>


<p style="margin-left:14%;"><font color="#000000">https://systemd.io/RANDOM_SEEDS</font></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="3%">



<p style="margin-top: 1em"><font color="#000000">4.</font></p> </td>
<td width="1%"></td>
<td width="48%">



<p style="margin-top: 1em"><font color="#000000">Discoverable
Partitions Specification</font></p></td>
<td width="38%">
</td></tr>
</table>


<p style="margin-left:14%;"><font color="#000000">https://uapi-group.org/specifications/specs/discoverable_partitions_specification</font></p>
<hr>
</body>
</html>
