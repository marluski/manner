<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Mon Apr  7 17:31:58 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>VIRSH</title>

</head>
<body>

<h1 align="center">VIRSH</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#GENERIC COMMANDS">GENERIC COMMANDS</a><br>
<a href="#help">help</a><br>
<a href="#quit, exit">quit, exit</a><br>
<a href="#version">version</a><br>
<a href="#cd">cd</a><br>
<a href="#pwd">pwd</a><br>
<a href="#connect">connect</a><br>
<a href="#uri">uri</a><br>
<a href="#hostname">hostname</a><br>
<a href="#sysinfo">sysinfo</a><br>
<a href="#nodeinfo">nodeinfo</a><br>
<a href="#nodecpumap">nodecpumap</a><br>
<a href="#nodecpustats">nodecpustats</a><br>
<a href="#nodememstats">nodememstats</a><br>
<a href="#nodesevinfo">nodesevinfo</a><br>
<a href="#nodesuspend">nodesuspend</a><br>
<a href="#node-memory-tune">node-memory-tune</a><br>
<a href="#capabilities">capabilities</a><br>
<a href="#domcapabilities">domcapabilities</a><br>
<a href="#pool-capabilities">pool-capabilities</a><br>
<a href="#inject-nmi">inject-nmi</a><br>
<a href="#list">list</a><br>
<a href="#Persistence">Persistence</a><br>
<a href="#Existence of managed save image">Existence of managed save image</a><br>
<a href="#Domain state">Domain state</a><br>
<a href="#Autostarting domains">Autostarting domains</a><br>
<a href="#Snapshot existence">Snapshot existence</a><br>
<a href="#Checkpoint existence">Checkpoint existence</a><br>
<a href="#freecell">freecell</a><br>
<a href="#freepages">freepages</a><br>
<a href="#allocpages">allocpages</a><br>
<a href="#cpu-baseline">cpu-baseline</a><br>
<a href="#cpu-compare">cpu-compare</a><br>
<a href="#cpu-models">cpu-models</a><br>
<a href="#hypervisor-cpu-compare">hypervisor-cpu-compare</a><br>
<a href="#hypervisor-cpu-baseline">hypervisor-cpu-baseline</a><br>
<a href="#DOMAIN COMMANDS">DOMAIN COMMANDS</a><br>
<a href="#autostart">autostart</a><br>
<a href="#blkdeviotune">blkdeviotune</a><br>
<a href="#blkiotune">blkiotune</a><br>
<a href="#blockcommit">blockcommit</a><br>
<a href="#blockcopy">blockcopy</a><br>
<a href="#blockjob">blockjob</a><br>
<a href="#blockpull">blockpull</a><br>
<a href="#blockresize">blockresize</a><br>
<a href="#console">console</a><br>
<a href="#cpu-stats">cpu-stats</a><br>
<a href="#create">create</a><br>
<a href="#define">define</a><br>
<a href="#desc">desc</a><br>
<a href="#destroy">destroy</a><br>
<a href="#domblkerror">domblkerror</a><br>
<a href="#domblkinfo">domblkinfo</a><br>
<a href="#domblklist">domblklist</a><br>
<a href="#domblkstat">domblkstat</a><br>
<a href="#domblkthreshold">domblkthreshold</a><br>
<a href="#domcontrol">domcontrol</a><br>
<a href="#domdirtyrate-calc">domdirtyrate-calc</a><br>
<a href="#domdisplay">domdisplay</a><br>
<a href="#domdisplay-reload">domdisplay-reload</a><br>
<a href="#domfsfreeze">domfsfreeze</a><br>
<a href="#domfsinfo">domfsinfo</a><br>
<a href="#domfsthaw">domfsthaw</a><br>
<a href="#domfstrim">domfstrim</a><br>
<a href="#domhostname">domhostname</a><br>
<a href="#domid">domid</a><br>
<a href="#domif-getlink">domif-getlink</a><br>
<a href="#domif-setlink">domif-setlink</a><br>
<a href="#domifaddr">domifaddr</a><br>
<a href="#backup-begin">backup-begin</a><br>
<a href="#backup-dumpxml">backup-dumpxml</a><br>
<a href="#domiflist">domiflist</a><br>
<a href="#domifstat">domifstat</a><br>
<a href="#domiftune">domiftune</a><br>
<a href="#dominfo">dominfo</a><br>
<a href="#domjobabort">domjobabort</a><br>
<a href="#domjobinfo">domjobinfo</a><br>
<a href="#domlaunchsecinfo">domlaunchsecinfo</a><br>
<a href="#domsetlaunchsecstate">domsetlaunchsecstate</a><br>
<a href="#dommemstat">dommemstat</a><br>
<a href="#domname">domname</a><br>
<a href="#dompmsuspend">dompmsuspend</a><br>
<a href="#dompmwakeup">dompmwakeup</a><br>
<a href="#domrename">domrename</a><br>
<a href="#domstate">domstate</a><br>
<a href="#domstats">domstats</a><br>
<a href="#domtime">domtime</a><br>
<a href="#domuuid">domuuid</a><br>
<a href="#domxml-from-native">domxml-from-native</a><br>
<a href="#domxml-to-native">domxml-to-native</a><br>
<a href="#dump">dump</a><br>
<a href="#dumpxml">dumpxml</a><br>
<a href="#edit">edit</a><br>
<a href="#emulatorpin">emulatorpin</a><br>
<a href="#event">event</a><br>
<a href="#get-user-sshkeys">get-user-sshkeys</a><br>
<a href="#guest-agent-timeout">guest-agent-timeout</a><br>
<a href="#guestinfo">guestinfo</a><br>
<a href="#guestvcpus">guestvcpus</a><br>
<a href="#iothreadadd">iothreadadd</a><br>
<a href="#iothreaddel">iothreaddel</a><br>
<a href="#iothreadinfo">iothreadinfo</a><br>
<a href="#iothreadpin">iothreadpin</a><br>
<a href="#iothreadset">iothreadset</a><br>
<a href="#managedsave">managedsave</a><br>
<a href="#managedsave-define">managedsave-define</a><br>
<a href="#managedsave-dumpxml">managedsave-dumpxml</a><br>
<a href="#managedsave-edit">managedsave-edit</a><br>
<a href="#managedsave-remove">managedsave-remove</a><br>
<a href="#maxvcpus">maxvcpus</a><br>
<a href="#memtune">memtune</a><br>
<a href="#metadata">metadata</a><br>
<a href="#migrate">migrate</a><br>
<a href="#migrate-compcache">migrate-compcache</a><br>
<a href="#migrate-getmaxdowntime">migrate-getmaxdowntime</a><br>
<a href="#migrate-getspeed">migrate-getspeed</a><br>
<a href="#migrate-postcopy">migrate-postcopy</a><br>
<a href="#migrate-setmaxdowntime">migrate-setmaxdowntime</a><br>
<a href="#migrate-setspeed">migrate-setspeed</a><br>
<a href="#numatune">numatune</a><br>
<a href="#perf">perf</a><br>
<a href="#reboot">reboot</a><br>
<a href="#reset">reset</a><br>
<a href="#restore">restore</a><br>
<a href="#resume">resume</a><br>
<a href="#save">save</a><br>
<a href="#save-image-define">save-image-define</a><br>
<a href="#save-image-dumpxml">save-image-dumpxml</a><br>
<a href="#save-image-edit">save-image-edit</a><br>
<a href="#schedinfo">schedinfo</a><br>
<a href="#screenshot">screenshot</a><br>
<a href="#send-key">send-key</a><br>
<a href="#send-process-signal">send-process-signal</a><br>
<a href="#set-lifecycle-action">set-lifecycle-action</a><br>
<a href="#set-user-password">set-user-password</a><br>
<a href="#set-user-sshkeys">set-user-sshkeys</a><br>
<a href="#setmaxmem">setmaxmem</a><br>
<a href="#setmem">setmem</a><br>
<a href="#setvcpus">setvcpus</a><br>
<a href="#setvcpu">setvcpu</a><br>
<a href="#shutdown">shutdown</a><br>
<a href="#start">start</a><br>
<a href="#suspend">suspend</a><br>
<a href="#ttyconsole">ttyconsole</a><br>
<a href="#undefine">undefine</a><br>
<a href="#vcpucount">vcpucount</a><br>
<a href="#vcpuinfo">vcpuinfo</a><br>
<a href="#vcpupin">vcpupin</a><br>
<a href="#vncdisplay">vncdisplay</a><br>
<a href="#DEVICE COMMANDS">DEVICE COMMANDS</a><br>
<a href="#attach-device">attach-device</a><br>
<a href="#attach-disk">attach-disk</a><br>
<a href="#attach-interface">attach-interface</a><br>
<a href="#detach-device">detach-device</a><br>
<a href="#detach-device-alias">detach-device-alias</a><br>
<a href="#detach-disk">detach-disk</a><br>
<a href="#detach-interface">detach-interface</a><br>
<a href="#update-device">update-device</a><br>
<a href="#update-memory-device">update-memory-device</a><br>
<a href="#change-media">change-media</a><br>
<a href="#dom-fd-associate">dom-fd-associate</a><br>
<a href="#NODEDEV COMMANDS">NODEDEV COMMANDS</a><br>
<a href="#nodedev-create">nodedev-create</a><br>
<a href="#nodedev-update">nodedev-update</a><br>
<a href="#nodedev-destroy">nodedev-destroy</a><br>
<a href="#nodedev-define">nodedev-define</a><br>
<a href="#nodedev-undefine">nodedev-undefine</a><br>
<a href="#nodedev-start">nodedev-start</a><br>
<a href="#nodedev-detach">nodedev-detach</a><br>
<a href="#nodedev-dumpxml">nodedev-dumpxml</a><br>
<a href="#nodedev-info">nodedev-info</a><br>
<a href="#nodedev-list">nodedev-list</a><br>
<a href="#nodedev-reattach">nodedev-reattach</a><br>
<a href="#nodedev-reset">nodedev-reset</a><br>
<a href="#nodedev-event">nodedev-event</a><br>
<a href="#nodedev-autostart">nodedev-autostart</a><br>
<a href="#VIRTUAL NETWORK COMMANDS">VIRTUAL NETWORK COMMANDS</a><br>
<a href="#net-autostart">net-autostart</a><br>
<a href="#net-create">net-create</a><br>
<a href="#net-define">net-define</a><br>
<a href="#net-desc">net-desc</a><br>
<a href="#net-destroy">net-destroy</a><br>
<a href="#net-dumpxml">net-dumpxml</a><br>
<a href="#net-edit">net-edit</a><br>
<a href="#net-event">net-event</a><br>
<a href="#net-info">net-info</a><br>
<a href="#net-list">net-list</a><br>
<a href="#net-metadata">net-metadata</a><br>
<a href="#net-name">net-name</a><br>
<a href="#net-start">net-start</a><br>
<a href="#net-undefine">net-undefine</a><br>
<a href="#net-uuid">net-uuid</a><br>
<a href="#net-update">net-update</a><br>
<a href="#net-dhcp-leases">net-dhcp-leases</a><br>
<a href="#NETWORK PORT COMMANDS">NETWORK PORT COMMANDS</a><br>
<a href="#net-port-list">net-port-list</a><br>
<a href="#net-port-create">net-port-create</a><br>
<a href="#net-port-dumpxml">net-port-dumpxml</a><br>
<a href="#net-port-delete">net-port-delete</a><br>
<a href="#INTERFACE COMMANDS">INTERFACE COMMANDS</a><br>
<a href="#iface-bridge">iface-bridge</a><br>
<a href="#iface-define">iface-define</a><br>
<a href="#iface-destroy">iface-destroy</a><br>
<a href="#iface-dumpxml">iface-dumpxml</a><br>
<a href="#iface-edit">iface-edit</a><br>
<a href="#iface-list">iface-list</a><br>
<a href="#iface-name">iface-name</a><br>
<a href="#iface-mac">iface-mac</a><br>
<a href="#iface-start">iface-start</a><br>
<a href="#iface-unbridge">iface-unbridge</a><br>
<a href="#iface-undefine">iface-undefine</a><br>
<a href="#iface-begin">iface-begin</a><br>
<a href="#iface-commit">iface-commit</a><br>
<a href="#iface-rollback">iface-rollback</a><br>
<a href="#STORAGE POOL COMMANDS">STORAGE POOL COMMANDS</a><br>
<a href="#find-storage-pool-sources">find-storage-pool-sources</a><br>
<a href="#find-pool-sources-as">find-pool-sources-as</a><br>
<a href="#pool-autostart">pool-autostart</a><br>
<a href="#pool-build">pool-build</a><br>
<a href="#pool-create">pool-create</a><br>
<a href="#pool-create-as">pool-create-as</a><br>
<a href="#pool-define">pool-define</a><br>
<a href="#pool-define-as">pool-define-as</a><br>
<a href="#pool-destroy">pool-destroy</a><br>
<a href="#pool-delete">pool-delete</a><br>
<a href="#pool-dumpxml">pool-dumpxml</a><br>
<a href="#pool-edit">pool-edit</a><br>
<a href="#pool-info">pool-info</a><br>
<a href="#pool-list">pool-list</a><br>
<a href="#pool-name">pool-name</a><br>
<a href="#pool-refresh">pool-refresh</a><br>
<a href="#pool-start">pool-start</a><br>
<a href="#pool-undefine">pool-undefine</a><br>
<a href="#pool-uuid">pool-uuid</a><br>
<a href="#pool-event">pool-event</a><br>
<a href="#VOLUME COMMANDS">VOLUME COMMANDS</a><br>
<a href="#vol-create">vol-create</a><br>
<a href="#vol-create-from">vol-create-from</a><br>
<a href="#vol-create-as">vol-create-as</a><br>
<a href="#vol-clone">vol-clone</a><br>
<a href="#vol-delete">vol-delete</a><br>
<a href="#vol-upload">vol-upload</a><br>
<a href="#vol-download">vol-download</a><br>
<a href="#vol-wipe">vol-wipe</a><br>
<a href="#vol-dumpxml">vol-dumpxml</a><br>
<a href="#vol-info">vol-info</a><br>
<a href="#vol-list">vol-list</a><br>
<a href="#vol-pool">vol-pool</a><br>
<a href="#vol-path">vol-path</a><br>
<a href="#vol-name">vol-name</a><br>
<a href="#vol-key">vol-key</a><br>
<a href="#vol-resize">vol-resize</a><br>
<a href="#SECRET COMMANDS">SECRET COMMANDS</a><br>
<a href="#secret-define">secret-define</a><br>
<a href="#secret-dumpxml">secret-dumpxml</a><br>
<a href="#secret-event">secret-event</a><br>
<a href="#secret-set-value">secret-set-value</a><br>
<a href="#secret-get-value">secret-get-value</a><br>
<a href="#secret-undefine">secret-undefine</a><br>
<a href="#secret-list">secret-list</a><br>
<a href="#SNAPSHOT COMMANDS">SNAPSHOT COMMANDS</a><br>
<a href="#snapshot-create">snapshot-create</a><br>
<a href="#snapshot-create-as">snapshot-create-as</a><br>
<a href="#snapshot-current">snapshot-current</a><br>
<a href="#snapshot-edit">snapshot-edit</a><br>
<a href="#snapshot-info">snapshot-info</a><br>
<a href="#snapshot-list">snapshot-list</a><br>
<a href="#snapshot-dumpxml">snapshot-dumpxml</a><br>
<a href="#snapshot-parent">snapshot-parent</a><br>
<a href="#snapshot-revert">snapshot-revert</a><br>
<a href="#snapshot-delete">snapshot-delete</a><br>
<a href="#CHECKPOINT COMMANDS">CHECKPOINT COMMANDS</a><br>
<a href="#checkpoint-create">checkpoint-create</a><br>
<a href="#checkpoint-create-as">checkpoint-create-as</a><br>
<a href="#checkpoint-edit">checkpoint-edit</a><br>
<a href="#checkpoint-info">checkpoint-info</a><br>
<a href="#checkpoint-list">checkpoint-list</a><br>
<a href="#checkpoint-dumpxml">checkpoint-dumpxml</a><br>
<a href="#checkpoint-parent">checkpoint-parent</a><br>
<a href="#checkpoint-delete">checkpoint-delete</a><br>
<a href="#NWFILTER COMMANDS">NWFILTER COMMANDS</a><br>
<a href="#nwfilter-define">nwfilter-define</a><br>
<a href="#nwfilter-undefine">nwfilter-undefine</a><br>
<a href="#nwfilter-list">nwfilter-list</a><br>
<a href="#nwfilter-dumpxml">nwfilter-dumpxml</a><br>
<a href="#nwfilter-edit">nwfilter-edit</a><br>
<a href="#NWFILTER BINDING COMMANDS">NWFILTER BINDING COMMANDS</a><br>
<a href="#nwfilter-binding-create">nwfilter-binding-create</a><br>
<a href="#nwfilter-binding-delete">nwfilter-binding-delete</a><br>
<a href="#nwfilter-binding-list">nwfilter-binding-list</a><br>
<a href="#nwfilter-binding-dumpxml">nwfilter-binding-dumpxml</a><br>
<a href="#HYPERVISOR-SPECIFIC COMMANDS">HYPERVISOR-SPECIFIC COMMANDS</a><br>
<a href="#qemu-attach">qemu-attach</a><br>
<a href="#qemu-monitor-command">qemu-monitor-command</a><br>
<a href="#qemu-agent-command">qemu-agent-command</a><br>
<a href="#qemu-monitor-event">qemu-monitor-event</a><br>
<a href="#lxc-enter-namespace">lxc-enter-namespace</a><br>
<a href="#ENVIRONMENT">ENVIRONMENT</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#AUTHORS">AUTHORS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#LICENSE">LICENSE</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">virsh -
management user interface</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em"><b>virsh</b>
[<i>OPTION</i>]... [<i>COMMAND_STRING</i>]</p>

<p style="margin-left:9%; margin-top: 1em"><b>virsh</b>
[<i>OPTION</i>]... <i>COMMAND</i> [<i>ARG</i>]...</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The <b>virsh</b>
program is the main interface for managing virsh guest
domains. The program can be used to create, pause, and
shutdown domains. It can also be used to list current
domains. Libvirt is a C toolkit to interact with the
virtualization capabilities of recent versions of Linux (and
other OSes). It is free software available under the GNU
Lesser General Public License. Virtualization of the Linux
Operating System means the ability to run multiple instances
of Operating Systems concurrently on a single hardware
system where the basic resources are driven by a Linux
instance. The library aims at providing a long term stable C
API. It currently supports Xen, QEMU, KVM, LXC, OpenVZ,
VirtualBox and VMware ESX.</p>

<p style="margin-left:9%; margin-top: 1em">The basic
structure of most virsh usage is:</p>

<p style="margin-left:13%; margin-top: 1em">virsh
[OPTION]... &lt;command&gt; &lt;domain&gt; [ARG]...</p>

<p style="margin-left:9%; margin-top: 1em">Where
<i>command</i> is one of the commands listed below;
<i>domain</i> is the numeric domain id, or the domain name,
or the domain UUID; and <i>ARGS</i> are command specific
options. There are a few exceptions to this rule in the
cases where the command in question acts on all domains, the
entire machine, or directly on the xen hypervisor. Those
exceptions will be clear for each of those commands. Note:
it is permissible to give numeric names to domains, however,
doing so will result in a domain that can only be identified
by domain id. In other words, if a numeric value is supplied
it will be interpreted as a domain id, not as a name. Any
<i>command</i> starting with <b>#</b> is treated as a
comment and silently ignored, all other unrecognized
<i>commands</i> are diagnosed.</p>

<p style="margin-left:9%; margin-top: 1em">The <b>virsh</b>
program can be used either to run one <i>COMMAND</i> by
giving the command and its arguments on the shell command
line, or a <i>COMMAND_STRING</i> which is a single shell
argument consisting of multiple <i>COMMAND</i> actions and
their arguments joined with whitespace and separated by
semicolons or newlines between commands, where unquoted
backslash-newline pairs are elided. Within
<i>COMMAND_STRING</i>, virsh understands the same single,
double, and backslash escapes as the shell, although you
must add another layer of shell escaping in creating the
single shell argument, and any word starting with unquoted
<i>#</i> begins a comment that ends at newline. If no
command is given in the command line, <b>virsh</b> will then
start a minimal interpreter waiting for your commands, and
the <b>quit</b> command will then exit the program.</p>

<p style="margin-left:9%; margin-top: 1em">The <b>virsh</b>
program understands the following <i>OPTIONS</i>.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-c</b>,
<b>--connect</b> <i>URI</i></p>

<p style="margin-left:9%; margin-top: 1em">Connect to the
specified <i>URI</i>, as if by the <b>connect</b> command,
instead of the default connection.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-d</b>,
<b>--debug</b> <i>LEVEL</i></p>

<p style="margin-left:9%; margin-top: 1em">Enable debug
messages at integer <i>LEVEL</i> and above. <i>LEVEL</i> can
range from 0 to 4 (default). See the documentation of
<b>VIRSH_DEBUG</b> environment variable below for the
description of each <i>LEVEL</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="24%">


<p><b>-e</b>, <b>--escape</b> <i>string</i></p></td>
<td width="64%">
</td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">Set alternative
escape sequence for <i>console</i> command. By default,
telnet's <b>&#710;]</b> is used. Allowed characters when
using hat notation are: alphabetic character, @, [, ], ,
&#710;, _.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="12%">


<p style="margin-top: 1em"><b>-h</b>, <b>--help</b></p></td>
<td width="76%">
</td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">Ignore all other
arguments, and behave as if the <b>help</b> command were
given instead.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="42%">


<p style="margin-top: 1em"><b>-k</b>,
<b>--keepalive-interval</b> <i>INTERVAL</i></p></td>
<td width="46%">
</td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">Set an
<i>INTERVAL</i> (in seconds) for sending keepalive messages
to check whether connection to the server is still alive.
Setting the interval to 0 disables client keepalive
mechanism.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="34%">


<p style="margin-top: 1em"><b>-K</b>,
<b>--keepalive-count</b> <i>COUNT</i></p></td>
<td width="54%">
</td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">Set a number of
times keepalive message can be sent without getting an
answer from the server without marking the connection dead.
There is no effect to this setting in case the
<i>INTERVAL</i> is set to 0.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="17%">


<p style="margin-top: 1em"><b>-l</b>, <b>--log</b>
<i>FILE</i></p> </td>
<td width="71%">
</td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">Output logging
details to <i>FILE</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="14%">


<p style="margin-top: 1em"><b>-q</b>, <b>--quiet</b></p></td>
<td width="74%">
</td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">Avoid extra
informational messages.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="17%">


<p style="margin-top: 1em"><b>-r</b>, <b>--readonly</b></p></td>
<td width="71%">
</td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">Make the initial
connection read-only, as if by the <i>--readonly</i> option
of the <b>connect</b> command.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="15%">


<p style="margin-top: 1em"><b>-t</b>, <b>--timing</b></p></td>
<td width="73%">
</td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">Output elapsed
time information for each command.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="26%">


<p style="margin-top: 1em"><b>-v</b>,
<b>--version[=short]</b></p> </td>
<td width="62%">
</td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">Ignore all other
arguments, and prints the version of the libvirt library
virsh is coming from</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="23%">


<p style="margin-top: 1em"><b>-V</b>,
<b>--version=long</b></p> </td>
<td width="65%">
</td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">Ignore all other
arguments, and prints the version of the libvirt library
virsh is coming from and which options and driver are
compiled in.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Most
<b>virsh</b> operations rely upon the libvirt library being
able to connect to an already running libvirtd service. This
can usually be done using the command <b>service libvirtd
start</b>.</p>

<p style="margin-left:9%; margin-top: 1em">Most
<b>virsh</b> commands require root privileges to run due to
the communications channels used to talk to the hypervisor.
Running as non root will return an error.</p>

<p style="margin-left:9%; margin-top: 1em">Most
<b>virsh</b> commands act synchronously, except maybe
shutdown, setvcpus and setmem. In those cases the fact that
the <b>virsh</b> program returned, may not mean the action
is complete and you must poll periodically to detect that
the guest completed the operation.</p>

<p style="margin-left:9%; margin-top: 1em"><b>virsh</b>
strives for backward compatibility. Although the <b>help</b>
command only lists the preferred usage of a command, if an
older version of <b>virsh</b> supported an alternate
spelling of a command or option (such as <i>--tunnelled</i>
instead of <i>--tunneled</i>), then scripts using that older
spelling will continue to work.</p>

<p style="margin-left:9%; margin-top: 1em">Several
<b>virsh</b> commands take an optionally scaled integer; if
no scale is provided, then the default is listed in the
command (for historical reasons, some commands default to
bytes, while other commands default to kibibytes). The
following case-insensitive suffixes can be used to select a
specific scale:</p>

<p style="margin-left:13%; margin-top: 1em">b, byte byte 1
<br>
KB kilobyte 1,000 <br>
k, KiB kibibyte 1,024 <br>
MB megabyte 1,000,000 <br>
M, MiB mebibyte 1,048,576 <br>
GB gigabyte 1,000,000,000 <br>
G, GiB gibibyte 1,073,741,824 <br>
TB terabyte 1,000,000,000,000 <br>
T, TiB tebibyte 1,099,511,627,776 <br>
PB petabyte 1,000,000,000,000,000 <br>
P, PiB pebibyte 1,125,899,906,842,624 <br>
EB exabyte 1,000,000,000,000,000,000 <br>
E, EiB exbibyte 1,152,921,504,606,846,976</p>

<h2>GENERIC COMMANDS
<a name="GENERIC COMMANDS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The following
commands are generic i.e. not specific to a domain.</p>

<h3>help
<a name="help"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">help
[command-or-group]</p>

<p style="margin-left:9%; margin-top: 1em">This lists each
of the virsh commands. When used without options, all
commands are listed, one per line, grouped into related
categories, displaying the keyword for each group.</p>

<p style="margin-left:9%; margin-top: 1em">To display only
commands for a specific group, give the keyword for that
group as an option. For example:</p>

<p style="margin-left:9%; margin-top: 1em"><b>Example
1:</b></p>

<p style="margin-left:13%; margin-top: 1em">virsh # help
host</p>

<p style="margin-left:13%; margin-top: 1em">Host and
Hypervisor (help keyword 'host'): <br>
capabilities capabilities <br>
cpu-models show the CPU models for an architecture <br>
connect (re)connect to hypervisor <br>
freecell NUMA free memory <br>
hostname print the hypervisor hostname <br>
qemu-attach Attach to existing QEMU process <br>
qemu-monitor-command QEMU Monitor Command <br>
qemu-agent-command QEMU Guest Agent Command <br>
sysinfo print the hypervisor sysinfo <br>
uri print the hypervisor canonical URI</p>

<p style="margin-left:9%; margin-top: 1em">To display
detailed information for a specific command, give its name
as the option instead. For example:</p>

<p style="margin-left:9%; margin-top: 1em"><b>Example
2:</b></p>

<p style="margin-left:13%; margin-top: 1em">virsh # help
list <br>
NAME <br>
list - list domains</p>

<p style="margin-left:13%; margin-top: 1em">SYNOPSIS <br>
list [--inactive] [--all]</p>

<p style="margin-left:13%; margin-top: 1em">DESCRIPTION
<br>
Returns list of domains.</p>

<p style="margin-left:13%; margin-top: 1em">OPTIONS <br>
--inactive list inactive domains <br>
--all list inactive &amp; active domains</p>

<h3>quit, exit
<a name="quit, exit"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">quit <br>
exit</p>

<p style="margin-left:9%; margin-top: 1em">quit this
interactive terminal</p>

<h3>version
<a name="version"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">version
[--daemon]</p>

<p style="margin-left:9%; margin-top: 1em">Will print out
the major version info about what this built from. If
<i>--daemon</i> is specified then the version of the libvirt
daemon is included in the output.</p>


<p style="margin-left:9%; margin-top: 1em"><b>Example:</b></p>

<p style="margin-left:13%; margin-top: 1em">$ virsh version
<br>
Compiled against library: libvirt 1.2.3 <br>
Using library: libvirt 1.2.3 <br>
Using API: QEMU 1.2.3 <br>
Running hypervisor: QEMU 2.0.50</p>

<p style="margin-left:13%; margin-top: 1em">$ virsh version
--daemon <br>
Compiled against library: libvirt 1.2.3 <br>
Using library: libvirt 1.2.3 <br>
Using API: QEMU 1.2.3 <br>
Running hypervisor: QEMU 2.0.50 <br>
Running against daemon: 1.2.6</p>

<h3>cd
<a name="cd"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">cd
[directory]</p>

<p style="margin-left:9%; margin-top: 1em">Will change
current directory to <i>directory</i>. The default directory
for the <b>cd</b> command is the home directory or, if there
is no <i>HOME</i> variable in the environment, the root
directory.</p>

<h3>pwd
<a name="pwd"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">pwd</p>

<p style="margin-left:9%; margin-top: 1em">Will print the
current directory.</p>

<h3>connect
<a name="connect"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">connect [URI]
[--readonly]</p>

<p style="margin-left:9%; margin-top: 1em">(Re)-Connect to
the hypervisor. When the shell is first started, this is
automatically run with the <i>URI</i> parameter requested by
the <b>-c</b> option on the command line. The <i>URI</i>
parameter specifies how to connect to the hypervisor. The
URI docs <br>
&lt;https://libvirt.org/uri.html&gt; list the values
supported, but the most common are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="16%">


<p style="margin-top: 1em">xen:///system</p></td>
<td width="72%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">this is used to
connect to the local Xen hypervisor</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="17%">


<p style="margin-top: 1em">qemu:///system</p></td>
<td width="71%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">connect locally
as root to the daemon supervising QEMU and KVM domains</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="19%">


<p style="margin-top: 1em">qemu:///session</p></td>
<td width="69%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">connect locally
as a normal user to his own set of QEMU and KVM domains</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="16%">


<p style="margin-top: 1em">lxc:///system</p></td>
<td width="72%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">connect to a
local linux container</p>

<p style="margin-left:9%; margin-top: 1em">To find the
currently used URI, check the <i>uri</i> command documented
below.</p>

<p style="margin-left:9%; margin-top: 1em">For remote
access see the URI docs <br>
&lt;https://libvirt.org/uri.html&gt; on how to make URIs.
The <i>--readonly</i> option allows for read-only
connection</p>

<h3>uri
<a name="uri"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">uri</p>

<p style="margin-left:9%; margin-top: 1em">Prints the
hypervisor canonical URI, can be useful in shell mode.</p>

<h3>hostname
<a name="hostname"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">hostname</p>

<p style="margin-left:9%; margin-top: 1em">Print the
hypervisor hostname.</p>

<h3>sysinfo
<a name="sysinfo"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">sysinfo</p>

<p style="margin-left:9%; margin-top: 1em">Print the XML
representation of the hypervisor sysinfo, if available.</p>

<h3>nodeinfo
<a name="nodeinfo"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">nodeinfo</p>

<p style="margin-left:9%; margin-top: 1em">Returns basic
information about the node, like number and type of CPU, and
size of the physical memory. The output corresponds to
virNodeInfo structure. Specifically, the &quot;CPU
socket(s)&quot; field means number of CPU sockets per NUMA
cell. The information libvirt displays is dependent upon
what each architecture may provide.</p>

<h3>nodecpumap
<a name="nodecpumap"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">nodecpumap
[--pretty]</p>

<p style="margin-left:9%; margin-top: 1em">Displays the
node's total number of CPUs, the number of online CPUs and
the list of online CPUs.</p>

<p style="margin-left:9%; margin-top: 1em">With
<i>--pretty</i> the online CPUs are printed as a range
instead of a list.</p>

<h3>nodecpustats
<a name="nodecpustats"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">nodecpustats
[cpu] [--percent]</p>

<p style="margin-left:9%; margin-top: 1em">Returns cpu
stats of the node. If <i>cpu</i> is specified, this will
print the specified cpu statistics only. If <i>--percent</i>
is specified, this will print the percentage of each kind of
cpu statistics during 1 second.</p>

<h3>nodememstats
<a name="nodememstats"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">nodememstats
[cell]</p>

<p style="margin-left:9%; margin-top: 1em">Returns memory
stats of the node. If <i>cell</i> is specified, this will
print the specified cell statistics only.</p>

<h3>nodesevinfo
<a name="nodesevinfo"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">nodesevinfo</p>

<p style="margin-left:9%; margin-top: 1em">Reports
information about the AMD SEV launch security features for
the node, if any. Some of this information is also reported
in the domain capabilities XML document.</p>

<h3>nodesuspend
<a name="nodesuspend"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">nodesuspend
[target] [duration]</p>

<p style="margin-left:9%; margin-top: 1em">Puts the node
(host machine) into a system-wide sleep state and schedule
the node's Real-Time-Clock interrupt to resume the node
after the time duration specified by <i>duration</i> is out.
<i>target</i> specifies the state to which the host will be
suspended to, it can be &quot;mem&quot; (suspend to RAM),
&quot;disk&quot; (suspend to disk), or &quot;hybrid&quot;
(suspend to both RAM and disk). <i>duration</i> specifies
the time duration in seconds for which the host has to be
suspended, it should be at least 60 seconds.</p>

<h3>node-memory-tune
<a name="node-memory-tune"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">node-memory-tune
[shm-pages-to-scan] [shm-sleep-millisecs]
[shm-merge-across-nodes]</p>

<p style="margin-left:9%; margin-top: 1em">Allows you to
display or set the node memory parameters.
<i>shm-pages-to-scan</i> can be used to set the number of
pages to scan before the shared memory service goes to
sleep; <i>shm-sleep-millisecs</i> can be used to set the
number of millisecs the shared memory service should sleep
before next scan; <i>shm-merge-across-nodes</i> specifies if
pages from different numa nodes can be merged. When set to
0, only pages which physically reside in the memory area of
same NUMA node can be merged. When set to 1, pages from all
nodes can be merged. Default to 1.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Note</b>:
Currently the &quot;shared memory service&quot; only means
KSM (Kernel Samepage Merging).</p>

<h3>capabilities
<a name="capabilities"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">capabilities
[--xpath EXPRESSION] [--wrap]</p>

<p style="margin-left:9%; margin-top: 1em">Print an XML
document describing the capabilities of the hypervisor we
are currently connected to. This includes a section on the
host capabilities in terms of CPU and features, and a set of
description for each kind of guest which can be virtualized.
For a more complete description see:</p>


<p style="margin-left:9%; margin-top: 1em">&lt;https://libvirt.org/formatcaps.html&gt;</p>

<p style="margin-left:9%; margin-top: 1em">The XML also
show the NUMA topology information if available.</p>

<p style="margin-left:9%; margin-top: 1em">If the
<b>--xpath</b> argument provides an XPath expression, it
will be evaluated against the output XML and only those
matching nodes will be printed. The default behaviour is to
print each matching node as a standalone document, however,
for ease of additional processing, the <b>--wrap</b>
argument will cause the matching node to be wrapped in a
common root node.</p>

<h3>domcapabilities
<a name="domcapabilities"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">domcapabilities
[virttype] [emulatorbin] [arch] [machine] <br>
[--xpath EXPRESSION] [--wrap] <br>
[--disable-deprecated-features]</p>

<p style="margin-left:9%; margin-top: 1em">Print an XML
document describing the domain capabilities for the
hypervisor we are connected to using information either
sourced from an existing domain or taken from the <b>virsh
capabilities</b> output. This may be useful if you intend to
create a new domain and are curious if for instance it could
make use of VFIO by creating a domain for the hypervisor
with a specific emulator and architecture.</p>

<p style="margin-left:9%; margin-top: 1em">Each hypervisor
will have different requirements regarding which options are
required and which are optional. A hypervisor can support
providing a default value for any of the options.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>virttype</i> option specifies the virtualization type
used. The value to be used is either from the 'type'
attribute of the &lt;domain/&gt; top level element from the
domain XML or the 'type' attribute found within each
&lt;guest/&gt; element from the <b>virsh capabilities</b>
output. The <i>emulatorbin</i> option specifies the path to
the emulator. The value to be used is either the
&lt;emulator&gt; element in the domain XML or the <b>virsh
capabilities</b> output. The <i>arch</i> option specifies
the architecture to be used for the domain. The value to be
used is either the &quot;arch&quot; attribute from the
domain's XML &lt;os/&gt; element and &lt;type/&gt;
subelement or the &quot;name&quot; attribute of an
&lt;arch/&gt; element from the <b>virsh capabililites</b>
output. The <i>machine</i> specifies the machine type for
the emulator. The value to be used is either the
&quot;machine&quot; attribute from the domain's XML
&lt;os/&gt; element and &lt;type/&gt; subelement or one from
a list of machines from the <b>virsh capabilities</b> output
for a specific architecture and domain type.</p>

<p style="margin-left:9%; margin-top: 1em">For the QEMU
hypervisor, a <i>virttype</i> of either 'qemu' or 'kvm' must
be supplied along with either the <i>emulatorbin</i> or
<i>arch</i> in order to generate output for the default
<i>machine</i>. Supplying a <i>machine</i> value will
generate output for the specific machine.</p>

<p style="margin-left:9%; margin-top: 1em">If the
<b>--xpath</b> argument provides an XPath expression, it
will be evaluated against the output XML and only those
matching nodes will be printed. The default behaviour is to
print each matching node as a standalone document, however,
for ease of additional processing, the <b>--wrap</b>
argument will cause the matching node to be wrapped in a
common root node.</p>

<p style="margin-left:9%; margin-top: 1em">The
<b>--disable-deprecated-features</b> argument will modify
the contents of host-model CPU XML, updating the features
list with any features flagged as deprecated for the CPU
model by the hypervisor. These features will be paired with
the &quot;disable&quot; policy.</p>

<h3>pool-capabilities
<a name="pool-capabilities"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">pool-capabilities</p>

<p style="margin-left:9%; margin-top: 1em">Print an XML
document describing the storage pool capabilities for the
connected storage driver. This may be useful if you intend
to create a new storage pool and need to know the available
pool types and supported storage pool source and target
volume formats as well as the required source elements to
create the pool.</p>

<h3>inject-nmi
<a name="inject-nmi"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">inject-nmi
domain</p>

<p style="margin-left:9%; margin-top: 1em">Inject NMI to
the guest.</p>

<h3>list
<a name="list"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">list
[--inactive | --all] <br>
[--managed-save] [--title] <br>
{ [--table] | --name | --id } [--uuid] <br>
[--persistent] [--transient] <br>
[--with-managed-save] [--without-managed-save] <br>
[--autostart] [--no-autostart] <br>
[--with-snapshot] [--without-snapshot] <br>
[--with-checkpoint] [--without-checkpoint] <br>
[--state-running] [--state-paused] <br>
[--state-shutoff] [--state-other]</p>

<p style="margin-left:9%; margin-top: 1em">Prints
information about existing domains. If no options are
specified it prints out information about running
domains.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Example
1:</b></p>

<p style="margin-left:9%; margin-top: 1em">An example
format for the list is as follows:</p>

<p style="margin-left:13%; margin-top: 1em">``virsh`` list
<br>
Id Name State <br>
---------------------------------------------------- <br>
0 Domain-0 running <br>
2 fedora paused</p>

<p style="margin-left:9%; margin-top: 1em">Name is the name
of the domain. ID the domain numeric id. State is the run
state (see below).</p>


<p style="margin-left:9%; margin-top: 1em"><b>STATES</b></p>

<p style="margin-left:9%; margin-top: 1em">The State field
lists what state each domain is currently in. A domain can
be in one of the following possible states:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>running</b></p></td>
<td width="79%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The domain is
currently running on a CPU</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="5%">


<p style="margin-top: 1em"><b>idle</b></p></td>
<td width="83%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The domain is
idle, and not running or runnable. This can be caused
because the domain is waiting on IO (a traditional wait
state) or has gone to sleep because there was nothing else
for it to do.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>paused</b></p></td>
<td width="81%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The domain has
been paused, usually occurring through the administrator
running <b>virsh suspend</b>. When in a paused state the
domain will still consume allocated resources like memory,
but will not be eligible for scheduling by the
hypervisor.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="14%">


<p style="margin-top: 1em"><b>in shutdown</b></p></td>
<td width="74%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The domain is
in the process of shutting down, i.e. the guest operating
system has been notified and should be in the process of
stopping its operations gracefully.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="10%">


<p style="margin-top: 1em"><b>shut off</b></p></td>
<td width="78%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The domain is
not running. Usually this indicates the domain has been shut
down completely, or has not been started.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>crashed</b></p></td>
<td width="79%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The domain has
crashed, which is always a violent ending. Usually this
state can only occur if the domain has been configured not
to restart on crash.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="14%">


<p style="margin-top: 1em"><b>pmsuspended</b></p></td>
<td width="74%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The domain has
been suspended by guest power management, e.g. entered into
s3 state.</p>

<p style="margin-left:9%; margin-top: 1em">Normally only
active domains are listed. To list inactive domains specify
<i>--inactive</i> or <i>--all</i> to list both active and
inactive domains.</p>


<p style="margin-left:9%; margin-top: 1em"><b>Filtering</b></p>

<p style="margin-left:9%; margin-top: 1em">To further
filter the list of domains you may specify one or more of
filtering flags supported by the <b>list</b> command. These
flags are grouped by function. Specifying one or more flags
from a group enables the filter group. Note that some
combinations of flags may yield no results. Supported
filtering flags and groups:</p>

<h3>Persistence
<a name="Persistence"></a>
</h3>


<p style="margin-left:9%; margin-top: 1em">Flag
<i>--persistent</i> is used to include persistent guests in
the returned list. To include transient guests specify
<i>--transient</i>.</p>

<h3>Existence of managed save image
<a name="Existence of managed save image"></a>
</h3>


<p style="margin-left:9%; margin-top: 1em">To list domains
having a managed save image specify flag
<i>--with-managed-save</i>. For domains that don't have a
managed save image specify
<i>--without-managed-save</i>.</p>

<h3>Domain state
<a name="Domain state"></a>
</h3>


<p style="margin-left:9%; margin-top: 1em">The following
filter flags select a domain by its state:
<i>--state-running</i> for running domains,
<i>--state-paused</i> for paused domains,
<i>--state-shutoff</i> for turned off domains and
<i>--state-other</i> for all other states as a fallback.</p>

<h3>Autostarting domains
<a name="Autostarting domains"></a>
</h3>


<p style="margin-left:9%; margin-top: 1em">To list
autostarting domains use the flag <i>--autostart</i>. To
list domains with this feature disabled use
<i>--no-autostart</i>.</p>

<h3>Snapshot existence
<a name="Snapshot existence"></a>
</h3>


<p style="margin-left:9%; margin-top: 1em">Domains that
have snapshot images can be listed using flag
<i>--with-snapshot</i>, domains without a snapshot
<i>--without-snapshot</i>.</p>

<h3>Checkpoint existence
<a name="Checkpoint existence"></a>
</h3>


<p style="margin-left:9%; margin-top: 1em">Domains that
have checkpoints can be listed using flag
<i>--with-checkpoint</i>, domains without a checkpoint
<i>--without-checkpoint</i>.</p>

<p style="margin-left:9%; margin-top: 1em">When talking to
older servers, this command is forced to use a series of API
calls with an inherent race, where a domain might not be
listed or might appear more than once if it changed state
between calls while the list was being collected. Newer
servers do not have this problem.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--managed-save</i> is specified, then domains that have
managed save state (only possible if they are in the <b>shut
off</b> state, so you need to specify <i>--inactive</i> or
<i>--all</i> to actually list them) will instead show as
<b>saved</b> in the listing. This flag is usable only with
the default <i>--table</i> output. Note that this flag does
not filter the list of domains.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--name</i>
is specified, domain names are printed instead of the table
formatted one per line. If <i>--uuid</i> is specified
domain's UUID's are printed instead of names. If <i>--id</i>
is specified then domain's ID's are printed indead of names.
However, it is possible to combine <i>--name</i>,
<i>--uuid</i> and <i>--id</i> to select only desired fields
for printing. Flag <i>--table</i> specifies that the legacy
table-formatted output should be used, but it is mutually
exclusive with <i>--name</i>, and <i>--id</i>. This is the
default and will be used if neither of <i>--name</i>,
<i>--uuid</i> or <i>--id</i> is specified. If neither
<i>--name</i> nor <i>--uuid</i> is specified, but
<i>--id</i> is, then only active domains are listed, even
with the <i>--all</i> parameter as otherwise the output
would just contain bunch of lines with just <i>-1</i>. If
<i>--table</i> is combined with <i>--uuid</i>, then domain
uuid is printed as an extra column.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--title</i> is specified, then the short domain
description (title) is printed in an extra column. This flag
is usable only with the default <i>--table</i> output.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Example
2:</b></p>

<p style="margin-left:13%; margin-top: 1em">$ virsh list
--title <br>
Id Name State Title <br>
------------------------------------------- <br>
0 Domain-0 running Mailserver 1 <br>
2 fedora paused</p>

<h3>freecell
<a name="freecell"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">freecell [{
[--cellno] cellno | --all }]</p>

<p style="margin-left:9%; margin-top: 1em">Prints the
available amount of memory on the machine or within a NUMA
cell. The freecell command can provide one of three
different displays of available memory on the machine
depending on the options specified. With no options, it
displays the total free memory on the machine. With the
--all option, it displays the free memory in each cell and
the total free memory on the machine. Finally, with a
numeric argument or with --cellno plus a cell number it will
display the free memory for the specified cell only.</p>

<h3>freepages
<a name="freepages"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">freepages [{
[--cellno] cellno [--pagesize] pagesize | --all }]</p>

<p style="margin-left:9%; margin-top: 1em">Prints the
available amount of pages within a NUMA cell. <i>cellno</i>
refers to the NUMA cell you're interested in.
<i>pagesize</i> is a scaled integer (see <b>NOTES</b>
above). Alternatively, if <i>--all</i> is used, info on each
possible combination of NUMA cell and page size is printed
out.</p>

<h3>allocpages
<a name="allocpages"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">allocpages
[--pagesize] pagesize [--pagecount] pagecount [[--cellno]
cellno] [--add] [--all]</p>

<p style="margin-left:9%; margin-top: 1em">Change the size
of pages pool of <i>pagesize</i> on the host. If
<i>--add</i> is specified, then <i>pagecount</i> pages are
added into the pool. However, if <i>--add</i> wasn't
specified, then the <i>pagecount</i> is taken as the new
absolute size of the pool (this may be used to free some
pages and size the pool down). The <i>cellno</i> modifier
can be used to narrow the modification down to a single host
NUMA cell. On the other end of spectrum lies <i>--all</i>
which executes the modification on all NUMA cells.</p>

<h3>cpu-baseline
<a name="cpu-baseline"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">cpu-baseline
FILE [--features] [--migratable]</p>

<p style="margin-left:9%; margin-top: 1em">Compute baseline
CPU which will be supported by all host CPUs given in
&lt;file&gt;. (See <b>hypervisor-cpu-baseline</b> command to
get a CPU which can be provided by a specific hypervisor.)
The list of host CPUs is built by extracting all &lt;cpu&gt;
elements from the &lt;file&gt;. Thus, the &lt;file&gt; can
contain either a set of &lt;cpu&gt; elements separated by
new lines or even a set of complete &lt;capabilities&gt;
elements printed by <b>capabilities</b> command. If
<i>--features</i> is specified, then the resulting XML
description will explicitly include all features that make
up the CPU, without this option features that are part of
the CPU model will not be listed in the XML description. If
<i>--migratable</i> is specified, features that block
migration will not be included in the resulting CPU.</p>

<h3>cpu-compare
<a name="cpu-compare"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">cpu-compare
FILE [--error] [--validate]</p>

<p style="margin-left:9%; margin-top: 1em">Compare CPU
definition from XML &lt;file&gt; with host CPU. (See
<b>hypervisor-cpu-compare</b> command for comparing the CPU
definition with the CPU which a specific hypervisor is able
to provide on the host.) The XML &lt;file&gt; may contain
either host or guest CPU definition. The host CPU definition
is the &lt;cpu&gt; element and its contents as printed by
<b>capabilities</b> command. The guest CPU definition is the
&lt;cpu&gt; element and its contents from domain XML
definition or the CPU definition created from the host CPU
model found in domain capabilities XML (printed by
<b>domcapabilities</b> command). In addition to the
&lt;cpu&gt; element itself, this command accepts full domain
XML, capabilities XML, or domain capabilities XML containing
the CPU definition. For more information on guest CPU
definition see:
https://libvirt.org/formatdomain.html#elementsCPU
&lt;https://libvirt.org/formatdomain.html#cpu-model-and-topology&gt;
. If <i>--error</i> is specified, the command will return an
error when the given CPU is incompatible with host CPU and a
message providing more details about the incompatibility
will be printed out. If <i>--validate</i> is specified,
validates the format of the XML document against an internal
RNG schema.</p>

<h3>cpu-models
<a name="cpu-models"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">cpu-models
arch</p>

<p style="margin-left:9%; margin-top: 1em">Print the list
of CPU models known by libvirt for the specified
architecture. Whether a specific hypervisor is able to
create a domain which uses any of the printed CPU models is
a separate question which can be answered by looking at the
domain capabilities XML returned by <b>domcapabilities</b>
command. Moreover, for some architectures libvirt does not
know any CPU models and the usable CPU models are only
limited by the hypervisor. This command will print that all
CPU models are accepted for these architectures and the
actual list of supported CPU models can be checked in the
domain capabilities XML.</p>

<h3>hypervisor-cpu-compare
<a name="hypervisor-cpu-compare"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">hypervisor-cpu-compare
FILE [virttype] [emulator] [arch] [machine] [--error]
[--validate]</p>

<p style="margin-left:9%; margin-top: 1em">Compare CPU
definition from XML &lt;file&gt; with the CPU the hypervisor
is able to provide on the host. (This is different from
<b>cpu-compare</b> which compares the CPU definition with
the host CPU without considering any specific hypervisor and
its abilities.)</p>

<p style="margin-left:9%; margin-top: 1em">The XML
<i>FILE</i> should contain a guest CPU definition: either
the <b>&lt;cpu&gt;</b> element and its contents from a
domain XML definition or a CPU definition created from the
host CPU model found in the <b>&lt;mode
name=&quot;host-model&quot;&gt;</b> element in the domain
capabilities XML (printed by the <b>domcapabilities</b>
command). The <b>&lt;mode
name=&quot;host-model&quot;&gt;</b> element itself or even
its <b>&lt;cpu&gt;</b> parent element found in domain
capabilities XML is not accepted. The element has to be
transformed into an actual CPU definition. For more
information on guest CPU definition see:
https://libvirt.org/formatdomain.html#elementsCPU
&lt;https://libvirt.org/formatdomain.html#cpu-model-and-topology&gt;
.</p>

<p style="margin-left:9%; margin-top: 1em">Alternatively
this command will automatically extract the CPU definition
when provided with a full domain or domain capabilities
XML.</p>

<p style="margin-left:9%; margin-top: 1em">For historical
reasons the XML <i>FILE</i> may also contain a host CPU
definition, but such usage is strongly discouraged as it
will most likely provide incorrect results.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>virttype</i> option specifies the virtualization type
(usable in the 'type' attribute of the &lt;domain&gt; top
level element from the domain XML). <i>emulator</i>
specifies the path to the emulator, <i>arch</i> specifies
the CPU architecture, and <i>machine</i> specifies the
machine type. If <i>--error</i> is specified, the command
will return an error when the given CPU is incompatible with
the host CPU and a message providing more details about the
incompatibility will be printed out. If <i>--validate</i> is
specified, validates the format of the XML document against
an internal RNG schema.</p>

<h3>hypervisor-cpu-baseline
<a name="hypervisor-cpu-baseline"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">hypervisor-cpu-baseline
[FILE] [virttype] [emulator] [arch] [machine] <br>
[--features] [--migratable] [model]</p>

<p style="margin-left:9%; margin-top: 1em">Compute a
baseline CPU which will be compatible with all CPUs defined
in an XML <i>file</i> and with the CPU the hypervisor is
able to provide on the host. (This is different from
<b>cpu-baseline</b> which does not consider any hypervisor
abilities when computing the baseline CPU.)</p>

<p style="margin-left:9%; margin-top: 1em">As an
alternative for <i>FILE</i> in case the XML would only
contain a CPU model with no additional features the CPU
model name itself can be passed as <i>model</i>. Exactly one
of <i>FILE</i> and <i>model</i> must be used.</p>

<p style="margin-left:9%; margin-top: 1em">The XML
<i>FILE</i> should contain guest CPU definitions created
from the host CPU model found in the <b>&lt;mode
name=&quot;host-model&quot;&gt;</b> element domain
capabilities XMLs (printed by the <b>domcapabilities</b>
command on each host). The <b>&lt;mode
name=&quot;host-model&quot;&gt;</b> elements themselves or
even their <b>&lt;cpu&gt;</b> parent elements found in
domain capabilities XMLs are not accepted. The elements have
to be transformed into actual CPU definitions.</p>

<p style="margin-left:9%; margin-top: 1em">Alternatively
this command will automatically extract the CPU definitions
when provided with domain capabilities XMLs.</p>

<p style="margin-left:9%; margin-top: 1em">For historical
reasons the XML <i>FILE</i> may also contain host CPU
definitions, but such usage is strongly discouraged as it
will most likely provide incorrect results.</p>

<p style="margin-left:9%; margin-top: 1em">When <i>FILE</i>
contains only a single CPU definition, the command will
print the same CPU with restrictions imposed by the
capabilities of the hypervisor. Specifically, running the
<b>virsh hypervisor-cpu-baseline</b> command with no
additional options on the result of <b>virsh
domcapabilities</b> will transform the host CPU model from
domain capabilities XML to a form directly usable in domain
XML. Running the command with <i>model</i> (or <i>FILE</i>
containing just a single CPU definition with model and no
feature elements) which is marked as unusable in <b>virsh
domcapabilities</b> will provide a list of features that
block this CPU model from being usable.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>virttype</i> option specifies the virtualization type
(usable in the 'type' attribute of the &lt;domain&gt; top
level element from the domain XML). <i>emulator</i>
specifies the path to the emulator, <i>arch</i> specifies
the CPU architecture, and <i>machine</i> specifies the
machine type. If <i>--features</i> is specified, then the
resulting XML description will explicitly include all
features that make up the CPU, without this option features
that are part of the CPU model will not be listed in the XML
description. If <i>--migratable</i> is specified, features
that block migration will not be included in the resulting
CPU.</p>

<h2>DOMAIN COMMANDS
<a name="DOMAIN COMMANDS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The following
commands manipulate domains directly, as stated previously
most commands take domain as the first parameter. The
<i>domain</i> can be specified as a short integer, a name or
a full UUID.</p>

<h3>autostart
<a name="autostart"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">autostart
[--disable] domain</p>

<p style="margin-left:9%; margin-top: 1em">Configure a
domain to be automatically started at boot.</p>

<p style="margin-left:9%; margin-top: 1em">The option
<i>--disable</i> disables autostarting.</p>

<h3>blkdeviotune
<a name="blkdeviotune"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">blkdeviotune
domain device [[--config] [--live] | [--current]] <br>
[[total-bytes-sec] | [read-bytes-sec] [write-bytes-sec]]
<br>
[[total-iops-sec] | [read-iops-sec] [write-iops-sec]] <br>
[[total-bytes-sec-max] | [read-bytes-sec-max]
[write-bytes-sec-max]] <br>
[[total-iops-sec-max] | [read-iops-sec-max]
[write-iops-sec-max]] <br>
[[total-bytes-sec-max-length] | <br>
[read-bytes-sec-max-length] [write-bytes-sec-max-length]]
<br>
[[total-iops-sec-max-length] | <br>
[read-iops-sec-max-length] [write-iops-sec-max-length]] <br>
[size-iops-sec] [group-name]</p>

<p style="margin-left:9%; margin-top: 1em">Set or query the
block disk io parameters for a block device of
<i>domain</i>. <i>device</i> specifies a unique target name
(&lt;target dev='name'/&gt;) or source file (&lt;source
file='name'/&gt;) for one of the disk devices attached to
<i>domain</i> (see also <b>domblklist</b> for listing these
names).</p>

<p style="margin-left:9%; margin-top: 1em">If no limit is
specified, it will query current I/O limits setting.
Otherwise, alter the limits with these flags:
<i>--total-bytes-sec</i> specifies total throughput limit as
a scaled integer, the default being bytes per second if no
suffix is specified. <i>--read-bytes-sec</i> specifies read
throughput limit as a scaled integer, the default being
bytes per second if no suffix is specified.
<i>--write-bytes-sec</i> specifies write throughput limit as
a scaled integer, the default being bytes per second if no
suffix is specified. <i>--total-iops-sec</i> specifies total
I/O operations limit per second. <i>--read-iops-sec</i>
specifies read I/O operations limit per second.
<i>--write-iops-sec</i> specifies write I/O operations limit
per second. <i>--total-bytes-sec-max</i> specifies maximum
total throughput limit as a scaled integer, the default
being bytes per second if no suffix is specified
<i>--read-bytes-sec-max</i> specifies maximum read
throughput limit as a scaled integer, the default being
bytes per second if no suffix is specified.
<i>--write-bytes-sec-max</i> specifies maximum write
throughput limit as a scaled integer, the default being
bytes per second if no suffix is specified.
<i>--total-iops-sec-max</i> specifies maximum total I/O
operations limit per second. <i>--read-iops-sec-max</i>
specifies maximum read I/O operations limit per second.
<i>--write-iops-sec-max</i> specifies maximum write I/O
operations limit per second.
<i>--total-bytes-sec-max-length</i> specifies duration in
seconds to allow maximum total throughput limit.
<i>--read-bytes-sec-max-length</i> specifies duration in
seconds to allow maximum read throughput limit.
<i>--write-bytes-sec-max-length</i> specifies duration in
seconds to allow maximum write throughput limit.
<i>--total-iops-sec-max-length</i> specifies duration in
seconds to allow maximum total I/O operations limit.
<i>--read-iops-sec-max-length</i> specifies duration in
seconds to allow maximum read I/O operations limit.
<i>--write-iops-sec-max-length</i> specifies duration in
seconds to allow maximum write I/O operations limit.
<i>--size-iops-sec</i> specifies size I/O operations limit
per second. <i>--group-name</i> specifies group name to
share I/O quota between multiple drives. For a QEMU domain,
if no name is provided, then the default is to have a single
group for each <i>device</i>.</p>

<p style="margin-left:9%; margin-top: 1em">Older versions
of virsh only accepted these options with underscore instead
of dash, as in <i>--total_bytes_sec</i>.</p>

<p style="margin-left:9%; margin-top: 1em">Bytes and iops
values are independent, but setting only one value (such as
--read-bytes-sec) resets the other two in that category to
unlimited. An explicit 0 also clears any limit. A non-zero
value for a given total cannot be mixed with non-zero values
for read or write.</p>

<p style="margin-left:9%; margin-top: 1em">It is up to the
hypervisor to determine how to handle the length values. For
the QEMU hypervisor, if an I/O limit value or maximum value
is set, then the default value of 1 second will be
displayed. Supplying a 0 will reset the value back to the
default.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, affect a running guest. If <i>--config</i> is
specified, affect the next start of a persistent guest. If
<i>--current</i> is specified, it is equivalent to either
<i>--live</i> or <i>--config</i>, depending on the current
state of the guest. When setting the disk io parameters both
<i>--live</i> and <i>--config</i> flags may be given, but
<i>--current</i> is exclusive. For querying only one of
<i>--live</i>, <i>--config</i> or <i>--current</i> can be
specified. If no flag is specified, behavior is different
depending on hypervisor.</p>

<h3>blkiotune
<a name="blkiotune"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">blkiotune
domain [--weight weight] [--device-weights device-weights]
<br>
[--device-read-iops-sec device-read-iops-sec] <br>
[--device-write-iops-sec device-write-iops-sec] <br>
[--device-read-bytes-sec device-read-bytes-sec] <br>
[--device-write-bytes-sec device-write-bytes-sec] <br>
[[--config] [--live] | [--current]]</p>

<p style="margin-left:9%; margin-top: 1em">Display or set
the blkio parameters. QEMU/KVM supports <i>--weight</i>.
<i>--weight</i> is in range [100, 1000]. After kernel
2.6.39, the value could be in the range [10, 1000].</p>


<p style="margin-left:9%; margin-top: 1em"><b>device-weights</b>
is a single string listing one or more device/weight pairs,
in the format of
/path/to/device,weight,/path/to/device,weight. Each weight
is in the range [100, 1000], [10, 1000] after kernel 2.6.39,
or the value 0 to remove that device from per-device
listings. Only the devices listed in the string are
modified; any existing per-device weights for other devices
remain unchanged.</p>


<p style="margin-left:9%; margin-top: 1em"><b>device-read-iops-sec</b>
is a single string listing one or more device/read_iops_sec
pairs, int the format of
/path/to/device,read_iops_sec,/path/to/device,read_iops_sec.
Each read_iops_sec is a number which type is unsigned int,
value 0 to remove that device from per-device listing. Only
the devices listed in the string are modified; any existing
per-device read_iops_sec for other devices remain
unchanged.</p>


<p style="margin-left:9%; margin-top: 1em"><b>device-write-iops-sec</b>
is a single string listing one or more device/write_iops_sec
pairs, int the format of
/path/to/device,write_iops_sec,/path/to/device,write_iops_sec.
Each write_iops_sec is a number which type is unsigned int,
value 0 to remove that device from per-device listing. Only
the devices listed in the string are modified; any existing
per-device write_iops_sec for other devices remain
unchanged.</p>


<p style="margin-left:9%; margin-top: 1em"><b>device-read-bytes-sec</b>
is a single string listing one or more device/read_bytes_sec
pairs, int the format of
/path/to/device,read_bytes_sec,/path/to/device,read_bytes_sec.
Each read_bytes_sec is a number which type is unsigned long
long, value 0 to remove that device from per-device listing.
Only the devices listed in the string are modified; any
existing per-device read_bytes_sec for other devices remain
unchanged.</p>


<p style="margin-left:9%; margin-top: 1em"><b>device-write-bytes-sec</b>
is a single string listing one or more
device/write_bytes_sec pairs, int the format of
/path/to/device,write_bytes_sec,/path/to/device,write_bytes_sec.
Each write_bytes_sec is a number which type is unsigned long
long, value 0 to remove that device from per-device listing.
Only the devices listed in the string are modified; any
existing per-device write_bytes_sec for other devices remain
unchanged.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, affect a running guest. If <i>--config</i> is
specified, affect the next start of a persistent guest. If
<i>--current</i> is specified, it is equivalent to either
<i>--live</i> or <i>--config</i>, depending on the current
state of the guest. Both <i>--live</i> and <i>--config</i>
flags may be given, but <i>--current</i> is exclusive. If no
flag is specified, behavior is different depending on
hypervisor.</p>

<h3>blockcommit
<a name="blockcommit"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">blockcommit
domain path [bandwidth] [--bytes] [base] <br>
[--shallow] [top] [--delete] [--keep-relative] <br>
[--wait [--async] [--verbose]] [--timeout seconds] <br>
[--active] [{--pivot | --keep-overlay}]</p>

<p style="margin-left:9%; margin-top: 1em">Reduce the
length of a backing image chain, by committing changes at
the top of the chain (snapshot or delta files) into backing
images. By default, this command attempts to flatten the
entire chain. If <i>base</i> and/or <i>top</i> are specified
as files within the backing chain, then the operation is
constrained to committing just that portion of the chain;
<i>--shallow</i> can be used instead of <i>base</i> to
specify the immediate backing file of the resulting top
image to be committed. The files being committed are
rendered invalid, possibly as soon as the operation starts;
using the <i>--delete</i> flag will attempt to remove these
invalidated files at the successful completion of the commit
operation. When the <i>--keep-relative</i> flag is used, the
backing file paths will be kept relative.</p>

<p style="margin-left:9%; margin-top: 1em">When <i>top</i>
is omitted or specified as the active image, it is also
possible to specify <i>--active</i> to trigger a two-phase
active commit. In the first phase, <i>top</i> is copied into
<i>base</i> and the job can only be canceled, with top still
containing data not yet in base. In the second phase,
<i>top</i> and <i>base</i> remain identical until a call to
<b>blockjob</b> with the <i>--abort</i> flag (keeping top as
the active image that tracks changes from that point in
time) or the <i>--pivot</i> flag (making base the new active
image and invalidating top).</p>

<p style="margin-left:9%; margin-top: 1em">By default, this
command returns as soon as possible, and data for the entire
disk is committed in the background; the progress of the
operation can be checked with <b>blockjob</b>. However, if
<i>--wait</i> is specified, then this command will block
until the operation completes (or for <i>--active</i>,
enters the second phase), or until the operation is canceled
because the optional <i>timeout</i> in seconds elapses or
SIGINT is sent (usually with <b>Ctrl-C</b>). Using
<i>--verbose</i> along with <i>--wait</i> will produce
periodic status updates. If job cancellation is triggered,
<i>--async</i> will return control to the user as fast as
possible, otherwise the command may continue to block a
little while longer until the job is done cleaning up. Using
<i>--pivot</i> is shorthand for combining <i>--active
--wait</i> with an automatic <b>blockjob</b> <i>--pivot</i>;
and using <i>--keep-overlay</i> is shorthand for combining
<i>--active --wait</i> with an automatic <b>blockjob</b>
<i>--abort</i>.</p>

<p style="margin-left:9%; margin-top: 1em"><i>path</i>
specifies fully-qualified path of the disk; it corresponds
to a unique target name (&lt;target dev='name'/&gt;) or
source file (&lt;source file='name'/&gt;) for one of the
disk devices attached to <i>domain</i> (see also
<b>domblklist</b> for listing these names). <i>bandwidth</i>
specifies copying bandwidth limit in MiB/s, although for
QEMU, it may be non-zero only for an online domain. For
further information on the <i>bandwidth</i> argument see the
corresponding section for the <b>blockjob</b> command.</p>

<h3>blockcopy
<a name="blockcopy"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">blockcopy
domain path { dest [format] [--blockdev] | --xml file } <br>
[--shallow] [--reuse-external] [bandwidth] <br>
[--wait [--async] [--verbose]] [{--pivot | --finish}] <br>
[--timeout seconds] [granularity] [buf-size] [--bytes] <br>
[--transient-job] [--synchronous-writes] [--print-xml]</p>

<p style="margin-left:9%; margin-top: 1em">Copy a disk
backing image chain to a destination. Either <i>dest</i> as
the destination file name, or <i>--xml</i> with the name of
an XML file containing a top-level &lt;disk&gt; element
describing the destination, must be present. Additionally,
if <i>dest</i> is given, <i>format</i> should be specified
to declare the format of the destination (if <i>format</i>
is omitted, then libvirt will reuse the format of the
source, or with <i>--reuse-external</i> will be forced to
probe the destination format, which could be a potential
security hole). The command supports <i>--raw</i> as a
boolean flag synonym for <i>--format=raw</i>. When using
<i>dest</i>, the destination is treated as a regular file
unless <i>--blockdev</i> is used to signal that it is a
block device. By default, this command flattens the entire
chain; but if <i>--shallow</i> is specified, the copy shares
the backing chain.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--reuse-external</i> is specified, then the destination
must exist and have sufficient space to hold the copy. If
<i>--shallow</i> is used in conjunction with
<i>--reuse-external</i> then the pre-created image must have
guest visible contents identical to guest visible contents
of the backing file of the original image. This may be used
to modify the backing file names on the destination.</p>

<p style="margin-left:9%; margin-top: 1em">By default, the
copy job runs in the background, and consists of two phases.
Initially, the job must copy all data from the source, and
during this phase, the job can only be canceled to revert
back to the source disk, with no guarantees about the
destination. After this phase completes, both the source and
the destination remain mirrored until a call to
<b>blockjob</b> with the <i>--abort</i> and <i>--pivot</i>
flags pivots over to the copy, or a call without
<i>--pivot</i> leaves the destination as a faithful copy of
that point in time. However, if <i>--wait</i> is specified,
then this command will block until the mirroring phase
begins, or cancel the operation if the optional
<i>timeout</i> in seconds elapses or SIGINT is sent (usually
with <b>Ctrl-C</b>). Using <i>--verbose</i> along with
<i>--wait</i> will produce periodic status updates. Using
<i>--pivot</i> (similar to <b>blockjob</b> <i>--pivot</i>)
or <i>--finish</i> (similar to <b>blockjob</b>
<i>--abort</i>) implies <i>--wait</i>, and will additionally
end the job cleanly rather than leaving things in the
mirroring phase. If job cancellation is triggered by timeout
or by <i>--finish</i>, <i>--async</i> will return control to
the user as fast as possible, otherwise the command may
continue to block a little while longer until the job has
actually cancelled.</p>

<p style="margin-left:9%; margin-top: 1em"><i>path</i>
specifies fully-qualified path of the disk. <i>bandwidth</i>
specifies copying bandwidth limit in MiB/s. Specifying a
negative value is interpreted as an unsigned long long value
that might be essentially unlimited, but more likely would
overflow; it is safer to use 0 for that purpose. For further
information on the <i>bandwidth</i> argument see the
corresponding section for the <b>blockjob</b> command.
Specifying <i>granularity</i> allows fine-tuning of the
granularity that will be copied when a dirty region is
detected; larger values trigger less I/O overhead but may
end up copying more data overall (the default value is
usually correct); hypervisors may restrict this to be a
power of two or fall within a certain range. Specifying
<i>buf-size</i> will control how much data can be
simultaneously in-flight during the copy; larger values use
more memory but may allow faster completion (the default
value is usually correct).</p>


<p style="margin-left:9%; margin-top: 1em"><i>--transient-job</i>
allows specifying that the user does not require the job to
be recovered if the VM crashes or is turned off before the
job completes. This flag removes the restriction of copy
jobs to transient domains if that restriction is applied by
the hypervisor.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--synchronous-writes</i> is specified the block job will
wait for guest writes to be propagated both to the original
image and to the destination of the copy so that it's
guaranteed that the job converges if the destination storage
is slower. This may impact performance of writes while the
blockjob is running.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--print-xml</i> is specified, then the XML used to start
the block copy job is printed instead of starting the
job.</p>

<h3>blockjob
<a name="blockjob"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">blockjob domain
path { [--abort] [--async] [--pivot] | <br>
[--info] [--raw] [--bytes] | [bandwidth] }</p>

<p style="margin-left:9%; margin-top: 1em">Manage active
block operations. There are three mutually-exclusive modes:
<i>--info</i>, <i>bandwidth</i>, and <i>--abort</i>.
<i>--async</i> and <i>--pivot</i> imply abort mode;
<i>--raw</i> implies info mode; and if no mode was given,
<i>--info</i> mode is assumed.</p>

<p style="margin-left:9%; margin-top: 1em"><i>path</i>
specifies fully-qualified path of the disk; it corresponds
to a unique target name (&lt;target dev='name'/&gt;) or
source file (&lt;source file='name'/&gt;) for one of the
disk devices attached to <i>domain</i> (see also
<b>domblklist</b> for listing these names).</p>

<p style="margin-left:9%; margin-top: 1em">In
<i>--abort</i> mode, the active job on the specified disk
will be aborted. If <i>--async</i> is also specified, this
command will return immediately, rather than waiting for the
cancellation to complete. If <i>--pivot</i> is specified,
this requests that an active copy or active commit job be
pivoted over to the new image.</p>

<p style="margin-left:9%; margin-top: 1em">In <i>--info</i>
mode, the active job information on the specified disk will
be printed. By default, the output is a single
human-readable summary line; this format may change in
future versions. Adding <i>--raw</i> lists each field of the
struct, in a stable format. If the <i>--bytes</i> flag is
set, then the command errors out if the server could not
supply bytes/s resolution; when omitting the flag, raw
output is listed in MiB/s and human-readable output
automatically selects the best resolution supported by the
server.</p>


<p style="margin-left:9%; margin-top: 1em"><i>bandwidth</i>
can be used to set bandwidth limit for the active job in
MiB/s. If <i>--bytes</i> is specified then the bandwidth
value is interpreted in bytes/s. Specifying a negative value
is interpreted as an unsigned long value or essentially
unlimited. The hypervisor can choose whether to reject the
value or convert it to the maximum value allowed. Optionally
a scaled positive number may be used as bandwidth (see
<b>NOTES</b> above). Using <i>--bytes</i> with a scaled
value permits a finer granularity to be selected. A scaled
value used without <i>--bytes</i> will be rounded down to
MiB/s. Note that the <i>--bytes</i> may be unsupported by
the hypervisor.</p>

<p style="margin-left:9%; margin-top: 1em">Note that the
progress reported for blockjobs corresponding to a pull-mode
backup don't report progress of the backup but rather usage
of temporary space required for the backup.</p>

<h3>blockpull
<a name="blockpull"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">blockpull
domain path [bandwidth] [--bytes] [base] <br>
[--wait [--verbose] [--timeout seconds] [--async]] <br>
[--keep-relative]</p>

<p style="margin-left:9%; margin-top: 1em">Populate a disk
from its backing image chain. By default, this command
flattens the entire chain; but if <i>base</i> is specified,
containing the name of one of the backing files in the
chain, then that file becomes the new backing file and only
the intermediate portion of the chain is pulled. Once all
requested data from the backing image chain has been pulled,
the disk no longer depends on that portion of the backing
chain.</p>

<p style="margin-left:9%; margin-top: 1em">By default, this
command returns as soon as possible, and data for the entire
disk is pulled in the background; the progress of the
operation can be checked with <b>blockjob</b>. However, if
<i>--wait</i> is specified, then this command will block
until the operation completes, or cancel the operation if
the optional <i>timeout</i> in seconds elapses or SIGINT is
sent (usually with <b>Ctrl-C</b>). Using <i>--verbose</i>
along with <i>--wait</i> will produce periodic status
updates. If job cancellation is triggered, <i>--async</i>
will return control to the user as fast as possible,
otherwise the command may continue to block a little while
longer until the job is done cleaning up.</p>

<p style="margin-left:9%; margin-top: 1em">Using the
<i>--keep-relative</i> flag will keep the backing chain
names relative.</p>

<p style="margin-left:9%; margin-top: 1em"><i>path</i>
specifies fully-qualified path of the disk; it corresponds
to a unique target name (&lt;target dev='name'/&gt;) or
source file (&lt;source file='name'/&gt;) for one of the
disk devices attached to <i>domain</i> (see also
<b>domblklist</b> for listing these names). <i>bandwidth</i>
specifies copying bandwidth limit in MiB/s. For further
information on the <i>bandwidth</i> argument see the
corresponding section for the <b>blockjob</b> command.</p>

<h3>blockresize
<a name="blockresize"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">blockresize
domain path ([size] | [--capacity])</p>

<p style="margin-left:9%; margin-top: 1em">Resize a block
device of domain while the domain is running, <i>path</i>
specifies the absolute path of the block device; it
corresponds to a unique target name (&lt;target
dev='name'/&gt;) or source file (&lt;source
file='name'/&gt;) for one of the disk devices attached to
<i>domain</i> (see also <b>domblklist</b> for listing these
names).</p>

<p style="margin-left:9%; margin-top: 1em">For image
formats without metadata (raw) stored inside fixed-size
storage (e.g. block devices) the --capacity flag can be used
to resize the device to the full size of the backing
device.</p>

<p style="margin-left:9%; margin-top: 1em"><i>size</i> is a
scaled integer (see <b>NOTES</b> above) which defaults to
KiB (blocks of 1024 bytes) if there is no suffix. You must
use a suffix of &quot;B&quot; to get bytes (note that for
historical reasons, this differs from <b>vol-resize</b>
which defaults to bytes without a suffix).</p>

<h3>console
<a name="console"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">console domain
[devname] [--safe] [--force] [--resume]</p>

<p style="margin-left:9%; margin-top: 1em">Connect the
virtual serial console for the guest. The optional
<i>devname</i> parameter refers to the device alias of an
alternate console, serial or parallel device configured for
the guest. If omitted, the primary console will be
opened.</p>

<p style="margin-left:9%; margin-top: 1em">If the flag
<i>--safe</i> is specified, the connection is only attempted
if the driver supports safe console handling. This flag
specifies that the server has to ensure exclusive access to
console devices. Optionally the <i>--force</i> flag may be
specified, requesting to disconnect any existing sessions,
such as in a case of a broken connection.</p>

<p style="margin-left:9%; margin-top: 1em">If the flag
<i>--resume</i> is specified then the guest is resumed after
connecting to the console.</p>

<h3>cpu-stats
<a name="cpu-stats"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">cpu-stats
domain [--total] [start] [count]</p>

<p style="margin-left:9%; margin-top: 1em">Provide cpu
statistics information of a domain. The domain should be
running. Default it shows stats for all CPUs, and a total.
Use <i>--total</i> for only the total stats, <i>start</i>
for only the per-cpu stats of the CPUs from <i>start</i>,
<i>count</i> for only <i>count</i> CPUs' stats.</p>

<h3>create
<a name="create"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">create FILE
[--console] [--paused] [--autodestroy] <br>
[--pass-fds N,M,...] [--validate] [--reset-nvram]</p>

<p style="margin-left:9%; margin-top: 1em">Create a domain
from an XML &lt;file&gt;. Optionally, <i>--validate</i>
option can be passed to validate the format of the input XML
file against an internal RNG schema (identical to using
virt-xml-validate(1) tool). Domains created using this
command are going to be either transient (temporary ones
that will vanish once destroyed) or existing persistent
guests that will run with one-time use configuration,
leaving the persistent XML untouched (this can come handy
during an automated testing of various configurations all
based on the original XML). See the example below for usage
demonstration.</p>

<p style="margin-left:9%; margin-top: 1em">The domain will
be paused if the <i>--paused</i> option is used and
supported by the driver; otherwise it will be running. If
<i>--console</i> is requested, attach to the console after
creation. If <i>--autodestroy</i> is requested, then the
guest will be automatically destroyed when virsh closes its
connection to libvirt, or otherwise exits.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--pass-fds</i> is specified, the argument is a comma
separated list of open file descriptors which should be pass
on into the guest. The file descriptors will be re-numbered
in the guest, starting from 3. This is only supported with
container based virtualization.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--reset-nvram</i> is specified, any existing NVRAM file
will be deleted and re-initialized from its pristine
template.</p>


<p style="margin-left:9%; margin-top: 1em"><b>Example:</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p style="margin-top: 1em">1.</p></td>
<td width="1%"></td>
<td width="87%">


<p style="margin-top: 1em">prepare a template from an
existing domain (skip directly to 3a if writing one from
scratch)</p> </td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em"># virsh dumpxml
&lt;domain&gt; &gt; domain.xml</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p style="margin-top: 1em">2.</p></td>
<td width="1%"></td>
<td width="68%">


<p style="margin-top: 1em">edit the template using an
editor of your choice and:</p></td>
<td width="19%">
</td></tr>
</table>

<p style="margin-left:13%;">a.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="13%"></td>
<td width="2%"></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">DO CHANGE! &lt;name&gt; and
&lt;uuid&gt; (&lt;uuid&gt; can also be removed), or</p></td>
<td width="5%">
</td></tr>
<tr valign="top" align="left">
<td width="13%"></td>
<td width="2%">


<p>b.</p></td>
<td width="2%"></td>
<td width="78%">


<p>DON'T CHANGE! either &lt;name&gt; or &lt;uuid&gt;</p></td>
<td width="5%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em"># $EDITOR
domain.xml</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p style="margin-top: 1em">3.</p></td>
<td width="1%"></td>
<td width="87%">


<p style="margin-top: 1em">create a domain from domain.xml,
depending on whether following 2a or 2b respectively:</p></td></tr>
</table>

<p style="margin-left:13%;">a.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="13%"></td>
<td width="2%"></td>
<td width="2%"></td>
<td width="83%">


<p style="margin-top: 1em">the domain is going to be
transient</p> </td></tr>
<tr valign="top" align="left">
<td width="13%"></td>
<td width="2%">


<p>b.</p></td>
<td width="2%"></td>
<td width="83%">


<p>an existing persistent guest will run with a modified
one-time configuration</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em"># virsh create
domain.xml</p>

<h3>define
<a name="define"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">define FILE
[--validate]</p>

<p style="margin-left:9%; margin-top: 1em">Define a domain
from an XML &lt;file&gt;. Optionally, the format of the
input XML file can be validated against an internal RNG
schema with <i>--validate</i> (identical to using
virt-xml-validate(1) tool). The domain definition is
registered but not started. If domain is already running,
the changes will take effect on the next boot.</p>

<h3>desc
<a name="desc"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">desc domain
[[--live] [--config] | <br>
[--current]] [--title] [--edit] [--new-desc <br>
New description or title message]</p>

<p style="margin-left:9%; margin-top: 1em">Show or modify
description and title of a domain. These values are user
fields that allow storing arbitrary textual data to allow
easy identification of domains. Title should be short,
although it's not enforced. (See also <b>metadata</b> that
works with XML based domain metadata.)</p>

<p style="margin-left:9%; margin-top: 1em">Flags
<i>--live</i> or <i>--config</i> select whether this command
works on live or persistent definitions of the domain. If
both <i>--live</i> and <i>--config</i> are specified, the
<i>--config</i> option takes precedence on getting the
current description and both live configuration and config
are updated while setting the description. <i>--current</i>
is exclusive and implied if none of these was specified.</p>

<p style="margin-left:9%; margin-top: 1em">Flag
<i>--edit</i> specifies that an editor with the contents of
current description or title should be opened and the
contents saved back afterwards.</p>

<p style="margin-left:9%; margin-top: 1em">Flag
<i>--title</i> selects operation on the title field instead
of description.</p>

<p style="margin-left:9%; margin-top: 1em">If neither of
<i>--edit</i> and <i>--new-desc</i> are specified the note
or description is displayed instead of being modified.</p>

<h3>destroy
<a name="destroy"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">destroy domain
[--graceful] [--remove-logs]</p>

<p style="margin-left:9%; margin-top: 1em">Immediately
terminate the domain <i>domain</i>. This doesn't give the
domain OS any chance to react, and it's the equivalent of
ripping the power cord out on a physical machine. In most
cases you will want to use the <b>shutdown</b> command
instead. However, this does not delete any storage volumes
used by the guest, and if the domain is persistent, it can
be restarted later.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>domain</i>
is transient, then the metadata of any snapshots will be
lost once the guest stops running, but the snapshot contents
still exist, and a new domain with the same name and UUID
can restore the snapshot metadata with
<b>snapshot-create</b>. Similarly, the metadata of any
checkpoints will be lost, but can be restored with
<b>checkpoint-create</b>.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--graceful</i> is specified, don't resort to extreme
measures (e.g. SIGKILL) when the guest doesn't stop after a
reasonable timeout; return an error instead.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--remove-logs</i> is specified, remove per <i>domain</i>
log files. Not all deployment configuration can be
supported.</p>

<p style="margin-left:9%; margin-top: 1em">In case of QEMU
the flag is only supported if virlogd is used to handle QEMU
process output. Otherwise the flag is ignored.</p>

<h3>domblkerror
<a name="domblkerror"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domblkerror
domain</p>

<p style="margin-left:9%; margin-top: 1em">Show errors on
block devices. This command usually comes handy when
<b>domstate</b> command says that a domain was paused due to
I/O error. The <b>domblkerror</b> command lists all block
devices in error state and the error seen on each of
them.</p>

<h3>domblkinfo
<a name="domblkinfo"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domblkinfo
domain [block-device --all] [--human]</p>

<p style="margin-left:9%; margin-top: 1em">Get block device
size info for a domain. A <i>block-device</i> corresponds to
a unique target name (&lt;target dev='name'/&gt;) or source
file (&lt;source file='name'/&gt;) for one of the disk
devices attached to <i>domain</i> (see also
<b>domblklist</b> for listing these names). If
<i>--human</i> is set, the output will have a human readable
output. If <i>--all</i> is set, the output will be a table
showing all block devices size info associated with
<i>domain</i>. The <i>--all</i> option takes precedence of
the others.</p>

<h3>domblklist
<a name="domblklist"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domblklist
domain [--inactive] [--details]</p>

<p style="margin-left:9%; margin-top: 1em">Print a table
showing the brief information of all block devices
associated with <i>domain</i>. If <i>--inactive</i> is
specified, query the block devices that will be used on the
next boot, rather than those currently in use by a running
domain. If <i>--details</i> is specified, disk type and
device value will also be printed. Other contexts that
require a block device name (such as <i>domblkinfo</i> or
<i>snapshot-create</i> for disk snapshots) will accept
either target or unique source names printed by this
command.</p>

<h3>domblkstat
<a name="domblkstat"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domblkstat
domain [block-device] [--human]</p>

<p style="margin-left:9%; margin-top: 1em">Get device block
stats for a running domain. A <i>block-device</i>
corresponds to a unique target name (&lt;target
dev='name'/&gt;) or source file (&lt;source
file='name'/&gt;) for one of the disk devices attached to
<i>domain</i> (see also <b>domblklist</b> for listing these
names). On a LXC or QEMU domain, omitting the
<i>block-device</i> yields device block stats summarily for
the entire domain.</p>

<p style="margin-left:9%; margin-top: 1em">Use
<i>--human</i> for a more human readable output.</p>

<p style="margin-left:9%; margin-top: 1em">Availability of
these fields depends on hypervisor. Unsupported fields are
missing from the output. Other fields may appear if
communicating with a newer version of libvirtd.</p>

<p style="margin-left:9%; margin-top: 1em">Explanation of
fields (fields appear in the following order):</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="73%">


<p style="margin-top: 1em">rd_req - count of read
operations</p> </td>
<td width="15%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="73%">


<p>rd_bytes - count of read bytes</p></td>
<td width="15%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="73%">


<p>wr_req - count of write operations</p></td>
<td width="15%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="73%">


<p>wr_bytes - count of written bytes</p></td>
<td width="15%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="73%">


<p>errs - error count</p></td>
<td width="15%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="73%">


<p>flush_operations - count of flush operations</p></td>
<td width="15%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="73%">


<p>rd_total_times - total time read operations took
(ns)</p> </td>
<td width="15%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="73%">


<p>wr_total_times - total time write operations took
(ns)</p> </td>
<td width="15%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="73%">


<p>flush_total_times - total time flush operations took
(ns)</p> </td>
<td width="15%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="73%">


<p>&lt;-- other fields provided by hypervisor --&gt;</p></td>
<td width="15%">
</td></tr>
</table>

<h3>domblkthreshold
<a name="domblkthreshold"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">domblkthreshold
domain dev threshold</p>

<p style="margin-left:9%; margin-top: 1em">Set the
threshold value for delivering the block-threshold event.
<i>dev</i> specifies the disk device target or backing chain
element of given device using the 'target[1]' syntax.
<i>threshold</i> is a scaled value of the offset. If the
block device should write beyond that offset the event will
be delivered.</p>

<h3>domcontrol
<a name="domcontrol"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domcontrol
domain</p>

<p style="margin-left:9%; margin-top: 1em">Returns state of
an interface to VMM used to control a domain. For states
other than &quot;ok&quot; or &quot;error&quot; the command
also prints number of seconds elapsed since the control
interface entered its current state.</p>

<h3>domdirtyrate-calc
<a name="domdirtyrate-calc"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">domdirtyrate-calc
&lt;domain&gt; [--seconds &lt;sec&gt;] <br>
--mode=[page-sampling | dirty-bitmap | dirty-ring]</p>

<p style="margin-left:9%; margin-top: 1em">Calculate an
active domain's memory dirty rate which may be expected by
user in order to decide whether it's proper to be migrated
out or not. The <b>seconds</b> parameter can be used to
calculate dirty rate in a specific time which allows 60s at
most now and would be default to 1s if missing. These three
<i>page-sampling, dirty-bitmap, dirty-ring</i> modes are
mutually exclusive and alternative when specify calculation
mode, <i>page-sampling</i> is the default mode if missing.
The calculated dirty rate information is available by
calling 'domstats --dirtyrate'.</p>

<h3>domdisplay
<a name="domdisplay"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domdisplay
domain [--include-password] [[--type] type] [--all]</p>

<p style="margin-left:9%; margin-top: 1em">Output a URI
which can be used to connect to the graphical display of the
domain via VNC, SPICE or RDP. The particular graphical
display type can be selected using the <b>type</b> parameter
(e.g. &quot;vnc&quot;, &quot;spice&quot;, &quot;rdp&quot;).
If <i>--include-password</i> is specified, the SPICE channel
password will be included in the URI. If <i>--all</i> is
specified, then all show all possible graphical displays,
for a VM could have more than one graphical displays.</p>

<h3>domdisplay-reload
<a name="domdisplay-reload"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">domdisplay-reload
&lt;domain&gt; [--type &lt;type&gt;]</p>

<p style="margin-left:9%; margin-top: 1em">Reload the
domain's graphical display. This reloads its TLS
certificates without restarting the domain. <b>type</b> can
be any constant from the <i>virDomainGraphicsReloadType</i>
enum. By default any supported type is reloaded (so far only
VNC).</p>

<h3>domfsfreeze
<a name="domfsfreeze"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domfsfreeze
domain [[--mountpoint] mountpoint...]</p>

<p style="margin-left:9%; margin-top: 1em">Freeze mounted
filesystems within a running domain to prepare for
consistent snapshots.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--mountpoint</i> option takes a parameter
<b>mountpoint</b>, which is a mount point path of the
filesystem to be frozen. This option can occur multiple
times. If this is not specified, every mounted filesystem is
frozen.</p>

<p style="margin-left:9%; margin-top: 1em">Note:
<b>snapshot-create</b> command has a <i>--quiesce</i> option
to freeze and thaw the filesystems automatically to keep
snapshots consistent. <b>domfsfreeze</b> command is only
needed when a user wants to utilize the native snapshot
features of storage devices not supported by libvirt.</p>

<h3>domfsinfo
<a name="domfsinfo"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domfsinfo
domain</p>

<p style="margin-left:9%; margin-top: 1em">Show a list of
mounted filesystems within the running domain. The list
contains mountpoints, names of a mounted device in the
guest, filesystem types, and unique target names used in the
domain XML (&lt;target dev='name'/&gt;).</p>

<p style="margin-left:9%; margin-top: 1em">Note that this
command requires a guest agent configured and running in the
domain's guest OS.</p>

<h3>domfsthaw
<a name="domfsthaw"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domfsthaw
domain [[--mountpoint] mountpoint...]</p>

<p style="margin-left:9%; margin-top: 1em">Thaw mounted
filesystems within a running domain, which have been frozen
by domfsfreeze command.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--mountpoint</i> option takes a parameter
<b>mountpoint</b>, which is a mount point path of the
filesystem to be thawed. This option can occur multiple
times. If this is not specified, every mounted filesystem is
thawed.</p>

<h3>domfstrim
<a name="domfstrim"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domfstrim
domain [--minimum bytes] [--mountpoint mountPoint]</p>

<p style="margin-left:9%; margin-top: 1em">Issue a fstrim
command on all mounted filesystems within a running domain.
It discards blocks which are not in use by the filesystem.
If <i>--minimum</i> <b>bytes</b> is specified, it tells
guest kernel length of contiguous free range. Smaller than
this may be ignored (this is a hint and the guest may not
respect it). By increasing this value, the fstrim operation
will complete more quickly for filesystems with badly
fragmented free space, although not all blocks will be
discarded. The default value is zero, meaning &quot;discard
every free block&quot;. Moreover, if a user wants to trim
only one mount point, it can be specified via optional
<i>--mountpoint</i> parameter.</p>

<h3>domhostname
<a name="domhostname"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domhostname
domain [--source lease|agent]</p>

<p style="margin-left:9%; margin-top: 1em">Returns the
hostname of a domain, if the hypervisor makes it
available.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--source</i> argument specifies what data source to use
for the hostnames, currently 'lease' to read DHCP leases or
'agent' to query the guest OS via an agent. If unspecified,
driver returns the default method available (some drivers
support only one type of source).</p>

<h3>domid
<a name="domid"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domid
domain-name-or-uuid</p>

<p style="margin-left:9%; margin-top: 1em">Convert a domain
name (or UUID) to a domain id</p>

<h3>domif-getlink
<a name="domif-getlink"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domif-getlink
domain interface-device [--config]</p>

<p style="margin-left:9%; margin-top: 1em">Query link state
of the domain's virtual interface. If <i>--config</i> is
specified, query the persistent configuration, for
compatibility purposes, <i>--persistent</i> is alias of
<i>--config</i>.</p>


<p style="margin-left:9%; margin-top: 1em"><i>interface-device</i>
can be the interface's target name or the MAC address.</p>

<h3>domif-setlink
<a name="domif-setlink"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domif-setlink
domain interface-device state [--config] [--print-xml]</p>

<p style="margin-left:9%; margin-top: 1em">Modify link
state of the domain's virtual interface. Possible values for
state are &quot;up&quot; and &quot;down&quot;. If
<i>--config</i> is specified, only the persistent
configuration of the domain is modified, for compatibility
purposes, <i>--persistent</i> is alias of <i>--config</i>.
<i>interface-device</i> can be the interface's target name
or the MAC address.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--print-xml</i> is specified, then the XML used to update
the interface is printed instead.</p>

<h3>domifaddr
<a name="domifaddr"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domifaddr
domain [interface] [--full] <br>
[--source lease|agent|arp]</p>

<p style="margin-left:9%; margin-top: 1em">Get a list of
interfaces of a running domain along with their IP and MAC
addresses, or limited output just for one interface if
<i>interface</i> is specified. Note that <i>interface</i>
can be driver dependent, it can be the name within guest OS
or the name you would see in domain XML. Moreover, the whole
command may require a guest agent to be configured for the
queried domain under some hypervisors, notably QEMU.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--full</i>
is specified, the interface name and MAC address is always
displayed when the interface has multiple IP addresses or
aliases; otherwise, only the interface name and MAC address
is displayed for the first name and MAC address with
&quot;-&quot; for the others using the same name and MAC
address.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--source</i> argument specifies what data source to use
for the addresses, currently 'lease' to read DHCP leases,
'agent' to query the guest OS via an agent, or 'arp' to get
IP from host's arp tables. If unspecified, 'lease' is the
default.</p>

<h3>backup-begin
<a name="backup-begin"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">backup-begin
domain [backupxml] [checkpointxml] [--reuse-external]</p>

<p style="margin-left:9%; margin-top: 1em">Begin a new
backup job. If <i>backupxml</i> is omitted, this defaults to
a full backup using a push model to filenames generated by
libvirt; supplying XML allows fine-tuning such as requesting
an incremental backup relative to an earlier checkpoint,
controlling which disks participate or which filenames are
involved, or requesting the use of a pull model backup. The
<i>backup-dumpxml</i> command shows any resulting values
assigned by libvirt. For more information on backup XML,
see: <br>
&lt;https://libvirt.org/formatbackup.html&gt;</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--reuse-external</i> is used it instructs libvirt to
reuse temporary and output files provided by the user in
<i>backupxml</i>.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>checkpointxml</i> is specified, a second file with a
top-level element of <i>domaincheckpoint</i> is used to
create a simultaneous checkpoint, for doing a later
incremental backup relative to the time the backup was
created. See <i>checkpoint-create</i> for more details on
checkpoints.</p>

<p style="margin-left:9%; margin-top: 1em">This command
returns as soon as possible, and the backup job runs in the
background; the progress of a push model backup can be
checked with <i>domjobinfo</i> or by waiting for an event
with <i>event</i> (the progress of a pull model backup is
under the control of whatever third party connects to the
NBD export). The job is ended with <i>domjobabort</i>.</p>

<h3>backup-dumpxml
<a name="backup-dumpxml"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">backup-dumpxml
[--xpath EXPRESSION] [--wrap] domain</p>

<p style="margin-left:9%; margin-top: 1em">Output XML
describing the current backup job.</p>

<p style="margin-left:9%; margin-top: 1em">If the
<b>--xpath</b> argument provides an XPath expression, it
will be evaluated against the output XML and only those
matching nodes will be printed. The default behaviour is to
print each matching node as a standalone document, however,
for ease of additional processing, the <b>--wrap</b>
argument will cause the matching node to be wrapped in a
common root node.</p>

<h3>domiflist
<a name="domiflist"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domiflist
domain [--inactive]</p>

<p style="margin-left:9%; margin-top: 1em">Print a table
showing the brief information of all virtual interfaces
associated with <i>domain</i>. If <i>--inactive</i> is
specified, query the virtual interfaces that will be used on
the next boot, rather than those currently in use by a
running domain. Other contexts that require a MAC address of
virtual interface (such as <i>detach-interface</i> or
<i>domif-setlink</i>) will accept the MAC address printed by
this command.</p>

<h3>domifstat
<a name="domifstat"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domifstat
domain interface-device</p>

<p style="margin-left:9%; margin-top: 1em">Get network
interface stats for a running domain. The network interface
stats are only available for interfaces that have a physical
source interface. This does not include, for example, a
'user' interface type since it is a virtual LAN with NAT to
the outside world. <i>interface-device</i> can be the
interface target by name or MAC address. Please note, for an
unmanaged <i>ethernet</i> type returned stats might have
RX/TX swapped.</p>

<h3>domiftune
<a name="domiftune"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domiftune
domain interface-device [[--config] [--live] | [--current]]
<br>
[*--inbound average,peak,burst,floor*] <br>
[*--outbound average,peak,burst*]</p>

<p style="margin-left:9%; margin-top: 1em">Set or query the
domain's network interface's bandwidth parameters.
<i>interface-device</i> can be the interface's target name
(&lt;target dev='name'/&gt;), or the MAC address.</p>

<p style="margin-left:9%; margin-top: 1em">If no
<i>--inbound</i> or <i>--outbound</i> is specified, this
command will query and show the bandwidth settings.
Otherwise, it will set the inbound or outbound bandwidth.
<i>average,peak,burst,floor</i> is the same as in command
<i>attach-interface</i>. Values for <i>average</i>,
<i>peak</i> and <i>floor</i> are expressed in kilobytes per
second, while <i>burst</i> is expressed in kilobytes in a
single burst at <i>peak</i> speed as described in the
Network XML documentation at <br>

&lt;https://libvirt.org/formatnetwork.html#quality-of-service&gt;
.</p>

<p style="margin-left:9%; margin-top: 1em">To clear inbound
or outbound settings, use <i>--inbound</i> or
<i>--outbound</i> respectfully with average value of
zero.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, affect a running guest. If <i>--config</i> is
specified, affect the next start of a persistent guest. If
<i>--current</i> is specified, it is equivalent to either
<i>--live</i> or <i>--config</i>, depending on the current
state of the guest. Both <i>--live</i> and <i>--config</i>
flags may be given, but <i>--current</i> is exclusive. If no
flag is specified, behavior is different depending on
hypervisor.</p>

<h3>dominfo
<a name="dominfo"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">dominfo
domain</p>

<p style="margin-left:9%; margin-top: 1em">Returns basic
information about the domain.</p>

<h3>domjobabort
<a name="domjobabort"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domjobabort
domain [--postcopy]</p>

<p style="margin-left:9%; margin-top: 1em">Abort the
currently running domain job.</p>

<p style="margin-left:9%; margin-top: 1em">When the job to
be aborted is a migration which entered post-copy mode, it
cannot be aborted as none of the hosts involved in migration
has a complete state of the domain. Optional
<i>--postcopy</i> can be used to interrupt such migration
although doing so may effectively suspend the domain until
the migration is resumed (see also <i>--postcopy-resume</i>
option of <b>migrate</b>).</p>

<h3>domjobinfo
<a name="domjobinfo"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domjobinfo
domain [--completed [--keep-completed]] [--anystats]
[--rawstats]</p>

<p style="margin-left:9%; margin-top: 1em">Returns
information about jobs running on a domain.
<i>--completed</i> tells virsh to return information about a
recently finished job. Statistics of a completed job are
automatically destroyed once read (unless
<i>--keep-completed</i> is used) or when libvirtd is
restarted.</p>

<p style="margin-left:9%; margin-top: 1em">Normally only
statistics for running and successful completed jobs are
printed. <i>--anystats</i> can be used to also display
statistics for failed jobs.</p>

<p style="margin-left:9%; margin-top: 1em">In case
<i>--rawstats</i> is used, all fields are printed as
received from the server without any attempts to interpret
the data. The &quot;Job type:&quot; field is special, since
it's reported by the API and not part of stats.</p>

<p style="margin-left:9%; margin-top: 1em">Note that time
information returned for completed migrations may be
completely irrelevant unless both source and destination
hosts have synchronized time (i.e., NTP daemon is running on
both of them).</p>

<h3>domlaunchsecinfo
<a name="domlaunchsecinfo"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">domlaunchsecinfo
domain</p>

<p style="margin-left:9%; margin-top: 1em">Returns
information about the launch security parameters associated
with a running domain.</p>

<p style="margin-left:9%; margin-top: 1em">The set of
parameters reported will vary depending on which type of
launch security protection is active. If none is active, no
parameters will be reported.</p>

<h3>domsetlaunchsecstate
<a name="domsetlaunchsecstate"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">domsetlaunchsecstate
domain --secrethdr hdr-filename <br>
--secret secret-filename [--set-address address]</p>

<p style="margin-left:9%; margin-top: 1em">Set a launch
security secret in the guest's memory. The guest must have a
launchSecurity type enabled in its configuration and be in a
paused state. On success, the guest can be transitioned to a
running state. On failure, the guest should be
destroyed.</p>


<p style="margin-left:9%; margin-top: 1em"><i>--secrethdr</i>
specifies a filename containing the base64-encoded secret
header. The header includes artifacts needed by the
hypervisor firmware to recover the plain text of the launch
secret. <i>--secret</i> specifies the filename containing
the base64-encoded encrypted launch secret.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--set-address</i> option can be used to specify a
physical address within the guest's memory to set the
secret. If not specified, the address will be determined by
the hypervisor.</p>

<h3>dommemstat
<a name="dommemstat"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">dommemstat
domain [--period seconds] [[--config] [--live] |
[--current]]</p>

<p style="margin-left:9%; margin-top: 1em">Get memory stats
for a running domain.</p>

<p style="margin-left:9%; margin-top: 1em">Availability of
these fields depends on hypervisor. Unsupported fields are
missing from the output. Other fields may appear if
communicating with a newer version of libvirtd.</p>

<p style="margin-left:9%; margin-top: 1em">Explanation of
fields:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p style="margin-top: 1em"><b>swap_in</b> - The amount of
data read from swap space (in KiB)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>swap_out</b> - The amount of memory written out to
swap space (in KiB)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>major_fault</b> - The number of page faults where
disk IO was required</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>minor_fault</b> - The number of other page faults</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>unused</b> - The amount of memory left unused by the
system (in KiB)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>available</b> - The amount of usable memory as seen
by the domain (in KiB)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>actual</b> - Current balloon value (in KiB)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>rss</b> - Resident Set Size of the running domain's
process (in KiB)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>usable</b> - The amount of memory which can be
reclaimed by balloon without causing host swapping (in
KiB)</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>last-update</b> - Timestamp of the last update of
statistics (in seconds)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>disk_caches</b> - The amount of memory that can be
reclaimed without additional I/O, typically disk caches (in
KiB)</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>hugetlb_pgalloc</b> - The number of successful huge
page allocations initiated from within the domain</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>hugetlb_pgfail</b> - The number of failed huge page
allocations initiated from within the domain</p></td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">For QEMU/KVM
with a memory balloon, setting the optional <i>--period</i>
to a value larger than 0 in seconds will allow the balloon
driver to return additional statistics which will be
displayed by subsequent <b>dommemstat</b> commands. Setting
the <i>--period</i> to 0 will stop the balloon driver
collection, but does not clear the statistics in the balloon
driver. Requires at least QEMU/KVM 1.5 to be running on the
host.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--live</i>, <i>--config</i>, and <i>--current</i> flags
are only valid when using the <i>--period</i> option in
order to set the collection period for the balloon driver.
If <i>--live</i> is specified, only the running guest
collection period is affected. If <i>--config</i> is
specified, affect the next start of a persistent guest. If
<i>--current</i> is specified, it is equivalent to either
<i>--live</i> or <i>--config</i>, depending on the current
state of the guest.</p>

<p style="margin-left:9%; margin-top: 1em">Both
<i>--live</i> and <i>--config</i> flags may be given, but
<i>--current</i> is exclusive. If no flag is specified,
behavior is different depending on the guest state.</p>

<h3>domname
<a name="domname"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domname
domain-id-or-uuid</p>

<p style="margin-left:9%; margin-top: 1em">Convert a domain
Id (or UUID) to domain name</p>

<h3>dompmsuspend
<a name="dompmsuspend"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">dompmsuspend
domain target [--duration]</p>

<p style="margin-left:9%; margin-top: 1em">Suspend a
running domain into one of these states (possible
<i>target</i> values):</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="62%">


<p style="margin-top: 1em"><b>mem</b> - equivalent of S3
ACPI state</p></td>
<td width="26%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="62%">


<p><b>disk</b> - equivalent of S4 ACPI state</p></td>
<td width="26%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="62%">


<p><b>hybrid</b> - RAM is saved to disk but not powered
off</p> </td>
<td width="26%">
</td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">The
<i>--duration</i> argument specifies number of seconds
before the domain is woken up after it was suspended (see
also <b>dompmwakeup</b>). Default is 0 for unlimited suspend
time. (This feature isn't currently supported by any
hypervisor driver and 0 should be used.).</p>

<p style="margin-left:9%; margin-top: 1em">Note that this
command requires a guest agent configured and running in the
domain's guest OS.</p>

<p style="margin-left:9%; margin-top: 1em">Beware that at
least for QEMU, the domain's process will be terminated when
target disk is used and a new process will be launched when
libvirt is asked to wake up the domain. As a result of this,
any runtime changes, such as device hotplug or memory
settings, are lost unless such changes were made with
<i>--config</i> flag.</p>

<h3>dompmwakeup
<a name="dompmwakeup"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">dompmwakeup
domain</p>

<p style="margin-left:9%; margin-top: 1em">Wakeup a domain
from pmsuspended state (either suspended by dompmsuspend or
from the guest itself). Injects a wakeup into the guest that
is in pmsuspended state, rather than waiting for the
previously requested duration (if any) to elapse. This
operation does not necessarily fail if the domain is
running.</p>

<h3>domrename
<a name="domrename"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domrename
domain new-name</p>

<p style="margin-left:9%; margin-top: 1em">Rename a domain.
This command changes current domain name to the new name
specified in the second argument.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Note</b>:
Domain must be inactive.</p>

<h3>domstate
<a name="domstate"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domstate domain
[--reason]</p>

<p style="margin-left:9%; margin-top: 1em">Returns state
about a domain. <i>--reason</i> tells virsh to also print
reason for the state.</p>

<h3>domstats
<a name="domstats"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domstats
[--raw] [--enforce] [--backing] [--nowait] [--state] <br>
[--cpu-total] [--balloon] [--vcpu] [--interface] <br>
[--block] [--perf] [--iothread] [--memory] [--dirtyrate]
[--vm] <br>
[[--list-active] [--list-inactive] <br>
[--list-persistent] [--list-transient] [--list-running]y
<br>
[--list-paused] [--list-shutoff] [--list-other]] | [domain
...]</p>

<p style="margin-left:9%; margin-top: 1em">Get statistics
for multiple or all domains. Without any argument this
command prints all available statistics for all domains.</p>

<p style="margin-left:9%; margin-top: 1em">The list of
domains to gather stats for can be either limited by listing
the domains as a space separated list, or by specifying one
of the filtering flags <i>--list-NNN</i>. (The approaches
can't be combined.)</p>

<p style="margin-left:9%; margin-top: 1em">By default some
of the returned fields may be converted to more human
friendly values by a set of pretty-printers. To suppress
this behavior use the <i>--raw</i> flag.</p>

<p style="margin-left:9%; margin-top: 1em">The individual
statistics groups are selectable via specific flags. By
default all supported statistics groups are returned.
Supported statistics groups flags are: <i>--state</i>,
<i>--cpu-total</i>, <i>--balloon</i>, <i>--vcpu</i>,
<i>--interface</i>, <i>--block</i>, <i>--perf</i>,
<i>--iothread</i>, <i>--memory</i>, <i>--dirtyrate</i>,
<i>--vm</i>.</p>

<p style="margin-left:9%; margin-top: 1em">Note that -
depending on the hypervisor type and version or the domain
state - not all of the following statistics may be
returned.</p>

<p style="margin-left:9%; margin-top: 1em">When selecting
the <i>--state</i> group the following fields are
returned:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p style="margin-top: 1em"><b>state.state</b> - state of
the VM, returned as number from virDomainState enum</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>state.reason</b> - reason for entering given state,
returned as int from virDomain*Reason enum corresponding to
given state</p></td></tr>
</table>


<p style="margin-left:9%; margin-top: 1em"><i>--cpu-total</i>
returns:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p style="margin-top: 1em"><b>cpu.time</b> - total cpu time
spent for this domain in nanoseconds</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>cpu.user</b> - user cpu time spent in nanoseconds</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>cpu.system</b> - system cpu time spent in
nanoseconds</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>cpu.haltpoll.success.time</b> - cpu halt polling
success time spent in nanoseconds</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>cpu.haltpoll.fail.time</b> - cpu halt polling fail
time spent in nanoseconds</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>cpu.cache.monitor.count</b> - the number of cache
monitors for this domain</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>cpu.cache.monitor.&lt;num&gt;.name</b> - the name of
cache monitor &lt;num&gt;</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>cpu.cache.monitor.&lt;num&gt;.vcpus</b> - vcpu list
of cache monitor &lt;num&gt;</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>cpu.cache.monitor.&lt;num&gt;.bank.count</b> - the
number of cache banks in cache monitor &lt;num&gt;</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">



<p><b>cpu.cache.monitor.&lt;num&gt;.bank.&lt;index&gt;.id</b>
- host allocated cache id for bank &lt;index&gt; in cache
monitor &lt;num&gt;</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">



<p><b>cpu.cache.monitor.&lt;num&gt;.bank.&lt;index&gt;.bytes</b>
- the number of bytes of last level cache that the domain is
using on cache bank &lt;index&gt;</p></td></tr>
</table>


<p style="margin-left:9%; margin-top: 1em"><i>--balloon</i>
returns:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p style="margin-top: 1em"><b>balloon.current</b> - the
memory in KiB currently used</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>balloon.maximum</b> - the maximum memory in KiB
allowed</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>balloon.swap_in</b> - the amount of data read from
swap space (in KiB)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>balloon.swap_out</b> - the amount of memory written
out to swap space (in KiB)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>balloon.major_fault</b> - the number of page faults
when disk IO was required</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>balloon.minor_fault</b> - the number of other page
faults</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>balloon.unused</b> - the amount of memory left unused
by the system (in KiB)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>balloon.available</b> - the amount of usable memory
as seen by the domain (in KiB)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>balloon.rss</b> - Resident Set Size of running
domain's process (in KiB)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>balloon.usable</b> - the amount of memory which can
be reclaimed by balloon without causing host swapping (in
KiB)</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>balloon.last-update</b> - timestamp of the last
update of statistics (in seconds)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>balloon.disk_caches</b> - the amount of memory that
can be reclaimed without additional I/O, typically disk (in
KiB)</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>balloon.hugetlb_pgalloc</b> - the number of
successful huge page allocations from inside the domain via
virtio balloon</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>balloon.hugetlb_pgfail</b> - the number of failed
huge page allocations from inside the domain via virtio
balloon</p> </td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em"><i>--vcpu</i>
returns:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p style="margin-top: 1em"><b>vcpu.current</b> - current
number of online virtual CPUs</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>vcpu.maximum</b> - maximum number of online virtual
CPUs</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>vcpu.&lt;num&gt;.state</b> - state of the virtual CPU
&lt;num&gt;, as number from virVcpuState enum</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>vcpu.&lt;num&gt;.time</b> - virtual cpu time spent by
virtual CPU &lt;num&gt; (in nanoseconds)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>vcpu.&lt;num&gt;.wait</b> - time the vCPU &lt;num&gt;
thread was waiting in the runqueue as the scheduler has
something else running ahead of it (in nanoseconds),
requires CONFIG_SCHED_INFO on Linux</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>vcpu.&lt;num&gt;.halted</b> - virtual CPU &lt;num&gt;
is halted: yes or no (may indicate the processor is idle or
even disabled, depending on the architecture)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>vcpu.&lt;num&gt;.delay</b> - time the vCPU
&lt;num&gt; thread was waiting in the runqueue as the
scheduler has something else running ahead of it (in
nanoseconds). Exposed to the VM as a steal time.</p></td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">This group of
statistics also reports additional hypervisor-originating
per-vCPU stats. The hypervisor-specific statistics in this
group have the following naming scheme:</p>


<p style="margin-left:13%;"><b>vcpu.&lt;num&gt;.$NAME.$TYPE</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="13%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>$NAME</b></p></td>
<td width="3%"></td>
<td width="70%">


<p style="margin-top: 1em">name of the statistics field
provided by the hypervisor</p></td>
<td width="8%">
</td></tr>
<tr valign="top" align="left">
<td width="13%"></td>
<td width="6%">


<p><b>$TYPE</b></p></td>
<td width="3%"></td>
<td width="70%">


<p>Type of the value. The following types are returned:</p></td>
<td width="8%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>cur</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%"></td>
<td width="5%"></td>
<td width="27%">


<p style="margin-top: 1em">current instant value</p></td>
<td width="42%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p><b>sum</b></p></td>
<td width="5%"></td>
<td width="27%">


<p>aggregate value</p></td>
<td width="42%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p><b>max</b></p></td>
<td width="5%"></td>
<td width="27%">


<p>peak value</p></td>
<td width="42%">
</td></tr>
</table>

<p style="margin-left:13%; margin-top: 1em">The returned
value may be either an unsigned long long or a boolean.
Meaning is hypervisor specific. Please see the disclaimer
for the <i>--vm</i> group which also consists of
hypervisor-specific stats.</p>


<p style="margin-left:9%; margin-top: 1em"><i>--interface</i>
returns:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="70%">


<p style="margin-top: 1em"><b>net.count</b> - number of
network interfaces on this domain</p></td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="70%">


<p><b>net.&lt;num&gt;.name</b> - name of the interface
&lt;num&gt;</p> </td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="70%">


<p><b>net.&lt;num&gt;.rx.bytes</b> - number of bytes
received</p> </td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="70%">


<p><b>net.&lt;num&gt;.rx.pkts</b> - number of packets
received</p> </td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="70%">


<p><b>net.&lt;num&gt;.rx.errs</b> - number of receive
errors</p> </td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="70%">


<p><b>net.&lt;num&gt;.rx.drop</b> - number of receive
packets dropped</p></td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="70%">


<p><b>net.&lt;num&gt;.tx.bytes</b> - number of bytes
transmitted</p> </td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="70%">


<p><b>net.&lt;num&gt;.tx.pkts</b> - number of packets
transmitted</p> </td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="70%">


<p><b>net.&lt;num&gt;.tx.errs</b> - number of transmission
errors</p> </td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="70%">


<p><b>net.&lt;num&gt;.tx.drop</b> - number of transmit
packets dropped</p></td>
<td width="18%">
</td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em"><i>--perf</i>
returns the statistics of all enabled perf events:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p style="margin-top: 1em"><b>perf.cmt</b> - the cache
usage in Byte currently used</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.mbmt</b> - total system bandwidth from one level
of cache</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.mbml</b> - bandwidth of memory traffic for a
memory controller</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.cpu_cycles</b> - the count of cpu cycles
(total/elapsed)</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.instructions</b> - the count of instructions</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.cache_references</b> - the count of cache
hits</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.cache_misses</b> - the count of caches
misses</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.branch_instructions</b> - the count of branch
instructions</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.branch_misses</b> - the count of branch
misses</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.bus_cycles</b> - the count of bus cycles</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.stalled_cycles_frontend</b> - the count of
stalled frontend cpu cycles</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.stalled_cycles_backend</b> - the count of
stalled backend cpu cycles</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.ref_cpu_cycles</b> - the count of ref cpu
cycles</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.cpu_clock</b> - the count of cpu clock time</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.task_clock</b> - the count of task clock
time</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.page_faults</b> - the count of page faults</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.context_switches</b> - the count of context
switches</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.cpu_migrations</b> - the count of cpu
migrations</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.page_faults_min</b> - the count of minor page
faults</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.page_faults_maj</b> - the count of major page
faults</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.alignment_faults</b> - the count of alignment
faults</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>perf.emulation_faults</b> - the count of emulation
faults</p> </td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">See the
<b>perf</b> command for more details about each event.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--block</i>
returns information about disks associated with each domain.
Using the <i>--backing</i> flag extends this information to
cover all resources in the backing chain, rather than the
default of limiting information to the active layer for each
guest disk. Information listed includes:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p style="margin-top: 1em"><b>block.count</b> - number of
block devices being listed</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>block.&lt;num&gt;.name</b> - name of the target of
the block device &lt;num&gt; (the same name for multiple
entries if <i>--backing</i> is present)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>block.&lt;num&gt;.backingIndex</b> - when
<i>--backing</i> is present, matches up with the
&lt;backingStore&gt; index listed in domain XML for backing
files</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>block.&lt;num&gt;.path</b> - file source of block
device &lt;num&gt;, if it is a local file or block
device</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>block.&lt;num&gt;.rd.reqs</b> - number of read
requests</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>block.&lt;num&gt;.rd.bytes</b> - number of read
bytes</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>block.&lt;num&gt;.rd.times</b> - total time (ns)
spent on reads</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>block.&lt;num&gt;.wr.reqs</b> - number of write
requests</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>block.&lt;num&gt;.wr.bytes</b> - number of written
bytes</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>block.&lt;num&gt;.wr.times</b> - total time (ns)
spent on writes</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>block.&lt;num&gt;.fl.reqs</b> - total flush
requests</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>block.&lt;num&gt;.fl.times</b> - total time (ns)
spent on cache flushing</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>block.&lt;num&gt;.errors</b> - Xen only: the 'oo_req'
value</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>block.&lt;num&gt;.allocation</b> - offset of highest
written sector in bytes</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>block.&lt;num&gt;.capacity</b> - logical size of
source file in bytes</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>block.&lt;num&gt;.physical</b> - physical size of
source file in bytes</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>block.&lt;num&gt;.threshold</b> - threshold (in
bytes) for delivering the
VIR_DOMAIN_EVENT_ID_BLOCK_THRESHOLD event. See
domblkthreshold.</p> </td></tr>
</table>


<p style="margin-left:9%; margin-top: 1em"><i>--iothread</i>
returns information about IOThreads on the running guest if
supported by the hypervisor.</p>

<p style="margin-left:9%; margin-top: 1em">The
&quot;poll-max-ns&quot; for each thread is the maximum
nanoseconds to allow each polling interval to occur. A
polling interval is a period of time allowed for a thread to
process data before being the guest gives up its CPU quantum
back to the host. A value set too small will not allow the
IOThread to run long enough on a CPU to process data. A
value set too high will consume too much CPU time per
IOThread failing to allow other threads running on the CPU
to get time. The polling interval is not available for
statistical purposes.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="90%">
</td></tr>
</table>


<p style="margin-left:12%; margin-top: 1em"><b>iothread.count
- maximum number of IOThreads in the subsequent list</b></p>

<p style="margin-left:21%;">as unsigned int. Each IOThread
in the list will will use it's iothread_id value as the
&lt;id&gt;. There may be fewer &lt;id&gt; entries than the
iothread.count value if the polling values are not
supported.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>iothread.&lt;id&gt;.poll-max-ns</b> - maximum polling
time in nanoseconds used by the &lt;id&gt; IOThread. A value
of 0 (zero) indicates polling is disabled.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>iothread.&lt;id&gt;.poll-grow</b> - polling time grow
value. A value of 0 (zero) growth is managed by the
hypervisor.</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>iothread.&lt;id&gt;.poll-shrink</b> - polling time
shrink value. A value of (zero) indicates shrink is managed
by hypervisor.</p></td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em"><i>--memory</i>
returns:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="88%">



<p style="margin-top: 1em"><b>memory.bandwidth.monitor.count</b>
- the number of memory bandwidth monitors for this
domain</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>memory.bandwidth.monitor.&lt;num&gt;.name</b> - the
name of monitor &lt;num&gt;</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>memory.bandwidth.monitor.&lt;num&gt;.vcpus</b> - the
vcpu list of monitor &lt;num&gt;</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">
</td></tr>
</table>


<p style="margin-left:12%; margin-top: 1em"><b>memory.bandwidth.monitor.&lt;num&gt;.node.count
- the number of memory</b></p>

<p style="margin-left:21%;">controller in monitor
&lt;num&gt;</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">



<p><b>memory.bandwidth.monitor.&lt;num&gt;.node.&lt;index&gt;.id</b>
- host allocated memory controller id for controller
&lt;index&gt; of monitor &lt;num&gt;</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">



<p><b>memory.bandwidth.monitor.&lt;num&gt;.node.&lt;index&gt;.bytes.local</b>
- the accumulative bytes consumed by @vcpus that passing
through the memory controller in the same processor that the
scheduled host CPU belongs to.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">



<p><b>memory.bandwidth.monitor.&lt;num&gt;.node.&lt;index&gt;.bytes.total</b>
- the total bytes consumed by @vcpus that passing through
all memory controllers, either local or remote
controller.</p> </td></tr>
</table>


<p style="margin-left:9%; margin-top: 1em"><i>--dirtyrate</i>
returns:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p style="margin-top: 1em"><b>dirtyrate.calc_status</b> -
the status of last memory dirty rate calculation, returned
as number from virDomainDirtyRateStatus enum.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>dirtyrate.calc_start_time</b> - the start time of
last memory dirty rate calculation.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>dirtyrate.calc_period</b> - the period of last memory
dirty rate calculation.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>dirtyrate.megabytes_per_second</b> - the calculated
memory dirty rate in MiB/s.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>dirtyrate.calc_mode</b> - the calculation mode used
last measurement
(<b>page-sampling</b>/<b>dirty-bitmap</b>/<b>dirty-ring</b>)</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>dirtyrate.vcpu.&lt;num&gt;.megabytes_per_second</b> -
the calculated memory dirty rate for a virtual cpu in
MiB/s</p> </td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em"><i>--vm</i>
returns:</p>

<p style="margin-left:9%; margin-top: 1em">The <i>--vm</i>
option enables reporting of hypervisor-specific statistics.
Naming and meaning of the fields is entirely hypervisor
dependent.</p>

<p style="margin-left:9%; margin-top: 1em">The statistics
in this group have the following naming scheme:</p>

<p style="margin-left:13%;"><b>vm.$NAME.$TYPE</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="13%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>$NAME</b></p></td>
<td width="3%"></td>
<td width="70%">


<p style="margin-top: 1em">name of the statistics field
provided by the hypervisor</p></td>
<td width="8%">
</td></tr>
<tr valign="top" align="left">
<td width="13%"></td>
<td width="6%">


<p><b>$TYPE</b></p></td>
<td width="3%"></td>
<td width="70%">


<p>Type of the value. The following types are returned:</p></td>
<td width="8%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>cur</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%"></td>
<td width="5%"></td>
<td width="27%">


<p style="margin-top: 1em">current instant value</p></td>
<td width="42%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p><b>sum</b></p></td>
<td width="5%"></td>
<td width="27%">


<p>aggregate value</p></td>
<td width="42%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p><b>max</b></p></td>
<td width="5%"></td>
<td width="27%">


<p>peak value</p></td>
<td width="42%">
</td></tr>
</table>

<p style="margin-left:13%; margin-top: 1em">The returned
value may be either an unsigned long long or a boolean.</p>


<p style="margin-left:13%; margin-top: 1em"><b>WARNING</b>:
The stats reported in this group are runtime-collected and
hypervisor originated, thus fall outside of the usual stable
API policies of libvirt.</p>

<p style="margin-left:13%; margin-top: 1em">Libvirt can't
guarantee that the statistics reported from the outside
source will be present in further versions of the
hypervisor, or that naming or meaning will stay consistent.
Changes to existing fields, however, are expected to be
rare.</p>

<p style="margin-left:9%; margin-top: 1em">Selecting a
specific statistics groups doesn't guarantee that the daemon
supports the selected group of stats. Flag <i>--enforce</i>
forces the command to fail if the daemon doesn't support the
selected group.</p>

<p style="margin-left:9%; margin-top: 1em">When collecting
stats libvirtd may wait for some time if there's already
another job running on given domain for it to finish. This
may cause unnecessary delay in delivering stats. Using
<i>--nowait</i> suppresses this behaviour. On the other hand
some statistics might be missing for such domain.</p>

<h3>domtime
<a name="domtime"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domtime domain
{ [--now] [--pretty] [--sync] [--time time] }</p>

<p style="margin-left:9%; margin-top: 1em">Gets or sets the
domain's system time. When run without any arguments (but
<i>domain</i>), the current domain's system time is printed
out. The <i>--pretty</i> modifier can be used to print the
time in more human readable form.</p>

<p style="margin-left:9%; margin-top: 1em">When
<i>--time</i> <b>time</b> is specified, the domain's time is
not gotten but set instead. The <i>--now</i> modifier acts
like if it was an alias for <i>--time</i> <b>$now</b>, which
means it sets the time that is currently on the host virsh
is running at. In both cases (setting and getting), time is
in seconds relative to Epoch of 1970-01-01 in UTC. The
<i>--sync</i> modifies the set behavior a bit: The time
passed is ignored, but the time to set is read from domain's
RTC instead. Please note, that some hypervisors may require
a guest agent to be configured in order to get or set the
guest time.</p>

<h3>domuuid
<a name="domuuid"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">domuuid
domain-name-or-id</p>

<p style="margin-left:9%; margin-top: 1em">Convert a domain
name or id to domain UUID</p>

<h3>domxml-from-native
<a name="domxml-from-native"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">domxml-from-native
format config</p>

<p style="margin-left:9%; margin-top: 1em">Convert the file
<i>config</i> in the native guest configuration format named
by <i>format</i> to a domain XML format. For QEMU/KVM
hypervisor, the <i>format</i> argument must be
<b>qemu-argv</b>. For Xen hypervisor, the <i>format</i>
argument may be <b>xen-xm</b>, <b>xen-xl</b>, or
<b>xen-sxpr</b>. For LXC hypervisor, the <i>format</i>
argument must be <b>lxc-tools</b>. For VMware/ESX
hypervisor, the <i>format</i> argument must be
<b>vmware-vmx</b>. For the Bhyve hypervisor, the
<i>format</i> argument must be <b>bhyve-argv</b>.</p>

<h3>domxml-to-native
<a name="domxml-to-native"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">domxml-to-native
format { [--xml] xml | --domain domain-name-or-id-or-uuid
}</p>

<p style="margin-left:9%; margin-top: 1em">Convert the file
<i>xml</i> into domain XML format or convert an existing
<i>--domain</i> to the native guest configuration format
named by <i>format</i>. The <i>xml</i> and <i>--domain</i>
arguments are mutually exclusive. For the types of
<i>format</i> argument, refer to
<b>domxml-from-native</b>.</p>

<h3>dump
<a name="dump"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">dump domain
corefilepath [--bypass-cache] <br>
{ [--live] | [--crash] | [--reset] } <br>
[--verbose] [--memory-only] [--format string]</p>

<p style="margin-left:9%; margin-top: 1em">Dumps the core
of a domain to a file for analysis. If <i>--live</i> is
specified, the domain continues to run until the core dump
is complete, rather than pausing up front. If <i>--crash</i>
is specified, the domain is halted with a crashed status,
rather than merely left in a paused state. If <i>--reset</i>
is specified, the domain is reset after successful dump.
Note, these three switches are mutually exclusive. If
<i>--bypass-cache</i> is specified, the save will avoid the
file system cache, although this may slow down the
operation. If <i>--memory-only</i> is specified, the file is
elf file, and will only include domain's memory and cpu
common register value. It is very useful if the domain uses
host devices directly. <i>--format string</i> is used to
specify the format of 'memory-only' dump, and <i>string</i>
can be one of: elf, kdump-zlib(kdump-compressed format with
zlib-compressed), kdump-lzo(kdump-compressed format with
lzo-compressed), kdump-snappy(kdump-compressed format with
snappy-compressed), win-dmp(Windows full crashdump
format).</p>

<p style="margin-left:9%; margin-top: 1em">The progress may
be monitored using <b>domjobinfo</b> virsh command and
canceled with <b>domjobabort</b> command (sent by another
virsh instance). Another option is to send SIGINT (usually
with <b>Ctrl-C</b>) to the virsh process running <b>dump</b>
command. <i>--verbose</i> displays the progress of dump.</p>

<p style="margin-left:9%; margin-top: 1em">NOTE: Some
hypervisors may require the user to manually ensure proper
permissions on file and path specified by argument
<i>corefilepath</i>.</p>

<p style="margin-left:9%; margin-top: 1em">NOTE: Crash dump
in a old kvmdump format is being obsolete and cannot be
loaded and processed by crash utility since its version
6.1.0. A --memory-only option is required in order to
produce valid ELF file which can be later processed by the
crash utility.</p>

<h3>dumpxml
<a name="dumpxml"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">dumpxml
[--inactive] [--security-info] [--update-cpu] [--migratable]
<br>
[--xpath EXPRESSION] [--wrap] domain</p>

<p style="margin-left:9%; margin-top: 1em">Output the
domain information as an XML dump to stdout, this format can
be used by the <b>create</b> command. Additional options
affecting the XML dump may be used. <i>--inactive</i> tells
virsh to dump domain configuration that will be used on next
start of the domain as opposed to the current domain
configuration. Using <i>--security-info</i> will also
include security sensitive information in the XML dump.
<i>--update-cpu</i> updates domain CPU requirements
according to host CPU. With <i>--migratable</i> one can
request an XML that is suitable for migrations, i.e.,
compatible with older libvirt releases and possibly amended
with internal run-time options. This option may
automatically enable other options (<i>--update-cpu</i>,
<i>--security-info</i>, ...) as necessary.</p>

<p style="margin-left:9%; margin-top: 1em">If the
<b>--xpath</b> argument provides an XPath expression, it
will be evaluated against the output XML and only those
matching nodes will be printed. The default behaviour is to
print each matching node as a standalone document, however,
for ease of additional processing, the <b>--wrap</b>
argument will cause the matching node to be wrapped in a
common root node.</p>

<h3>edit
<a name="edit"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">edit domain</p>

<p style="margin-left:9%; margin-top: 1em">Edit the XML
configuration file for a domain, which will affect the next
boot of the guest.</p>

<p style="margin-left:9%; margin-top: 1em">This is
equivalent to:</p>

<p style="margin-left:13%; margin-top: 1em">virsh dumpxml
--inactive --security-info domain &gt; domain.xml <br>
vi domain.xml (or make changes with your other text editor)
<br>
virsh define domain.xml</p>

<p style="margin-left:9%; margin-top: 1em">except that it
does some error checking.</p>

<p style="margin-left:9%; margin-top: 1em">The editor used
can be supplied by the <b>$VISUAL</b> or <b>$EDITOR</b>
environment variables, and defaults to <b>vi</b>.</p>

<h3>emulatorpin
<a name="emulatorpin"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">emulatorpin
domain [cpulist] [[--live] [--config] | [--current]]</p>

<p style="margin-left:9%; margin-top: 1em">Query or change
the pinning of domain's emulator threads to host physical
CPUs.</p>

<p style="margin-left:9%; margin-top: 1em">See
<b>vcpupin</b> for <i>cpulist</i>.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, affect a running guest. If <i>--config</i> is
specified, affect the next start of a persistent guest. If
<i>--current</i> is specified, it is equivalent to either
<i>--live</i> or <i>--config</i>, depending on the current
state of the guest. Both <i>--live</i> and <i>--config</i>
flags may be given if <i>cpulist</i> is present, but
<i>--current</i> is exclusive. If no flag is specified,
behavior is different depending on hypervisor.</p>

<h3>event
<a name="event"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">event {[domain]
{ event | --all } [--loop] [--timeout seconds] [--timestamp]
| --list}</p>

<p style="margin-left:9%; margin-top: 1em">Wait for a class
of domain events to occur, and print appropriate details of
events as they happen. The events can optionally be filtered
by <i>domain</i>. Using <i>--list</i> as the only argument
will provide a list of possible <i>event</i> values known by
this client, although the connection might not allow
registering for all these events. It is also possible to use
<i>--all</i> instead of <i>event</i> to register for all
possible event types at once.</p>

<p style="margin-left:9%; margin-top: 1em">By default, this
command is one-shot, and returns success once an event
occurs; you can send SIGINT (usually via <b>Ctrl-C</b>) to
quit immediately. If <i>--timeout</i> is specified, the
command gives up waiting for events after <i>seconds</i>
have elapsed. With <i>--loop</i>, the command prints all
events until a timeout or interrupt key.</p>

<p style="margin-left:9%; margin-top: 1em">When
<i>--timestamp</i> is used, a human-readable timestamp will
be printed before the event.</p>

<h3>get-user-sshkeys
<a name="get-user-sshkeys"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">get-user-sshkeys
domain user</p>

<p style="margin-left:9%; margin-top: 1em">Print SSH
authorized keys for given <i>user</i> in the guest
<i>domain</i>. Please note, that an entry in the file has
internal structure as defined by <i>sshd(8)</i> and
virsh/libvirt does handle keys as opaque strings, i.e. does
not interpret them.</p>

<h3>guest-agent-timeout
<a name="guest-agent-timeout"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">guest-agent-timeout
domain [--timeout value]</p>

<p style="margin-left:9%; margin-top: 1em">Set how long to
wait for a response from guest agent commands. By default,
agent commands block forever waiting for a response.
<b>value</b> must be a positive value (wait for given amount
of seconds) or one of the following values:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p style="margin-top: 1em">-2 - block forever waiting for a
result (used when --timeout is omitted),</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p>-1 - reset timeout to the default value (currently
defined as 5 seconds in libvirt daemon),</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p>0 - do not wait at all,</p></td></tr>
</table>

<h3>guestinfo
<a name="guestinfo"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">guestinfo
domain [--user] [--os] [--timezone] [--hostname]
[--filesystem] <br>
[--disk] [--interface]</p>

<p style="margin-left:9%; margin-top: 1em">Print
information about the guest from the point of view of the
guest agent. Note that this command requires a guest agent
to be configured and running in the domain's guest OS.</p>

<p style="margin-left:9%; margin-top: 1em">When run without
any arguments, this command prints all information types
that are supported by the guest agent at that point,
omitting unavailable ones. Success is always reported in
this case.</p>

<p style="margin-left:9%; margin-top: 1em">You can limit
the types of information that are returned by specifying one
or more flags. Available information types flags are
<i>--user</i>, <i>--os</i>, <i>--timezone</i>,
<i>--hostname</i>, <i>--filesystem</i>, <i>--disk</i> and
<i>--interface</i>. If an explicitly requested information
type is not supported by the guest agent at that point, the
processes will provide an exit code of 1.</p>

<p style="margin-left:9%; margin-top: 1em">Note that
depending on the hypervisor type and the version of the
guest agent running within the domain, not all of the
following information may be returned.</p>

<p style="margin-left:9%; margin-top: 1em">When selecting
the <i>--user</i> information type, the following fields may
be returned:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p style="margin-top: 1em"><b>user.count</b> - the number
of active users on this domain</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>user.&lt;num&gt;.name</b> - username of user
&lt;num&gt;</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>user.&lt;num&gt;.domain</b> - domain of the user
&lt;num&gt; (may only be present on certain guets types)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>user.&lt;num&gt;.login-time</b> - the login time of
user &lt;num&gt; in milliseconds since the epoch</p></td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em"><i>--os</i>
returns:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p style="margin-top: 1em"><b>os.id</b> - a string
identifying the operating system</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>os.name</b> - the name of the operating system</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>os.pretty-name</b> - a pretty name for the operating
system</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>os.version</b> - the version of the operating
system</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>os.version-id</b> - the version id of the operating
system</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>os.kernel-release</b> - the release of the operating
system kernel</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>os.kernel-version</b> - the version of the operating
system kernel</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>os.machine</b> - the machine hardware name</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>os.variant</b> - a specific variant or edition of the
operating system</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>os.variant-id</b> - the id for a specific variant or
edition of the operating system</p></td></tr>
</table>


<p style="margin-left:9%; margin-top: 1em"><i>--timezone</i>
returns:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="59%">


<p style="margin-top: 1em"><b>timezone.name</b> - the name
of the timezone</p></td>
<td width="29%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="59%">


<p><b>timezone.offset</b> - the offset to UTC in
seconds</p> </td>
<td width="29%">
</td></tr>
</table>


<p style="margin-left:9%; margin-top: 1em"><i>--hostname</i>
returns:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="47%">


<p style="margin-top: 1em"><b>hostname</b> - the hostname
of the domain</p></td>
<td width="41%">
</td></tr>
</table>


<p style="margin-left:9%; margin-top: 1em"><i>--filesystem</i>
returns:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p style="margin-top: 1em"><b>fs.count</b> - the number of
filesystems defined on this domain</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>fs.&lt;num&gt;.mountpoint</b> - the path to the mount
point for filesystem &lt;num&gt;</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>fs.&lt;num&gt;.name</b> - device name in the guest
(e.g. <b>sda1</b>) for filesystem &lt;num&gt;</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>fs.&lt;num&gt;.fstype</b> - the type of filesystem
&lt;num&gt;</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>fs.&lt;num&gt;.total-bytes</b> - the total size of
filesystem &lt;num&gt;</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>fs.&lt;num&gt;.used-bytes</b> - the number of bytes
used in filesystem &lt;num&gt;</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>fs.&lt;num&gt;.disk.count</b> - the number of disks
targeted by filesystem &lt;num&gt;</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>fs.&lt;num&gt;.disk.&lt;num&gt;.alias</b> - the
device alias of disk &lt;num&gt; (e.g. sda)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>fs.&lt;num&gt;.disk.&lt;num&gt;.serial</b> - the
serial number of disk &lt;num&gt;</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>fs.&lt;num&gt;.disk.&lt;num&gt;.device</b> - the
device node of disk &lt;num&gt;</p></td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em"><i>--disk</i>
returns:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="80%">


<p style="margin-top: 1em"><b>disk.count</b> - the number
of disks defined on this domain</p></td>
<td width="8%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="80%">


<p><b>disk.&lt;num&gt;.name</b> - device node (Linux) or
device UNC (Windows)</p></td>
<td width="8%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="80%">


<p><b>disk.&lt;num&gt;.partition</b> - whether this is a
partition or disk</p></td>
<td width="8%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="80%">


<p><b>disk.&lt;num&gt;.dependency.count</b> - the number of
device dependencies</p></td>
<td width="8%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="80%">


<p><b>disk.&lt;num&gt;.dependency.&lt;num&gt;.name</b> - a
dependency name</p></td>
<td width="8%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="80%">


<p><b>disk.&lt;num&gt;.serial</b> - optional disk serial
number</p> </td>
<td width="8%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="80%">


<p><b>disk.&lt;num&gt;.alias</b> - the device alias of the
disk (e.g. sda)</p></td>
<td width="8%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="80%">


<p><b>disk.&lt;num&gt;.guest_alias</b> - optional alias
assigned to the disk</p></td>
<td width="8%">
</td></tr>
</table>


<p style="margin-left:9%; margin-top: 1em"><i>--interface</i>
returns: * <b>if.count</b> - the number of interfaces
defined on this domain * <b>if.&lt;num&gt;.name</b> - name
in the guest (e.g. <b>eth0</b>) for interface &lt;num&gt; *
<b>if.&lt;num&gt;.hwaddr</b> - hardware address in the guest
for interface &lt;num&gt; * <b>if.&lt;num&gt;.addr.count</b>
- the number of IP addresses of interface &lt;num&gt; *
<b>if.&lt;num&gt;.addr.&lt;num1&gt;.type</b> - the IP
address type of addr &lt;num1&gt; (e.g. ipv4) *
<b>if.&lt;num&gt;.addr.&lt;num1&gt;.addr</b> - the IP
address of addr &lt;num1&gt; *
<b>if.&lt;num&gt;.addr.&lt;num1&gt;.prefix</b> - the prefix
of IP address of addr &lt;num1&gt;</p>

<h3>guestvcpus
<a name="guestvcpus"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">guestvcpus
domain [[--enable] | [--disable]] [cpulist]</p>

<p style="margin-left:9%; margin-top: 1em">Query or change
state of vCPUs from guest's point of view using the guest
agent. When invoked without <i>cpulist</i> the guest is
queried for available guest vCPUs, their state and
possibility to be offlined.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>cpulist</i> is provided then one of <i>--enable</i> or
<i>--disable</i> must be provided too. The desired operation
is then executed on the domain.</p>

<p style="margin-left:9%; margin-top: 1em">See
<b>vcpupin</b> for information on <i>cpulist</i>.</p>

<h3>iothreadadd
<a name="iothreadadd"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">iothreadadd
domain iothread_id [[--config] [--live] | [--current]]</p>

<p style="margin-left:9%; margin-top: 1em">Add a new
IOThread to the domain using the specified
<i>iothread_id</i>. If the <i>iothread_id</i> already
exists, the command will fail. The <i>iothread_id</i> must
be greater than zero.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, affect a running guest. If the guest is not
running an error is returned. If <i>--config</i> is
specified, affect the next start of a persistent guest. If
<i>--current</i> is specified, it is equivalent to either
<i>--live</i> or <i>--config</i>, depending on the current
state of the guest.</p>

<h3>iothreaddel
<a name="iothreaddel"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">iothreaddel
domain iothread_id [[--config] [--live] | [--current]]</p>

<p style="margin-left:9%; margin-top: 1em">Delete an
IOThread from the domain using the specified
<i>iothread_id</i>. If an IOThread is currently assigned to
a disk resource such as via the <b>attach-disk</b> command,
then the attempt to remove the IOThread will fail. If the
<i>iothread_id</i> does not exist an error will occur.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, affect a running guest. If the guest is not
running an error is returned. If <i>--config</i> is
specified, affect the next start of a persistent guest. If
<i>--current</i> is specified, it is equivalent to either
<i>--live</i> or <i>--config</i>, depending on the current
state of the guest.</p>

<h3>iothreadinfo
<a name="iothreadinfo"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">iothreadinfo
domain [[--live] [--config] | [--current]]</p>

<p style="margin-left:9%; margin-top: 1em">Display basic
domain IOThreads information including the IOThread ID and
the CPU Affinity for each IOThread.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, get the IOThreads data from the running guest.
If the guest is not running, an error is returned. If
<i>--config</i> is specified, get the IOThreads data from
the next start of a persistent guest. If <i>--current</i> is
specified or <i>--live</i> and <i>--config</i> are not
specified, then get the IOThread data based on the current
guest state, which can either be live or offline.</p>

<h3>iothreadpin
<a name="iothreadpin"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">iothreadpin
domain iothread cpulist [[--live] [--config] |
[--current]]</p>

<p style="margin-left:9%; margin-top: 1em">Change the
pinning of a domain IOThread to host physical CPUs. In order
to retrieve a list of all IOThreads, use
<b>iothreadinfo</b>. To pin an <i>iothread</i> specify the
<i>cpulist</i> desired for the IOThread ID as listed in the
<b>iothreadinfo</b> output.</p>

<p style="margin-left:9%; margin-top: 1em"><i>cpulist</i>
is a list of physical CPU numbers. Its syntax is a comma
separated list and a special markup using '-' and '&#710;'
(ex. '0-4', '0-3,&#710;2') can also be allowed. The '-'
denotes the range and the '&#710;' denotes exclusive. If you
want to reset iothreadpin setting, that is, to pin an
<i>iothread</i> to all physical cpus, simply specify 'r' as
a <i>cpulist</i>.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, affect a running guest. If the guest is not
running, an error is returned. If <i>--config</i> is
specified, affect the next start of a persistent guest. If
<i>--current</i> is specified, it is equivalent to either
<i>--live</i> or <i>--config</i>, depending on the current
state of the guest. Both <i>--live</i> and <i>--config</i>
flags may be given if <i>cpulist</i> is present, but
<i>--current</i> is exclusive. If no flag is specified,
behavior is different depending on hypervisor.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Note</b>: The
expression is sequentially evaluated, so
&quot;0-15,&#710;8&quot; is identical to
&quot;9-14,0-7,15&quot; but not identical to
&quot;&#710;8,0-15&quot;.</p>

<h3>iothreadset
<a name="iothreadset"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">iothreadset
domain iothread_id [[--poll-max-ns ns] [--poll-grow factor]
<br>
[--poll-shrink divisor] [--thread-pool-min value] <br>
[--thread-pool-max value]] <br>
[[--config] [--live] | [--current]]</p>

<p style="margin-left:9%; margin-top: 1em">Modifies an
existing iothread of the domain using the specified
<i>iothread_id</i>. The <i>--poll-max-ns</i> provides the
maximum polling interval to be allowed for an IOThread in
ns. If a 0 (zero) is provided, then polling for the IOThread
is disabled. The <i>--poll-grow</i> is the factor by which
the current polling time will be adjusted in order to reach
the maximum polling time. If a 0 (zero) is provided, then
the default factor will be used. The <i>--poll-shrink</i> is
the quotient by which the current polling time will be
reduced in order to get below the maximum polling interval.
If a 0 (zero) is provided, then the default quotient will be
used. The polling values are purely dynamic for a running
guest. Saving, destroying, stopping, etc. the guest will
result in the polling values returning to hypervisor
defaults at the next start, restore, etc.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--thread-pool-min</i> and <i>--thread-pool-max</i>
options then set lower and upper bound, respectively of
number of threads in worker pool of given iothread. For
changes to an inactive configuration -1 can be specified to
remove corresponding boundary from the domain configuration.
For changes to a running guest it's recommended to set the
upper boundary first (<i>--thread-pool-max</i>) and only
after that set the lower boundary
(<i>--thread-pool-min</i>). It is allowed for the lower
boundary to be the same as the upper boundary, however it's
not allowed for the upper boundary to be value of zero.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, affect a running guest. If the guest is not
running an error is returned. If <i>--current</i> is
specified or <i>--live</i> is not specified, then handle as
if <i>--live</i> was specified. (Where &quot;current&quot;
here means whatever the present guest state is: live or
offline.)</p>

<h3>managedsave
<a name="managedsave"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">managedsave
domain [--bypass-cache] [{--running | --paused}]
[--verbose]</p>

<p style="margin-left:9%; margin-top: 1em">Save and destroy
(stop) a running domain, so it can be restarted from the
same state at a later time. When the virsh <b>start</b>
command is next run for the domain, it will automatically be
started from this saved state. If <i>--bypass-cache</i> is
specified, the save will avoid the file system cache,
although this may slow down the operation.</p>

<p style="margin-left:9%; margin-top: 1em">The progress may
be monitored using <b>domjobinfo</b> virsh command and
canceled with <b>domjobabort</b> command (sent by another
virsh instance). Another option is to send SIGINT (usually
with <b>Ctrl-C</b>) to the virsh process running
<b>managedsave</b> command. <i>--verbose</i> displays the
progress of save.</p>

<p style="margin-left:9%; margin-top: 1em">Normally,
starting a managed save will decide between running or
paused based on the state the domain was in when the save
was done; passing either the <i>--running</i> or
<i>--paused</i> flag will allow overriding which state the
<b>start</b> should use.</p>

<p style="margin-left:9%; margin-top: 1em">The
<b>dominfo</b> command can be used to query whether a domain
currently has any managed save image.</p>

<h3>managedsave-define
<a name="managedsave-define"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">managedsave-define
domain xml [{--running | --paused}]</p>

<p style="margin-left:9%; margin-top: 1em">Update the
domain XML that will be used when <i>domain</i> is later
started. The <i>xml</i> argument must be a file name
containing the alternative XML, with changes only in the
host-specific portions of the domain XML. For example, it
can be used to change disk file paths.</p>

<p style="margin-left:9%; margin-top: 1em">The managed save
image records whether the domain should be started to a
running or paused state. Normally, this command does not
alter the recorded state; passing either the
<i>--running</i> or <i>--paused</i> flag will allow
overriding which state the <b>start</b> should use.</p>

<h3>managedsave-dumpxml
<a name="managedsave-dumpxml"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">managedsave-dumpxml
[--security-info] [--xpath EXPRESSION] [--wrap] domain</p>

<p style="margin-left:9%; margin-top: 1em">Extract the
domain XML that was in effect at the time the saved state
file <i>file</i> was created with the <b>managedsave</b>
command. Using <i>--security-info</i> will also include
security sensitive information.</p>

<p style="margin-left:9%; margin-top: 1em">If the
<b>--xpath</b> argument provides an XPath expression, it
will be evaluated against the output XML and only those
matching nodes will be printed. The default behaviour is to
print each matching node as a standalone document, however,
for ease of additional processing, the <b>--wrap</b>
argument will cause the matching node to be wrapped in a
common root node.</p>

<h3>managedsave-edit
<a name="managedsave-edit"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">managedsave-edit
domain [{--running | --paused}]</p>

<p style="margin-left:9%; margin-top: 1em">Edit the XML
configuration associated with a saved state file of a
<i>domain</i> was created by the <b>managedsave</b>
command.</p>

<p style="margin-left:9%; margin-top: 1em">The managed save
image records whether the domain should be started to a
running or paused state. Normally, this command does not
alter the recorded state; passing either the
<i>--running</i> or <i>--paused</i> flag will allow
overriding which state the <b>restore</b> should use.</p>

<p style="margin-left:9%; margin-top: 1em">This is
equivalent to:</p>

<p style="margin-left:13%; margin-top: 1em">virsh
managedsave-dumpxml domain-name &gt; state-file.xml <br>
vi state-file.xml (or make changes with your other text
editor) <br>
virsh managedsave-define domain-name state-file-xml</p>

<p style="margin-left:9%; margin-top: 1em">except that it
does some error checking.</p>

<p style="margin-left:9%; margin-top: 1em">The editor used
can be supplied by the <b>$VISUAL</b> or <b>$EDITOR</b>
environment variables, and defaults to <b>vi</b>.</p>

<h3>managedsave-remove
<a name="managedsave-remove"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">managedsave-remove
domain</p>

<p style="margin-left:9%; margin-top: 1em">Remove the
<b>managedsave</b> state file for a domain, if it exists.
This ensures the domain will do a full boot the next time it
is started.</p>

<h3>maxvcpus
<a name="maxvcpus"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">maxvcpus
[type]</p>

<p style="margin-left:9%; margin-top: 1em">Provide the
maximum number of virtual CPUs supported for a guest VM on
this connection. If provided, the <i>type</i> parameter must
be a valid type attribute for the &lt;domain&gt; element of
XML.</p>

<h3>memtune
<a name="memtune"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">memtune domain
[--hard-limit size] [--soft-limit size] [--swap-hard-limit
size] <br>
[--min-guarantee size] [[--config] [--live] |
[--current]]</p>

<p style="margin-left:9%; margin-top: 1em">Allows you to
display or set the domain memory parameters. Without flags,
the current settings are displayed; with a flag, the
appropriate limit is adjusted if supported by the
hypervisor. LXC and QEMU/KVM support <i>--hard-limit</i>,
<i>--soft-limit</i>, and <i>--swap-hard-limit</i>.
<i>--min-guarantee</i> is supported only by ESX hypervisor.
Each of these limits are scaled integers (see <b>NOTES</b>
above), with a default of kibibytes (blocks of 1024 bytes)
if no suffix is present. Libvirt rounds up to the nearest
kibibyte. Some hypervisors require a larger granularity than
KiB, and requests that are not an even multiple will be
rounded up. For example, vSphere/ESX rounds the parameter up
to mebibytes (1024 kibibytes).</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, affect a running guest. If <i>--config</i> is
specified, affect the next start of a persistent guest. If
<i>--current</i> is specified, it is equivalent to either
<i>--live</i> or <i>--config</i>, depending on the current
state of the guest. Both <i>--live</i> and <i>--config</i>
flags may be given, but <i>--current</i> is exclusive. If no
flag is specified, behavior is different depending on
hypervisor.</p>

<p style="margin-left:9%; margin-top: 1em">For QEMU/KVM,
the parameters are applied to the QEMU process as a whole.
Thus, when counting them, one needs to add up guest RAM,
guest video RAM, and some memory overhead of QEMU itself.
The last piece is hard to determine so one needs guess and
try.</p>

<p style="margin-left:9%; margin-top: 1em">For LXC, the
displayed hard_limit value is the current memory setting
from the XML or the results from a <b>virsh setmem</b>
command.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="15%">


<p style="margin-top: 1em"><i>--hard-limit</i></p></td>
<td width="73%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The maximum
memory the guest can use.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="15%">


<p style="margin-top: 1em"><i>--soft-limit</i></p></td>
<td width="73%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The memory
limit to enforce during memory contention.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="21%">


<p style="margin-top: 1em"><i>--swap-hard-limit</i></p></td>
<td width="67%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The maximum
memory plus swap the guest can use. This has to be more than
hard-limit value provided.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="19%">


<p style="margin-top: 1em"><i>--min-guarantee</i></p></td>
<td width="69%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The guaranteed
minimum memory allocation for the guest.</p>

<p style="margin-left:9%; margin-top: 1em">Specifying -1 as
a value for these limits is interpreted as unlimited.</p>

<h3>metadata
<a name="metadata"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">metadata domain
[[--live] [--config] | [--current]] <br>
[--edit] [uri] [key] [set] [--remove]</p>

<p style="margin-left:9%; margin-top: 1em">Show or modify
custom XML metadata of a domain. The metadata is a user
defined XML that allows storing arbitrary XML data in the
domain definition. Multiple separate custom metadata pieces
can be stored in the domain XML. The pieces are identified
by a private XML namespace provided via the <i>uri</i>
argument. (See also <b>desc</b> that works with textual
metadata of a domain.)</p>

<p style="margin-left:9%; margin-top: 1em">Flags
<i>--live</i> or <i>--config</i> select whether this command
works on live or persistent definitions of the domain. If
both <i>--live</i> and <i>--config</i> are specified, the
<i>--config</i> option takes precedence on getting the
current description and both live configuration and config
are updated while setting the description. <i>--current</i>
is exclusive and implied if none of these was specified.</p>

<p style="margin-left:9%; margin-top: 1em">Flag
<i>--remove</i> specifies that the metadata element
specified by the <i>uri</i> argument should be removed
rather than updated.</p>

<p style="margin-left:9%; margin-top: 1em">Flag
<i>--edit</i> specifies that an editor with the metadata
identified by the <i>uri</i> argument should be opened and
the contents saved back afterwards. Otherwise the new
contents can be provided via the <i>set</i> argument.</p>

<p style="margin-left:9%; margin-top: 1em">When setting
metadata via <i>--edit</i> or <i>set</i> the <i>key</i>
argument must be specified and is used to prefix the custom
elements to bind them to the private namespace.</p>

<p style="margin-left:9%; margin-top: 1em">If neither of
<i>--edit</i> and <i>set</i> are specified the XML metadata
corresponding to the <i>uri</i> namespace is displayed
instead of being modified.</p>

<h3>migrate
<a name="migrate"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">migrate
[--live] [--offline] [--direct] [--p2p [--tunnelled]] <br>
[--persistent] [--undefinesource] [--suspend]
[--copy-storage-all] <br>
[--copy-storage-inc] [--change-protection] [--unsafe]
[--verbose] <br>
[--rdma-pin-all] [--abort-on-error] [--postcopy] <br>
[--postcopy-after-precopy] [--postcopy-resume] [--zerocopy]
<br>
domain desturi [migrateuri] [graphicsuri] [listen-address]
[dname] <br>
[--timeout seconds [--timeout-suspend | --timeout-postcopy]]
<br>
[--xml file] <br>
[--migrate-disks disk-list] [--migrate-disks-detect-zeroes
disk-list] <br>
[--disks-port port] <br>
[--compressed] [--comp-methods method-list] <br>
[--comp-mt-level] [--comp-mt-threads] [--comp-mt-dthreads]
<br>
[--comp-xbzrle-cache] [--comp-zlib-level]
[--comp-zstd-level] <br>
[--auto-converge] [auto-converge-initial] <br>
[auto-converge-increment] [--persistent-xml file] [--tls]
<br>
[--postcopy-bandwidth bandwidth] <br>
[--parallel [--parallel-connections connections]] <br>
[--bandwidth bandwidth] [--tls-destination hostname] <br>
[--disks-uri URI] [--copy-storage-synchronous-writes] <br>
[--available-switchover-bandwidth bandwidth]</p>

<p style="margin-left:9%; margin-top: 1em">Migrate domain
to another host. Add <i>--live</i> for live migration;
&lt;--p2p&gt; for peer-2-peer migration; <i>--direct</i> for
direct migration; or <i>--tunnelled</i> for tunnelled
migration. <i>--offline</i> migrates domain definition
without starting the domain on destination and without
stopping it on source host. Offline migration may be used
with inactive domains and it must be used with
<i>--persistent</i> option.</p>


<p style="margin-left:9%; margin-top: 1em"><i>--persistent</i>
leaves the domain persistent on destination host (See below
for quirks when used together with <i>--xml</i>),
<i>--undefinesource</i> undefines the domain on the source
host, and <i>--suspend</i> leaves the domain paused on the
destination host.</p>


<p style="margin-left:9%; margin-top: 1em"><i>--copy-storage-all</i>
indicates migration with non-shared storage with full disk
copy, <i>--copy-storage-inc</i> indicates migration with
non-shared storage with incremental copy (same base image
shared between source and destination). In both cases the
disk images have to exist on destination host, the
<i>--copy-storage-...</i> options only tell libvirt to
transfer data from the images on source host to the images
found at the same place on the destination host. By default
only non-shared non-readonly images are transferred. Use
<i>--migrate-disks</i> to explicitly specify a list of disk
targets to transfer via the comma separated <b>disk-list</b>
argument. The <i>--migrate-disks-detect-zeroes</i> option
which takes a comma separated list of disk target names
enables zeroed block detection for the listed migrated
disks. These blocks are not transferred or allocated on
destination, effectively sparsifying the disk at the cost of
CPU overhead. Users must ensure that any pre-created storage
source is cleared and thus reads all-zeroes before using
this option as otherwise the destination image may become
corrupted. With <i>--copy-storage-synchronous-writes</i>
flag used the disk data migration will synchronously handle
guest disk writes to both the original source and the
destination to ensure that the disk migration converges at
the price of possibly decreased burst performance.</p>


<p style="margin-left:9%; margin-top: 1em"><i>--change-protection</i>
enforces that no incompatible configuration changes will be
made to the domain while the migration is underway; this
flag is implicitly enabled when supported by the hypervisor,
but can be explicitly used to reject the migration if the
hypervisor lacks change protection support.</p>


<p style="margin-left:9%; margin-top: 1em"><i>--verbose</i>
displays the progress of migration.</p>


<p style="margin-left:9%; margin-top: 1em"><i>--abort-on-error</i>
cancels the migration if a soft error (for example I/O
error) happens during the migration.</p>


<p style="margin-left:9%; margin-top: 1em"><i>--postcopy</i>
enables post-copy logic in migration, but does not actually
start post-copy, i.e., migration is started in pre-copy
mode. Once migration is running, the user may switch to
post-copy using the <b>migrate-postcopy</b> command sent
from another virsh instance or use
<i>--postcopy-after-precopy</i> along with <i>--postcopy</i>
to let libvirt automatically switch to post-copy after the
first pass of pre-copy is finished. The maximum bandwidth
consumed during the post-copy phase may be limited using
<i>--postcopy-bandwidth</i>. The maximum bandwidth consumed
during the pre-copy phase may be limited using
<i>--bandwidth</i>. In case connection between the hosts
breaks while migration is in post-copy mode, the domain
cannot be resumed on either source or destination host and
the <b>migrate</b> command will report an error leaving the
domain active on both hosts. To recover from such situation
repeat the original <b>migrate</b> command with an
additional <i>--postcopy-resume</i> flag.</p>


<p style="margin-left:9%; margin-top: 1em"><i>--auto-converge</i>
forces convergence during live migration. The initial guest
CPU throttling rate can be set with
<i>auto-converge-initial</i>. If the initial throttling rate
is not enough to ensure convergence, the rate is
periodically increased by
<i>auto-converge-increment</i>.</p>


<p style="margin-left:9%; margin-top: 1em"><i>--rdma-pin-all</i>
can be used with RDMA migration (i.e., when
<i>migrateuri</i> starts with rdma://) to tell the
hypervisor to pin all domain's memory at once before
migration starts rather than letting it pin memory pages as
needed. For QEMU/KVM this requires hard_limit memory tuning
element (in the domain XML) to be used and set to the
maximum memory configured for the domain plus any memory
consumed by the QEMU process itself. Beware of setting the
memory limit too high (and thus allowing the domain to lock
most of the host's memory). Doing so may be dangerous to
both the domain and the host itself since the host's kernel
may run out of memory.</p>


<p style="margin-left:9%; margin-top: 1em"><i>--zerocopy</i>
requests zero-copy mechanism to be used for migrating memory
pages. For QEMU/KVM this means QEMU will be temporarily
allowed to lock all guest pages in host's memory, although
only those that are queued for transfer will be locked at
the same time.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Note</b>:
Individual hypervisors usually do not support all possible
types of migration. For example, QEMU does not support
direct migration.</p>

<p style="margin-left:9%; margin-top: 1em">In some cases
libvirt may refuse to migrate the domain because doing so
may lead to potential problems such as data corruption, and
thus the migration is considered unsafe. For QEMU domain,
this may happen if the domain uses disks without explicitly
setting cache mode to &quot;none&quot;. Migrating such
domains is unsafe unless the disk images are stored on
coherent clustered filesystem, such as GFS2 or GPFS. If you
are sure the migration is safe or you just do not care, use
<i>--unsafe</i> to force the migration.</p>

<p style="margin-left:9%; margin-top: 1em"><i>dname</i> is
used for renaming the domain to new name during migration,
which also usually can be omitted.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--xml</i>
<b>file</b>, while usually not required, can be used to
supply an alternative XML file for use on the destination to
supply a larger set of changes to any host-specific portions
of the domain XML, such as accounting for naming differences
between source and destination in accessing underlying
storage. If <i>--xml</i> is used together with
<i>--persistent</i> it's usually required to provide a
persistent XML definition via <i>--persistent-xml</i> (see
below) which is fixed the same way as the XML passed to
<i>--file</i> was.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--persistent</i> is enabled, <i>--persistent-xml</i>
<b>file</b> can be used to supply an alternative XML file
which will be used as the persistent guest definition on the
destination host.</p>


<p style="margin-left:9%; margin-top: 1em"><i>--timeout</i>
<b>seconds</b> tells virsh to run a specified action when
live migration exceeds that many seconds. It can only be
used with <i>--live</i>. If <i>--timeout-suspend</i> is
specified, the domain will be suspended after the timeout
and the migration will complete offline; this is the default
if no <i>--timeout-\`` option is specified on the command
line. When *--timeout-postcopy</i> is used, virsh will
switch migration from pre-copy to post-copy upon timeout;
migration has to be started with <i>--postcopy</i> option
for this to work.</p>


<p style="margin-left:9%; margin-top: 1em"><i>--compressed</i>
activates compression, the compression method is chosen with
<i>--comp-methods</i>. Supported methods are &quot;mt&quot;,
&quot;xbzrle&quot;, &quot;zlib&quot;, and &quot;zstd&quot;.
The supported set of methods and their combinations depend
on a hypervisor and migration options. QEMU only supports
&quot;zlib&quot; and &quot;zstd&quot; methods when
<i>--parallel</i> is used and they cannot be used at once.
When no methods are specified, a hypervisor default methods
will be used. QEMU defaults to &quot;xbzrle&quot; as long as
<i>--parallel</i> is not used. For <i>--parallel</i>
migrations QEMU does not provide any default compression
method and thus it has to be specified explicitly using
<i>--comp-method</i>. Compression methods can be tuned
further. <i>--comp-mt-level</i> sets compression level for
&quot;mt&quot; method. Values are in range from 0 to 9,
where 1 is maximum speed and 9 is maximum compression.
<i>--comp-mt-threads</i> and <i>--comp-mt-dthreads</i> set
the number of compress threads on source and the number of
decompress threads on target respectively.
<i>--comp-xbzrle-cache</i> sets size of page cache in bytes.
<i>--comp-zlib-level</i> sets the compression level when
using &quot;zlib&quot; method. Values are in range from 0 to
9 and defaults to 1, where 0 is no compression, 1 is maximum
speed and 9 is maximum compression. <i>--comp-zstd-level</i>
sets the compression level when using &quot;zstd&quot;
method. Values are in range from 0 to 20 and defaults to 1,
where 0 is no compression, 1 is maximum speed and 20 is
maximum compression.</p>

<p style="margin-left:9%; margin-top: 1em">Providing
<i>--tls</i> causes the migration to use the host configured
TLS setup (see migrate_tls_x509_cert_dir in
/etc/libvirt/qemu.conf) in order to perform the migration of
the domain. Usage requires proper TLS setup for both source
and target. Normally the TLS certificate from the
destination host must match the host's name for TLS
verification to succeed. When the certificate does not match
the destination hostname and the expected certificate's
hostname is known, <i>--tls-destination</i> can be used to
pass the expected <i>hostname</i> when starting the
migration.</p>


<p style="margin-left:9%; margin-top: 1em"><i>--parallel</i>
option will cause migration data to be sent over multiple
parallel connections. The number of such connections can be
set using <i>--parallel-connections</i>. Parallel
connections may help with saturating the network link
between the source and the target and thus speeding up the
migration.</p>

<p style="margin-left:9%; margin-top: 1em">Running
migration can be canceled by interrupting virsh (usually
using <b>Ctrl-C</b>) or by <b>domjobabort</b> command sent
from another virsh instance.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>desturi</i> and <i>migrateuri</i> parameters can be used
to control which destination the migration uses.
<i>desturi</i> is important for managed migration, but
unused for direct migration; <i>migrateuri</i> is required
for direct migration, but can usually be automatically
determined for managed migration.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Note</b>: The
<i>desturi</i> parameter for normal migration and peer2peer
migration has different semantics:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p style="margin-top: 1em">normal migration: the
<i>desturi</i> is an address of the target host as seen from
the client machine.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p>peer2peer migration: the <i>desturi</i> is an address of
the target host as seen from the source machine.</p></td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">In a special
circumstance where you require a complete control of the
connection and/or libvirt does not have network access to
the remote side you can use a UNIX transport in the URI and
specify a socket path in the query, for example with the
qemu driver you could use this:</p>


<p style="margin-left:13%; margin-top: 1em">qemu+unix:///system?socket=/path/to/socket</p>

<p style="margin-left:9%; margin-top: 1em">When
<i>migrateuri</i> is not specified, libvirt will
automatically determine the hypervisor specific URI. Some
hypervisors, including QEMU, have an optional
&quot;migration_host&quot; configuration parameter (useful
when the host has multiple network interfaces). If this is
unspecified, libvirt determines a name by looking up the
target host's configured hostname.</p>

<p style="margin-left:9%; margin-top: 1em">There are a few
scenarios where specifying <i>migrateuri</i> may help:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p style="margin-top: 1em">The configured hostname is
incorrect, or DNS is broken. If a host has a hostname which
will not resolve to match one of its public IP addresses,
then libvirt will generate an incorrect URI. In this case
<i>migrateuri</i> should be explicitly specified, using an
IP address, or a correct hostname.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p>The host has multiple network interfaces. If a host has
multiple network interfaces, it might be desirable for the
migration data stream to be sent over a specific interface
for either security or performance reasons. In this case
<i>migrateuri</i> should be explicitly specified, using an
IP address associated with the network to be used.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p>The firewall restricts what ports are available. When
libvirt generates a migration URI, it will pick a port
number using hypervisor specific rules. Some hypervisors
only require a single port to be open in the firewalls,
while others require a whole range of port numbers. In the
latter case <i>migrateuri</i> might be specified to choose a
specific port number outside the default range in order to
comply with local firewall policies.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p>The <i>desturi</i> uses UNIX transport method. In this
advanced case libvirt should not guess a <i>migrateuri</i>
and it should be specified using UNIX socket path URI:</p></td></tr>
</table>


<p style="margin-left:13%; margin-top: 1em">unix:///path/to/socket</p>

<p style="margin-left:9%; margin-top: 1em">See
&lt;https://libvirt.org/migration.html#uris&gt; for more
details on migration URIs.</p>

<p style="margin-left:9%; margin-top: 1em">Optional
<i>graphicsuri</i> overrides connection parameters used for
automatically reconnecting a graphical clients at the end of
migration. If omitted, libvirt will compute the parameters
based on target host IP address. In case the client does not
have a direct access to the network virtualization hosts are
connected to and needs to connect through a proxy,
<i>graphicsuri</i> may be used to specify the address the
client should connect to. The URI is formed as follows:</p>


<p style="margin-left:13%; margin-top: 1em">protocol://hostname[:port]/[?parameters]</p>

<p style="margin-left:9%; margin-top: 1em">where protocol
is either &quot;spice&quot; or &quot;vnc&quot; and
parameters is a list of protocol specific parameters
separated by '&amp;'. Currently recognized parameters are
&quot;tlsPort&quot; and &quot;tlsSubject&quot;. For
example,</p>


<p style="margin-left:13%; margin-top: 1em">spice://target.host.com:1234/?tlsPort=4567</p>

<p style="margin-left:9%; margin-top: 1em">Optional
<i>listen-address</i> sets the listen address that
hypervisor on the destination side should bind to for
incoming migration. Both IPv4 and IPv6 addresses are
accepted as well as hostnames (the resolving is done on
destination). Some hypervisors do not support specifying the
listen address and will return an error if this parameter is
used. This parameter cannot be used if <i>desturi</i> uses
UNIX transport method.</p>

<p style="margin-left:9%; margin-top: 1em">Optional
<i>disks-port</i> sets the port that hypervisor on
destination side should bind to for incoming disks traffic.
Currently it is supported only by QEMU.</p>

<p style="margin-left:9%; margin-top: 1em">Optional
<i>disks-uri</i> can also be specified (mutually exclusive
with <i>disks-port</i>) to specify what the remote
hypervisor should bind/connect to when migrating disks. This
can be <i>tcp://address:port</i> to specify a listen address
(which overrides <i>--migrate-uri</i> and
<i>--listen-address</i> for the disk migration) and a port
or <i>unix:///path/to/socket</i> in case you need the disk
migration to happen over a UNIX socket with that specified
path. In this case you need to make sure the same socket
path is accessible to both source and destination
hypervisors and connecting to the socket on the source
(after hypervisor creates it on the destination) will
actually connect to the destination. If you are using
SELinux (at least on the source host) you need to make sure
the socket on the source is accessible to libvirtd/QEMU for
connection. Libvirt cannot change the context of the
existing socket because it is different from the file
representation of the socket and the context is chosen by
its creator (usually by using
<i>setsockcreatecon{,_raw}()</i> functions).</p>

<p style="margin-left:9%; margin-top: 1em">Optional
<i>--available-switchover-bandwidth</i> overrides the
automatically computed bandwidth (in MiB/s) available for
the final phase of (pre-copy) migration during which CPUs
are stopped and all the remaining memory and device state is
transferred. Knowing this bandwidth is important for
accurate estimation of the domain downtime and deciding the
right moment for switching over. Normally this would be
estimated based on the bandwidth used by migration, but this
could be lower than the actual available bandwidth. Using
this option may help with migration convergence when the
migration would keep iterating over and over thinking
there's not enough bandwidth to comply with the configured
maximum downtime.</p>

<h3>migrate-compcache
<a name="migrate-compcache"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">migrate-compcache
domain [--size bytes]</p>

<p style="margin-left:9%; margin-top: 1em">Sets and/or gets
size of the cache (in bytes) used for compressing repeatedly
transferred memory pages during live migration. When called
without <i>size</i>, the command just prints current size of
the compression cache. When <i>size</i> is specified, the
hypervisor is asked to change compression cache to
<i>size</i> bytes and then the current size is printed (the
result may differ from the requested size due to rounding
done by the hypervisor). The <i>size</i> option is supposed
to be used while the domain is being live-migrated as a
reaction to migration progress and increasing number of
compression cache misses obtained from domjobinfo.</p>

<h3>migrate-getmaxdowntime
<a name="migrate-getmaxdowntime"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">migrate-getmaxdowntime
domain</p>

<p style="margin-left:9%; margin-top: 1em">Get the maximum
tolerable downtime for a domain which is being live-migrated
to another host. This is the number of milliseconds the
guest is allowed to be down at the end of live
migration.</p>

<h3>migrate-getspeed
<a name="migrate-getspeed"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">migrate-getspeed
domain [--postcopy]</p>

<p style="margin-left:9%; margin-top: 1em">Get the maximum
migration bandwidth (in MiB/s) for a domain. If the
<i>--postcopy</i> option is specified, the command will get
the maximum bandwidth allowed during a post-copy migration
phase.</p>

<h3>migrate-postcopy
<a name="migrate-postcopy"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">migrate-postcopy
domain</p>

<p style="margin-left:9%; margin-top: 1em">Switch the
current migration from pre-copy to post-copy. This is only
supported for a migration started with <i>--postcopy</i>
option.</p>

<h3>migrate-setmaxdowntime
<a name="migrate-setmaxdowntime"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">migrate-setmaxdowntime
domain downtime</p>

<p style="margin-left:9%; margin-top: 1em">Set maximum
tolerable downtime for a domain which is being live-migrated
to another host. The <i>downtime</i> is a number of
milliseconds the guest is allowed to be down at the end of
live migration.</p>

<h3>migrate-setspeed
<a name="migrate-setspeed"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">migrate-setspeed
domain bandwidth [--postcopy]</p>

<p style="margin-left:9%; margin-top: 1em">Set the maximum
migration bandwidth (in MiB/s) for a domain which is being
migrated to another host. <i>bandwidth</i> is interpreted as
an unsigned long long value. Specifying a negative value
results in an essentially unlimited value being provided to
the hypervisor. The hypervisor can choose whether to reject
the value or convert it to the maximum value allowed. If the
<i>--postcopy</i> option is specified, the command will set
the maximum bandwidth allowed during a post-copy migration
phase.</p>

<h3>numatune
<a name="numatune"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">numatune domain
[--mode mode] [--nodeset nodeset] <br>
[[--config] [--live] | [--current]]</p>

<p style="margin-left:9%; margin-top: 1em">Set or get a
domain's numa parameters, corresponding to the
&lt;numatune&gt; element of domain XML. Without flags, the
current settings are displayed.</p>

<p style="margin-left:9%; margin-top: 1em"><i>mode</i> can
be one of `strict', `interleave', `preferred' and
'restrictive' or any valid number from the
virDomainNumatuneMemMode enum in case the daemon supports
it. For a running domain, the mode can't be changed, and the
nodeset can be changed only if the domain was started with
`restrictive' mode.</p>

<p style="margin-left:9%; margin-top: 1em"><i>nodeset</i>
is a list of numa nodes used by the host for running the
domain. Its syntax is a comma separated list, with '-' for
ranges and '&#710;' for excluding a node.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, set scheduler information of a running guest.
If <i>--config</i> is specified, affect the next start of a
persistent guest. If <i>--current</i> is specified, it is
equivalent to either <i>--live</i> or <i>--config</i>,
depending on the current state of the guest.</p>

<p style="margin-left:9%; margin-top: 1em">For running
guests in Linux hosts, the changes made in the domain's numa
parameters does not imply that the guest memory will be
moved to a different nodeset immediately. The memory
migration depends on the guest activity, and the memory of
an idle guest will remain in its previous nodeset for
longer. The presence of VFIO devices will also lock parts of
the guest memory in the same nodeset used to start the
guest, regardless of nodeset changes.</p>

<h3>perf
<a name="perf"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">perf domain
[--enable eventSpec] [--disable eventSpec] <br>
[[--config] [--live] | [--current]]</p>

<p style="margin-left:9%; margin-top: 1em">Get the current
perf events setting or enable/disable specific perf events
for a guest domain.</p>

<p style="margin-left:9%; margin-top: 1em">Perf is a
performance analyzing tool in Linux, and it can instrument
CPU performance counters, tracepoints, kprobes, and uprobes
(dynamic tracing). Perf supports a list of measurable
events, and can measure events coming from different
sources. For instance, some event are pure kernel counters,
in this case they are called software events, including
context-switches, minor-faults, etc.. Now dozens of events
from different sources can be supported by perf.</p>

<p style="margin-left:9%; margin-top: 1em">Currently only
QEMU/KVM supports this command. The <i>--enable</i> and
<i>--disable</i> option combined with <b>eventSpec</b> can
be used to enable or disable specific performance event.
<b>eventSpec</b> is a string list of one or more events
separated by commas. Valid event names are as follows:</p>

<p style="margin-left:9%; margin-top: 1em"><b>Valid perf
event names</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p style="margin-top: 1em"><b>cmt</b> - A PQos (Platform
Qos) feature to monitor the usage of cache by applications
running on the platform.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>mbmt</b> - Provides a way to monitor the total system
memory bandwidth between one level of cache and another.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>mbml</b> - Provides a way to limit the amount of data
(bytes/s) send through the memory controller on the
socket.</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>cache_misses</b> - Provides the count of cache misses
by applications running on the platform.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>cache_references</b> - Provides the count of cache
hits by applications running on th e platform.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>instructions</b> - Provides the count of instructions
executed by applications running on the platform.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>cpu_cycles</b> - Provides the count of cpu cycles
(total/elapsed). May be used with instructions in order to
get a cycles per instruction.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>branch_instructions</b> - Provides the count of
branch instructions executed by applications running on the
platform.</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>branch_misses</b> - Provides the count of branch
misses executed by applications running on the platform.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>bus_cycles</b> - Provides the count of bus cycles
executed by applications running on the platform.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>stalled_cycles_frontend</b> - Provides the count of
stalled cpu cycles in the frontend of the instruction
processor pipeline by applications running on the
platform.</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>stalled_cycles_backend</b> - Provides the count of
stalled cpu cycles in the backend of the instruction
processor pipeline by applications running on the
platform.</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>ref_cpu_cycles</b> - Provides the count of total cpu
cycles not affected by CPU frequency scaling by applications
running on the platform.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>cpu_clock</b> - Provides the cpu clock time consumed
by applications running on the platform.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>task_clock</b> - Provides the task clock time
consumed by applications running on the platform.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>page_faults</b> - Provides the count of page faults
by applications running on the platform.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>context_switches</b> - Provides the count of context
switches by applications running on the platform.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>cpu_migrations</b> - Provides the count cpu
migrations by applications running on the platform.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>page_faults_min</b> - Provides the count minor page
faults by applications running on the platform.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>page_faults_maj</b> - Provides the count major page
faults by applications running on the platform.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>alignment_faults</b> - Provides the count alignment
faults by applications running on the platform.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p><b>emulation_faults</b> - Provides the count emulation
faults by applications running on the platform.</p></td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em"><b>Note</b>: The
statistics can be retrieved using the <b>domstats</b>
command using the <i>--perf</i> flag.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, affect a running guest. If <i>--config</i> is
specified, affect the next start of a persistent guest. If
<i>--current</i> is specified, it is equivalent to either
<i>--live</i> or <i>--config</i>, depending on the current
state of the guest. Both <i>--live</i> and <i>--config</i>
flags may be given, but <i>--current</i> is exclusive. If no
flag is specified, behavior is different depending on
hypervisor.</p>

<h3>reboot
<a name="reboot"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">reboot domain
[--mode MODE-LIST]</p>

<p style="margin-left:9%; margin-top: 1em">Reboot a domain.
This acts just as if the domain had the <b>reboot</b>
command run from the console. The command returns as soon as
it has executed the reboot action, which may be
significantly before the domain actually reboots.</p>

<p style="margin-left:9%; margin-top: 1em">The exact
behavior of a domain when it reboots is set by the
<i>on_reboot</i> parameter in the domain's XML
definition.</p>

<p style="margin-left:9%; margin-top: 1em">By default the
hypervisor will try to pick a suitable shutdown method. To
specify an alternative method, the <i>--mode</i> parameter
can specify a comma separated list which includes
<b>acpi</b>, <b>agent</b>, <b>initctl</b>, <b>signal</b> and
<b>paravirt</b>. The order in which drivers will try each
mode is undefined, and not related to the order specified to
virsh. For strict control over ordering, use a single mode
at a time and repeat the command.</p>

<h3>reset
<a name="reset"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">reset
domain</p>

<p style="margin-left:9%; margin-top: 1em">Reset a domain
immediately without any guest shutdown. <b>reset</b>
emulates the power reset button on a machine, where all
guest hardware sees the RST line set and reinitializes
internal state.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Note</b>:
Reset without any guest OS shutdown risks data loss.</p>

<h3>restore
<a name="restore"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">restore
state-file [--bypass-cache] [--xml file] <br>
[{--running | --paused}] [--reset-nvram]</p>

<p style="margin-left:9%; margin-top: 1em">Restores a
domain from a <b>virsh save</b> state file. See <i>save</i>
for more info.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--bypass-cache</i> is specified, the restore will avoid
the file system cache, although this may slow down the
operation.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--xml</i>
<b>file</b> is usually omitted, but can be used to supply an
alternative XML file for use on the restored guest with
changes only in the host-specific portions of the domain
XML. For example, it can be used to account for file naming
differences in underlying storage due to disk snapshots
taken after the guest was saved.</p>

<p style="margin-left:9%; margin-top: 1em">Normally,
restoring a saved image will use the state recorded in the
save image to decide between running or paused; passing
either the <i>--running</i> or <i>--paused</i> flag will
allow overriding which state the domain should be started
in.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--reset-nvram</i> is specified, any existing NVRAM file
will be deleted and re-initialized from its pristine
template.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Note</b>: To
avoid corrupting file system contents within the domain, you
should not reuse the saved state file for a second
<b>restore</b> unless you have also reverted all storage
volumes back to the same contents as when the state file was
created.</p>

<h3>resume
<a name="resume"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">resume
domain</p>

<p style="margin-left:9%; margin-top: 1em">Moves a domain
out of the suspended state. This will allow a previously
suspended domain to now be eligible for scheduling by the
underlying hypervisor.</p>

<h3>save
<a name="save"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">save domain
state-file [--bypass-cache] [--xml file] <br>
[{--running | --paused}] [--verbose]</p>

<p style="margin-left:9%; margin-top: 1em">Saves a running
domain (RAM, but not disk state) to a state file so that it
can be restored later. Once saved, the domain will no longer
be running on the system, thus the memory allocated for the
domain will be free for other domains to use. <b>virsh
restore</b> restores from this state file. If
<i>--bypass-cache</i> is specified, the save will avoid the
file system cache, although this may slow down the
operation.</p>

<p style="margin-left:9%; margin-top: 1em">The progress may
be monitored using <b>domjobinfo</b> virsh command and
canceled with <b>domjobabort</b> command (sent by another
virsh instance). Another option is to send SIGINT (usually
with <b>Ctrl-C</b>) to the virsh process running <b>save</b>
command. <i>--verbose</i> displays the progress of save.</p>

<p style="margin-left:9%; margin-top: 1em">This is roughly
equivalent to doing a hibernate on a running computer, with
all the same limitations. Open network connections may be
severed upon restore, as TCP timeouts may have expired.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--xml</i>
<b>file</b> is usually omitted, but can be used to supply an
alternative XML file for use on the restored guest with
changes only in the host-specific portions of the domain
XML. For example, it can be used to account for file naming
differences that are planned to be made via disk snapshots
of underlying storage after the guest is saved.</p>

<p style="margin-left:9%; margin-top: 1em">Normally,
restoring a saved image will decide between running or
paused based on the state the domain was in when the save
was done; passing either the <i>--running</i> or
<i>--paused</i> flag will allow overriding which state the
<b>restore</b> should use.</p>

<p style="margin-left:9%; margin-top: 1em">Domain saved
state files assume that disk images will be unchanged
between the creation and restore point. For a more complete
system restore point, where the disk state is saved
alongside the memory state, see the <b>snapshot</b> family
of commands.</p>

<h3>save-image-define
<a name="save-image-define"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">save-image-define
file xml [{--running | --paused}]</p>

<p style="margin-left:9%; margin-top: 1em">Update the
domain XML that will be used when <i>file</i> is later used
in the <b>restore</b> command. The <i>xml</i> argument must
be a file name containing the alternative XML, with changes
only in the host-specific portions of the domain XML. For
example, it can be used to account for file naming
differences resulting from creating disk snapshots of
underlying storage after the guest was saved.</p>

<p style="margin-left:9%; margin-top: 1em">The save image
records whether the domain should be restored to a running
or paused state. Normally, this command does not alter the
recorded state; passing either the <i>--running</i> or
<i>--paused</i> flag will allow overriding which state the
<b>restore</b> should use.</p>

<h3>save-image-dumpxml
<a name="save-image-dumpxml"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">save-image-dumpxml
[--security-info] [--xpath EXPRESSION] [--wrap] file</p>

<p style="margin-left:9%; margin-top: 1em">Extract the
domain XML that was in effect at the time the saved state
file <i>file</i> was created with the <b>save</b> command.
Using <i>--security-info</i> will also include security
sensitive information.</p>

<p style="margin-left:9%; margin-top: 1em">If the
<b>--xpath</b> argument provides an XPath expression, it
will be evaluated against the output XML and only those
matching nodes will be printed. The default behaviour is to
print each matching node as a standalone document, however,
for ease of additional processing, the <b>--wrap</b>
argument will cause the matching node to be wrapped in a
common root node.</p>

<h3>save-image-edit
<a name="save-image-edit"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">save-image-edit
file [{--running | --paused}]</p>

<p style="margin-left:9%; margin-top: 1em">Edit the XML
configuration associated with a saved state file <i>file</i>
created by the <b>save</b> command.</p>

<p style="margin-left:9%; margin-top: 1em">The save image
records whether the domain should be restored to a running
or paused state. Normally, this command does not alter the
recorded state; passing either the <i>--running</i> or
<i>--paused</i> flag will allow overriding which state the
<b>restore</b> should use.</p>

<p style="margin-left:9%; margin-top: 1em">This is
equivalent to:</p>

<p style="margin-left:13%; margin-top: 1em">virsh
save-image-dumpxml state-file &gt; state-file.xml <br>
vi state-file.xml (or make changes with your other text
editor) <br>
virsh save-image-define state-file state-file-xml</p>

<p style="margin-left:9%; margin-top: 1em">except that it
does some error checking.</p>

<p style="margin-left:9%; margin-top: 1em">The editor used
can be supplied by the <b>$VISUAL</b> or <b>$EDITOR</b>
environment variables, and defaults to <b>vi</b>.</p>

<h3>schedinfo
<a name="schedinfo"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">schedinfo
domain [[--config] [--live] | [--current]] [[--set]
parameter=value]... <br>
schedinfo [--weight number] [--cap number] domain</p>

<p style="margin-left:9%; margin-top: 1em">Allows you to
show (and set) the domain scheduler parameters. The
parameters available for each hypervisor are:</p>

<p style="margin-left:9%; margin-top: 1em">LXC (posix
scheduler) : cpu_shares, vcpu_period, vcpu_quota</p>

<p style="margin-left:9%; margin-top: 1em">QEMU/KVM (posix
scheduler): cpu_shares, vcpu_period, vcpu_quota,
emulator_period, emulator_quota, global_period,
global_quota, iothread_period, iothread_quota</p>

<p style="margin-left:9%; margin-top: 1em">Xen (credit
scheduler): weight, cap</p>

<p style="margin-left:9%; margin-top: 1em">ESX (allocation
scheduler): reservation, limit, shares</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, set scheduler information of a running guest.
If <i>--config</i> is specified, affect the next start of a
persistent guest. If <i>--current</i> is specified, it is
equivalent to either <i>--live</i> or <i>--config</i>,
depending on the current state of the guest.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Note</b>: The
cpu_shares parameter has a valid value range of 2-262144
with cgroups v1, 1-10000 with cgroups v2.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Note</b>: The
weight and cap parameters are defined only for the
XEN_CREDIT scheduler.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Note</b>: The
vcpu_period, emulator_period, and iothread_period parameters
have a valid value range of 1000-1000000 or 0, and the
vcpu_quota, emulator_quota, and iothread_quota parameters
have a valid value range of 1000-17592186044415 or less than
0. The value 0 for either parameter is the same as not
specifying that parameter.</p>

<h3>screenshot
<a name="screenshot"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">screenshot
domain [imagefilepath] [--screen screenID]</p>

<p style="margin-left:9%; margin-top: 1em">Takes a
screenshot of a current domain console and stores it into a
file. Optionally, if the hypervisor supports more displays
for a domain, <i>screenID</i> allows specifying which screen
will be captured. It is the sequential number of screen. In
case of multiple graphics cards, heads are enumerated before
devices, e.g. having two graphics cards, both with four
heads, screen ID 5 addresses the second head on the second
card.</p>

<h3>send-key
<a name="send-key"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">send-key domain
[--codeset codeset] [--holdtime holdtime] keycode...</p>

<p style="margin-left:9%; margin-top: 1em">Parse the
<i>keycode</i> sequence as keystrokes to send to
<i>domain</i>. Each <i>keycode</i> can either be a numeric
value or a symbolic name from the corresponding codeset. If
<i>--holdtime</i> is given, each keystroke will be held for
that many milliseconds. The default codeset is <b>linux</b>,
but use of the <i>--codeset</i> option allows other codesets
to be chosen.</p>

<p style="margin-left:9%; margin-top: 1em">If multiple
keycodes are specified, they are all sent simultaneously to
the guest, and they may be received in random order. If you
need distinct keypresses, you must use multiple send-key
invocations.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>linux</b></p></td>
<td width="82%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The numeric
values are those defined by the Linux generic input event
subsystem. The symbolic names match the corresponding Linux
key constant macro names.</p>

<p style="margin-left:12%; margin-top: 1em">See
virkeycode-linux(7) and virkeyname-linux(7)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="2%">


<p style="margin-top: 1em"><b>xt</b></p></td>
<td width="86%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The numeric
values are those defined by the original XT keyboard
controller. No symbolic names are provided</p>

<p style="margin-left:12%; margin-top: 1em">See
virkeycode-xt(7)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>atset1</b></p></td>
<td width="81%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The numeric
values are those defined by the AT keyboard controller, set
1 (aka XT compatible set). Extended keycoes from
<b>atset1</b> may differ from extended keycodes in the
<b>xt</b> codeset. No symbolic names are provided</p>

<p style="margin-left:12%; margin-top: 1em">See
virkeycode-atset1(7)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>atset2</b></p></td>
<td width="81%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The numeric
values are those defined by the AT keyboard controller, set
2. No symbolic names are provided</p>

<p style="margin-left:12%; margin-top: 1em">See
virkeycode-atset2(7)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>atset3</b></p></td>
<td width="81%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The numeric
values are those defined by the AT keyboard controller, set
3 (aka PS/2 compatible set). No symbolic names are
provided</p>

<p style="margin-left:12%; margin-top: 1em">See
virkeycode-atset3(7)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="5%">


<p style="margin-top: 1em"><b>os_x</b></p></td>
<td width="83%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The numeric
values are those defined by the macOS keyboard input
subsystem. The symbolic names match the corresponding macOS
key constant macro names</p>

<p style="margin-left:12%; margin-top: 1em">See
virkeycode-osx(7) and virkeyname-osx(7)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>xt_kbd</b></p></td>
<td width="81%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The numeric
values are those defined by the Linux KBD device. These are
a variant on the original XT codeset, but often with
different encoding for extended keycodes. No symbolic names
are provided.</p>

<p style="margin-left:12%; margin-top: 1em">See
virkeycode-xtkbd(7)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>win32</b></p></td>
<td width="82%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The numeric
values are those defined by the Win32 keyboard input
subsystem. The symbolic names match the corresponding Win32
key constant macro names</p>

<p style="margin-left:12%; margin-top: 1em">See
virkeycode-win32(7) and virkeyname-win32(7)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>usb</b></p></td>
<td width="85%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The numeric
values are those defined by the USB HID specification for
keyboard input. No symbolic names are provided</p>

<p style="margin-left:12%; margin-top: 1em">See
virkeycode-usb(7)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="5%">


<p style="margin-top: 1em"><b>qnum</b></p></td>
<td width="83%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The numeric
values are those defined by the QNUM extension for sending
raw keycodes. These are a variant on the XT codeset, but
extended keycodes have the low bit of the second byte set,
instead of the high bit of the first byte. No symbolic names
are provided.</p>

<p style="margin-left:12%; margin-top: 1em">See
virkeycode-qnum(7)</p>


<p style="margin-left:9%; margin-top: 1em"><b>Examples:</b></p>

<p style="margin-left:13%; margin-top: 1em"># send three
strokes 'k', 'e', 'y', using xt codeset. these <br>
# are all pressed simultaneously and may be received by the
guest <br>
# in random order <br>
virsh send-key dom --codeset xt 37 18 21</p>

<p style="margin-left:13%; margin-top: 1em"># send one
stroke 'right-ctrl+C' <br>
virsh send-key dom KEY_RIGHTCTRL KEY_C</p>

<p style="margin-left:13%; margin-top: 1em"># send a tab,
held for 1 second <br>
virsh send-key --holdtime 1000 0xf</p>

<h3>send-process-signal
<a name="send-process-signal"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">send-process-signal
domain-id pid signame</p>

<p style="margin-left:9%; margin-top: 1em">Send a signal
<i>signame</i> to the process identified by <i>pid</i>
running in the virtual domain <i>domain-id</i>. The
<i>pid</i> is a process ID in the virtual domain
namespace.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>signame</i> argument may be either an integer signal
constant number, or one of the symbolic names:</p>


<p style="margin-left:13%; margin-top: 1em">&quot;nop&quot;,
&quot;hup&quot;, &quot;int&quot;, &quot;quit&quot;,
&quot;ill&quot;, <br>
&quot;trap&quot;, &quot;abrt&quot;, &quot;bus&quot;,
&quot;fpe&quot;, &quot;kill&quot;, <br>
&quot;usr1&quot;, &quot;segv&quot;, &quot;usr2&quot;,
&quot;pipe&quot;, &quot;alrm&quot;, <br>
&quot;term&quot;, &quot;stkflt&quot;, &quot;chld&quot;,
&quot;cont&quot;, &quot;stop&quot;, <br>
&quot;tstp&quot;, &quot;ttin&quot;, &quot;ttou&quot;,
&quot;urg&quot;, &quot;xcpu&quot;, <br>
&quot;xfsz&quot;, &quot;vtalrm&quot;, &quot;prof&quot;,
&quot;winch&quot;, &quot;poll&quot;, <br>
&quot;pwr&quot;, &quot;sys&quot;, &quot;rt0&quot;,
&quot;rt1&quot;, &quot;rt2&quot;, &quot;rt3&quot;, <br>
&quot;rt4&quot;, &quot;rt5&quot;, &quot;rt6&quot;,
&quot;rt7&quot;, &quot;rt8&quot;, &quot;rt9&quot;, <br>
&quot;rt10&quot;, &quot;rt11&quot;, &quot;rt12&quot;,
&quot;rt13&quot;, &quot;rt14&quot;, &quot;rt15&quot;, <br>
&quot;rt16&quot;, &quot;rt17&quot;, &quot;rt18&quot;,
&quot;rt19&quot;, &quot;rt20&quot;, &quot;rt21&quot;, <br>
&quot;rt22&quot;, &quot;rt23&quot;, &quot;rt24&quot;,
&quot;rt25&quot;, &quot;rt26&quot;, &quot;rt27&quot;, <br>
&quot;rt28&quot;, &quot;rt29&quot;, &quot;rt30&quot;,
&quot;rt31&quot;, &quot;rt32&quot;</p>

<p style="margin-left:9%; margin-top: 1em">The symbol name
may optionally be prefixed with <b>sig</b> or <b>sig_</b>
and may be in uppercase or lowercase.</p>


<p style="margin-left:9%; margin-top: 1em"><b>Examples:</b></p>

<p style="margin-left:13%; margin-top: 1em">virsh
send-process-signal myguest 1 15 <br>
virsh send-process-signal myguest 1 term <br>
virsh send-process-signal myguest 1 sigterm <br>
virsh send-process-signal myguest 1 SIG_HUP</p>

<h3>set-lifecycle-action
<a name="set-lifecycle-action"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">set-lifecycle-action
domain type action <br>
[[--config] [--live] | [--current]]</p>

<p style="margin-left:9%; margin-top: 1em">Set the
lifecycle <i>action</i> for specified lifecycle <i>type</i>.
The valid types are &quot;poweroff&quot;, &quot;reboot&quot;
and &quot;crash&quot;, and for each of them valid
<i>action</i> is one of &quot;destroy&quot;,
&quot;restart&quot;, &quot;rename-restart&quot;,
&quot;preserve&quot;. For <i>type</i> &quot;crash&quot;,
additional actions &quot;coredump-destroy&quot; and
&quot;coredump-restart&quot; are supported.</p>

<h3>set-user-password
<a name="set-user-password"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">set-user-password
domain user password [--encrypted]</p>

<p style="margin-left:9%; margin-top: 1em">Set the password
for the <i>user</i> account in the guest domain.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--encrypted</i> is specified, the password is assumed to
be already encrypted by the method required by the guest
OS.</p>

<p style="margin-left:9%; margin-top: 1em">For QEMU/KVM,
this requires the guest agent to be configured and
running.</p>

<h3>set-user-sshkeys
<a name="set-user-sshkeys"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">set-user-sshkeys
domain user [--file FILE] [{--reset | --remove}]</p>

<p style="margin-left:9%; margin-top: 1em">Append keys read
from <i>FILE</i> into <i>user</i>'s SSH authorized keys file
in the guest <i>domain</i>. In the <i>FILE</i> keys must be
on separate lines and each line must follow authorized keys
format as defined by <i>sshd(8)</i>.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--reset</i> is specified, then the guest authorized keys
file content is removed before appending new keys. As a
special case, if <i>--reset</i> is provided and no
<i>FILE</i> was provided then no new keys are added and the
authorized keys file is cleared out.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--remove</i> is specified, then instead of adding any new
keys then keys read from <i>FILE</i> are removed from the
authorized keys file. It is not considered an error if the
key does not exist in the file.</p>

<h3>setmaxmem
<a name="setmaxmem"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">setmaxmem
domain size [[--config] [--live] | [--current]]</p>

<p style="margin-left:9%; margin-top: 1em">Change the
maximum memory allocation limit for a guest domain. If
<i>--live</i> is specified, affect a running guest. If
<i>--config</i> is specified, affect the next start of a
persistent guest. If <i>--current</i> is specified, it is
equivalent to either <i>--live</i> or <i>--config</i>,
depending on the current state of the guest. Both
<i>--live</i> and <i>--config</i> flags may be given, but
<i>--current</i> is exclusive. If no flag is specified,
behavior is different depending on hypervisor.</p>

<p style="margin-left:9%; margin-top: 1em">Some hypervisors
such as QEMU/KVM don't support live changes (especially
increasing) of the maximum memory limit. Even persistent
configuration changes might not be performed with some
hypervisors/configuration (e.g. on NUMA enabled domains on
QEMU). For complex configuration changes use command
<b>edit</b> instead).</p>

<p style="margin-left:9%; margin-top: 1em"><i>size</i> is a
scaled integer (see <b>NOTES</b> above); it defaults to
kibibytes (blocks of 1024 bytes) unless you provide a suffix
(and the older option name <i>--kilobytes</i> is available
as a deprecated synonym) . Libvirt rounds up to the nearest
kibibyte. Some hypervisors require a larger granularity than
KiB, and requests that are not an even multiple will be
rounded up. For example, vSphere/ESX rounds the parameter up
to mebibytes (1024 kibibytes).</p>

<h3>setmem
<a name="setmem"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">setmem domain
size [[--config] [--live] | [--current]]</p>

<p style="margin-left:9%; margin-top: 1em">Change the
memory allocation for a guest domain. If <i>--live</i> is
specified, perform a memory balloon of a running guest. If
<i>--config</i> is specified, affect the next start of a
persistent guest. If <i>--current</i> is specified, it is
equivalent to either <i>--live</i> or <i>--config</i>,
depending on the current state of the guest. Both
<i>--live</i> and <i>--config</i> flags may be given, but
<i>--current</i> is exclusive. If no flag is specified,
behavior is different depending on hypervisor.</p>

<p style="margin-left:9%; margin-top: 1em"><i>size</i> is a
scaled integer (see <b>NOTES</b> above); it defaults to
kibibytes (blocks of 1024 bytes) unless you provide a suffix
(and the older option name <i>--kilobytes</i> is available
as a deprecated synonym) . Libvirt rounds up to the nearest
kibibyte. Some hypervisors require a larger granularity than
KiB, and requests that are not an even multiple will be
rounded up. For example, vSphere/ESX rounds the parameter up
to mebibytes (1024 kibibytes).</p>

<p style="margin-left:9%; margin-top: 1em">For Xen, you can
only adjust the memory of a running domain if the domain is
paravirtualized or running the PV balloon driver.</p>

<p style="margin-left:9%; margin-top: 1em">For LXC, the
value being set is the cgroups value for limit_in_bytes or
the maximum amount of user memory (including file cache).
When viewing memory inside the container, this is the
/proc/meminfo &quot;MemTotal&quot; value. When viewing the
value from the host, use the <b>virsh memtune</b> command.
In order to view the current memory in use and the maximum
value allowed to set memory, use the <b>virsh dominfo</b>
command.</p>

<h3>setvcpus
<a name="setvcpus"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">setvcpus domain
count [--maximum] [[--config] [--live] | [--current]]
[--guest] [--hotpluggable]</p>

<p style="margin-left:9%; margin-top: 1em">Change the
number of virtual CPUs active in a guest domain. By default,
this command works on active guest domains. To change the
settings for an inactive guest domain, use the
<i>--config</i> flag.</p>

<p style="margin-left:9%; margin-top: 1em">The <i>count</i>
value may be limited by host, hypervisor, or a limit coming
from the original description of the guest domain. For Xen,
you can only adjust the virtual CPUs of a running domain if
the domain is paravirtualized.</p>

<p style="margin-left:9%; margin-top: 1em">If the
<i>--config</i> flag is specified, the change is made to the
stored XML configuration for the guest domain, and will only
take effect when the guest domain is next started.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, the guest domain must be active, and the
change takes place immediately. Both the <i>--config</i> and
<i>--live</i> flags may be specified together if supported
by the hypervisor. If this command is run before the guest
has finished booting, the guest may fail to process the
change.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--current</i> is specified, it is equivalent to either
<i>--live</i> or <i>--config</i>, depending on the current
state of the guest.</p>

<p style="margin-left:9%; margin-top: 1em">When no flags
are given, the <i>--live</i> flag is assumed and the guest
domain must be active. In this situation it is up to the
hypervisor whether the <i>--config</i> flag is also assumed,
and therefore whether the XML configuration is adjusted to
make the change persistent.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--guest</i> is specified, then the count of cpus is
modified in the guest instead of the hypervisor. This flag
is usable only for live domains and may require guest agent
to be configured in the guest.</p>

<p style="margin-left:9%; margin-top: 1em">To allow adding
vcpus to persistent definitions that can be later
hotunplugged after the domain is booted it is necessary to
specify the <i>--hotpluggable</i> flag. Vcpus added to live
domains supporting vcpu unplug are automatically marked as
hotpluggable.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--maximum</i> flag controls the maximum number of virtual
cpus that can be hot-plugged the next time the domain is
booted. As such, it must only be used with the
<i>--config</i> flag, and not with the <i>--live</i> or the
<i>--current</i> flag. Note that it may not be possible to
change the maximum vcpu count if the processor topology is
specified for the guest.</p>

<h3>setvcpu
<a name="setvcpu"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">setvcpu domain
vcpulist [--enable] | [--disable] <br>
[[--live] [--config] | [--current]]</p>

<p style="margin-left:9%; margin-top: 1em">Change state of
individual vCPUs using hot(un)plug mechanism.</p>

<p style="margin-left:9%; margin-top: 1em">See
<b>vcpupin</b> for information on format of <i>vcpulist</i>.
Hypervisor drivers may require that <i>vcpulist</i> contains
exactly vCPUs belonging to one hotpluggable entity. This is
usually just a single vCPU but certain architectures such as
ppc64 require a full core to be specified at once.</p>

<p style="margin-left:9%; margin-top: 1em">Note that
hypervisors may refuse to disable certain vcpus such as vcpu
0 or others.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, affect a running domain. If <i>--config</i> is
specified, affect the next startup of a persistent guest. If
<i>--current</i> is specified, it is equivalent to either
<i>--live</i> or <i>--config</i>, depending on the current
state of the guest. This is the default. Both <i>--live</i>
and <i>--config</i> flags may be given, but <i>--current</i>
is exclusive.</p>

<h3>shutdown
<a name="shutdown"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">shutdown domain
[--mode MODE-LIST]</p>

<p style="margin-left:9%; margin-top: 1em">Gracefully shuts
down a domain. This coordinates with the domain OS to
perform graceful shutdown, so there is no guarantee that it
will succeed, and may take a variable length of time
depending on what services must be shutdown in the
domain.</p>

<p style="margin-left:9%; margin-top: 1em">The exact
behavior of a domain when it shuts down is set by the
<i>on_poweroff</i> parameter in the domain's XML
definition.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>domain</i>
is transient, then the metadata of any snapshots and
checkpoints will be lost once the guest stops running, but
the underlying contents still exist, and a new domain with
the same name and UUID can restore the snapshot metadata
with <b>snapshot-create</b>, and the checkpoint metadata
with <b>checkpoint-create</b>.</p>

<p style="margin-left:9%; margin-top: 1em">By default the
hypervisor will try to pick a suitable shutdown method. To
specify an alternative method, the <i>--mode</i> parameter
can specify a comma separated list which includes
<b>acpi</b>, <b>agent</b>, <b>initctl</b>, <b>signal</b> and
<b>paravirt</b>. The order in which drivers will try each
mode is undefined, and not related to the order specified to
virsh. For strict control over ordering, use a single mode
at a time and repeat the command.</p>

<h3>start
<a name="start"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">start
domain-name-or-uuid [--console] [--paused] <br>
[--autodestroy] [--bypass-cache] [--force-boot] <br>
[--pass-fds N,M,...] [--reset-nvram]</p>

<p style="margin-left:9%; margin-top: 1em">Start a
(previously defined) inactive domain, either from the last
<b>managedsave</b> state, or via a fresh boot if no
managedsave state is present. The domain will be paused if
the <i>--paused</i> option is used and supported by the
driver; otherwise it will be running. If <i>--console</i> is
requested, attach to the console after creation. If
<i>--autodestroy</i> is requested, then the guest will be
automatically destroyed when virsh closes its connection to
libvirt, or otherwise exits. If <i>--bypass-cache</i> is
specified, and managedsave state exists, the restore will
avoid the file system cache, although this may slow down the
operation. If <i>--force-boot</i> is specified, then any
managedsave state is discarded and a fresh boot occurs.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--pass-fds</i> is specified, the argument is a comma
separated list of open file descriptors which should be pass
on into the guest. The file descriptors will be re-numbered
in the guest, starting from 3. This is only supported with
container based virtualization.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--reset-nvram</i> is specified, any existing NVRAM file
will be deleted and re-initialized from its pristine
template.</p>

<h3>suspend
<a name="suspend"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">suspend
domain</p>

<p style="margin-left:9%; margin-top: 1em">Suspend a
running domain. It is kept in memory but won't be scheduled
anymore.</p>

<h3>ttyconsole
<a name="ttyconsole"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">ttyconsole
domain</p>

<p style="margin-left:9%; margin-top: 1em">Output the
device used for the TTY console of the domain. If the
information is not available the processes will provide an
exit code of 1.</p>

<h3>undefine
<a name="undefine"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">undefine domain
[--managed-save] [--snapshots-metadata] <br>
[--checkpoints-metadata] [--nvram] [--keep-nvram] <br>
[ {--storage volumes | --remove-all-storage <br>
[--delete-storage-volume-snapshots]} --wipe-storage] <br>
[--tpm] [--keep-tpm]</p>

<p style="margin-left:9%; margin-top: 1em">Undefine a
domain. If the domain is running, this converts it to a
transient domain, without stopping it. If the domain is
inactive, the domain configuration is removed.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--managed-save</i> flag guarantees that any managed save
image (see the <b>managedsave</b> command) is also cleaned
up. Without the flag, attempts to undefine a domain with a
managed save image will fail.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--snapshots-metadata</i> flag guarantees that any
snapshots (see the <b>snapshot-list</b> command) are also
cleaned up when undefining an inactive domain. Without the
flag, attempts to undefine an inactive domain with snapshot
metadata will fail. If the domain is active, this flag is
ignored.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--checkpoints-metadata</i> flag guarantees that any
checkpoints (see the <b>checkpoint-list</b> command) are
also cleaned up when undefining an inactive domain. Without
the flag, attempts to undefine an inactive domain with
checkpoint metadata will fail. If the domain is active, this
flag is ignored.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--nvram</i>
and <i>--keep-nvram</i> specify accordingly to delete or
keep nvram (/domain/os/nvram/) file. If the domain has an
nvram file and the flags are omitted, the undefine will
fail.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--storage</i> flag takes a parameter <b>volumes</b>,
which is a comma separated list of volume target names or
source paths of storage volumes to be removed along with the
undefined domain. Volumes can be undefined and thus removed
only on inactive domains. Volume deletion is only attempted
after the domain is undefined; if not all of the requested
volumes could be deleted, the error message indicates what
still remains behind. If a volume path is not found in the
domain definition, it's treated as if the volume was
successfully deleted. Only volumes managed by libvirt in
storage pools can be removed this way. Note that this also
removes only the top level image of a backing chain, any
backing stores of the image are kept as they may be shared.
(See <b>domblklist</b> for list of target names associated
to a domain). Example: --storage
vda,/path/to/storage.img</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--remove-all-storage</i> flag specifies that all of the
domain's storage volumes should be deleted as if they were
specified via <i>--storage</i>.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--delete-storage-volume-snapshots</i> (previously
<i>--delete-snapshots</i>) flag specifies that any snapshots
associated with the storage volume should be deleted as
well. Requires the <i>--remove-all-storage</i> flag to be
provided. Not all storage drivers support this option,
presently only rbd. Using this when also removing volumes
handled by a storage driver which does not support the flag
will result in failure.</p>

<p style="margin-left:9%; margin-top: 1em">The flag
<i>--wipe-storage</i> specifies that the storage volumes
should be wiped before removal.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--tpm</i> and
<i>--keep-tpm</i> specify accordingly to delete or keep a
TPM's persistent state directory structure and files. If the
flags are omitted then the persistent_state attribute in the
TPM emulator definition in the domain XML determines whether
the TPM state is kept.</p>

<p style="margin-left:9%; margin-top: 1em">NOTE: For an
inactive domain, the domain name or UUID must be used as the
<i>domain</i>.</p>

<h3>vcpucount
<a name="vcpucount"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">vcpucount
domain [{--maximum | --active} <br>
{--config | --live | --current}] [--guest]</p>

<p style="margin-left:9%; margin-top: 1em">Print
information about the virtual cpu counts of the given
<i>domain</i>. If no flags are specified, all possible
counts are listed in a table; otherwise, the output is
limited to just the numeric value requested. For historical
reasons, the table lists the label &quot;current&quot; on
the rows that can be queried in isolation via the
<i>--active</i> flag, rather than relating to the
<i>--current</i> flag.</p>


<p style="margin-left:9%; margin-top: 1em"><i>--maximum</i>
requests information on the maximum cap of vcpus that a
domain can add via <b>setvcpus</b>, while <i>--active</i>
shows the current usage; these two flags cannot both be
specified. <i>--config</i> requires a persistent guest and
requests information regarding the next time the domain will
be booted, <i>--live</i> requires a running domain and lists
current values, and <i>--current</i> queries according to
the current state of the domain (corresponding to
<i>--live</i> if running, or <i>--config</i> if inactive);
these three flags are mutually exclusive.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--guest</i> is specified, then the count of cpus is
reported from the perspective of the guest. This flag is
usable only for live domains and may require guest agent to
be configured in the guest.</p>

<h3>vcpuinfo
<a name="vcpuinfo"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">vcpuinfo domain
[--pretty]</p>

<p style="margin-left:9%; margin-top: 1em">Returns basic
information about the domain virtual CPUs, like the number
of vCPUs, the running time, the affinity to physical
processors.</p>

<p style="margin-left:9%; margin-top: 1em">With
<i>--pretty</i>, cpu affinities are shown as ranges.</p>


<p style="margin-left:9%; margin-top: 1em"><b>Example:</b></p>

<p style="margin-left:13%; margin-top: 1em">$ virsh
vcpuinfo fedora <br>
VCPU: 0 <br>
CPU: 0 <br>
State: running <br>
CPU time: 7,0s <br>
CPU Affinity: yyyy</p>

<p style="margin-left:13%; margin-top: 1em">VCPU: 1 <br>
CPU: 1 <br>
State: running <br>
CPU time: 0,7s <br>
CPU Affinity: yyyy</p>


<p style="margin-left:9%; margin-top: 1em"><b>STATES</b></p>

<p style="margin-left:9%; margin-top: 1em">The State field
displays the current operating state of a virtual CPU</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>offline</b></p></td>
<td width="79%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The virtual CPU
is offline and not usable by the domain. This state is not
supported by all hypervisors.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>running</b></p></td>
<td width="79%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The virtual CPU
is available to the domain and is operating.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>blocked</b></p></td>
<td width="79%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The virtual CPU
is available to the domain but is waiting for a resource.
This state is not supported by all hypervisors, in which
case <i>running</i> may be reported instead.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="10%">


<p style="margin-top: 1em"><b>no state</b></p></td>
<td width="78%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The virtual CPU
state could not be determined. This could happen if the
hypervisor is newer than virsh.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>N/A</b></p></td>
<td width="85%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">There's no
information about the virtual CPU state available. This can
be the case if the domain is not running or the hypervisor
does not report the virtual CPU state.</p>

<h3>vcpupin
<a name="vcpupin"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">vcpupin domain
[vcpu] [cpulist] [[--live] [--config] | [--current]]</p>

<p style="margin-left:9%; margin-top: 1em">Query or change
the pinning of domain VCPUs to host physical CPUs. To pin a
single <i>vcpu</i>, specify <i>cpulist</i>; otherwise, you
can query one <i>vcpu</i> or omit <i>vcpu</i> to list all at
once.</p>

<p style="margin-left:9%; margin-top: 1em"><i>cpulist</i>
is a list of physical CPU numbers. Its syntax is a comma
separated list and a special markup using '-' and '&#710;'
(ex. '0-4', '0-3,&#710;2') can also be allowed. The '-'
denotes the range and the '&#710;' denotes exclusive. For
pinning the <i>vcpu</i> to all physical cpus specify 'r' as
a <i>cpulist</i>. If <i>--live</i> is specified, affect a
running guest. If <i>--config</i> is specified, affect the
next start of a persistent guest. If <i>--current</i> is
specified, it is equivalent to either <i>--live</i> or
<i>--config</i>, depending on the current state of the
guest. Both <i>--live</i> and <i>--config</i> flags may be
given if <i>cpulist</i> is present, but <i>--current</i> is
exclusive. If no flag is specified, behavior is different
depending on hypervisor.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Note</b>: The
expression is sequentially evaluated, so
&quot;0-15,&#710;8&quot; is identical to
&quot;9-14,0-7,15&quot; but not identical to
&quot;&#710;8,0-15&quot;.</p>

<h3>vncdisplay
<a name="vncdisplay"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">vncdisplay
domain</p>

<p style="margin-left:9%; margin-top: 1em">Output the IP
address and port number for the VNC display. If the
information is not available the processes will provide an
exit code of 1.</p>

<h2>DEVICE COMMANDS
<a name="DEVICE COMMANDS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The following
commands manipulate devices associated to domains. The
<i>domain</i> can be specified as a short integer, a name or
a full UUID. To better understand the values allowed as
options for the command reading the documentation at
&lt;https://libvirt.org/formatdomain.html&gt; on the format
of the device sections to get the most accurate set of
accepted values.</p>

<h3>attach-device
<a name="attach-device"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">attach-device
domain FILE [[[--live] [--config] | [--current]] |
[--persistent]]</p>

<p style="margin-left:9%; margin-top: 1em">Attach a device
to the domain, using a device definition in an XML file
using a device definition element such as &lt;disk&gt; or
&lt;interface&gt; as the top-level element. See the
documentation at
https://libvirt.org/formatdomain.html#elementsDevices
&lt;https://libvirt.org/formatdomain.html#devices&gt; <br>
to learn about libvirt XML format for a device. If
<i>--config</i> is specified the command alters the
persistent guest configuration with the device attach taking
effect the next time libvirt starts the domain. For cdrom
and floppy devices, this command only replaces the media
within an existing device; consider using
<b>update-device</b> for this usage. For passthrough host
devices, see also <b>nodedev-detach</b>, needed if the PCI
device does not use managed mode.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, affect a running domain. If <i>--config</i> is
specified, affect the next startup of a persistent guest. If
<i>--current</i> is specified, it is equivalent to either
<i>--live</i> or <i>--config</i>, depending on the current
state of the guest. Both <i>--live</i> and <i>--config</i>
flags may be given, but <i>--current</i> is exclusive. When
no flag is specified legacy API is used whose behavior
depends on the hypervisor driver.</p>

<p style="margin-left:9%; margin-top: 1em">For
compatibility purposes, <i>--persistent</i> behaves like
<i>--config</i> for an offline domain, and like <i>--live
--config</i> for a running domain.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Note</b>:
using of partial device definition XML files may lead to
unexpected results as some fields may be autogenerated and
thus match devices other than expected.</p>

<h3>attach-disk
<a name="attach-disk"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">attach-disk
domain source target [[[--live] [--config] | <br>
[--current]] | [--persistent]] [--targetbus bus] <br>
[--driver driver] [--subdriver subdriver] [--iothread
iothread] <br>
[--cache cache] [--io io] [--type type] [--alias alias] <br>
[--mode mode] [--sourcetype sourcetype] <br>
[--source-protocol protocol] [--source-host-name
hostname:port] <br>
[--source-host-transport transport] [--source-host-socket
socket] <br>
[--serial serial] [--wwn wwn] [--rawio] [--address address]
<br>
[--multifunction] [--print-xml]</p>

<p style="margin-left:9%; margin-top: 1em">Attach a new
disk device to the domain. <i>source</i> is path for the
files and devices unless <i>--source-protocol</i> is
specified, in which case <i>source</i> is the name of a
network disk. <i>target</i> controls the bus or device under
which the disk is exposed to the guest OS. It indicates the
&quot;logical&quot; device name; the optional
<i>targetbus</i> attribute specifies the type of disk device
to emulate; possible values are driver specific, with
typical values being <i>ide</i>, <i>scsi</i>, <i>virtio</i>,
<i>xen</i>, <i>usb</i>, <i>sata</i>, or <i>sd</i>, if
omitted, the bus type is inferred from the style of the
device name (e.g. a device named 'sda' will typically be
exported using a SCSI bus). <i>driver</i> can be
<i>file</i>, <i>tap</i> or <i>phy</i> for the Xen hypervisor
depending on the kind of access; or <i>qemu</i> for the QEMU
emulator. Further details to the driver can be passed using
<i>subdriver</i>. For Xen <i>subdriver</i> can be
<i>aio</i>, while for QEMU subdriver should match the format
of the disk source, such as <i>raw</i> or <i>qcow2</i>.
Hypervisor default will be used if <i>subdriver</i> is not
specified. However, the default may not be correct, esp. for
QEMU as for security reasons it is configured not to detect
disk formats. <i>type</i> can indicate <i>lun</i>,
<i>cdrom</i> or <i>floppy</i> as alternative to the disk
default, although this use only replaces the media within
the existing virtual cdrom or floppy device; consider using
<b>update-device</b> for this usage instead. <i>alias</i>
can set user supplied alias. <i>mode</i> can specify the two
specific mode <i>readonly</i> or <i>shareable</i>.
<i>sourcetype</i> can indicate the type of source
(block|file|network) <i>cache</i> can be one of
&quot;default&quot;, &quot;none&quot;,
&quot;writethrough&quot;, &quot;writeback&quot;,
&quot;directsync&quot; or &quot;unsafe&quot;. <i>io</i>
controls specific policies on I/O; QEMU guests support
&quot;threads&quot;, &quot;native&quot; and
&quot;io_uring&quot;. <i>iothread</i> is the number within
the range of domain IOThreads to which this disk may be
attached (QEMU only). <i>serial</i> is the serial of disk
device. <i>wwn</i> is the wwn of disk device. <i>rawio</i>
indicates the disk needs rawio capability. <i>address</i> is
the address of disk device in the form of
pci:domain.bus.slot.function, scsi:controller.bus.unit,
ide:controller.bus.unit, usb:bus.port,
sata:controller.bus.unit or ccw:cssid.ssid.devno. Virtio-ccw
devices must have their cssid set to 0xfe.
<i>multifunction</i> indicates specified pci address is a
multifunction pci device address.</p>

<p style="margin-left:9%; margin-top: 1em">There is also
support for using a network disk. As specified, the user can
provide a <i>--source-protocol</i> in which case the
<i>source</i> parameter will be interpreted as the source
name. <i>--source-protocol</i> must be provided if the user
intends to provide a network disk or host information. Host
information can be provided using the tags
<i>--source-host-name</i>, <i>--source-host-transport</i>,
and <i>--source-host-socket</i>, which respectively denote
the name of the host, the host's transport method, and the
socket that the host uses. <i>--source-host-socket</i> and
<i>--source-host-name</i> cannot both be provided, and the
user must provide a <i>--source-host-transport</i> if they
want to provide a <i>--source-host-socket</i>. The
<i>--source-host-name</i> parameter supports host:port
syntax if the user wants to provide a port as well.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--print-xml</i> is specified, then the XML of the disk
that would be attached is printed instead.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, affect a running domain. If <i>--config</i> is
specified, affect the next startup of a persistent guest. If
<i>--current</i> is specified, it is equivalent to either
<i>--live</i> or <i>--config</i>, depending on the current
state of the guest. Both <i>--live</i> and <i>--config</i>
flags may be given, but <i>--current</i> is exclusive. When
no flag is specified legacy API is used whose behavior
depends on the hypervisor driver.</p>

<p style="margin-left:9%; margin-top: 1em">For
compatibility purposes, <i>--persistent</i> behaves like
<i>--config</i> for an offline domain, and like <i>--live
--config</i> for a running domain. Likewise,
<i>--shareable</i> is an alias for <i>--mode
shareable</i>.</p>

<h3>attach-interface
<a name="attach-interface"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">attach-interface
domain type source [[[--live] <br>
[--config] | [--current]] | [--persistent]] <br>
[--target target] [--mac mac] [--script script] [--model
model] <br>
[--inbound average,peak,burst,floor] [--outbound
average,peak,burst] <br>
[--alias alias] [--managed] [--print-xml] <br>
[--source-mode mode]</p>

<p style="margin-left:9%; margin-top: 1em">Attach a new
network interface to the domain.</p>

<p style="margin-left:9%; margin-top: 1em"><b>type</b> can
be one of the:</p>

<p style="margin-left:9%; margin-top: 1em"><i>network</i>
to indicate connection via a libvirt virtual network,</p>

<p style="margin-left:9%; margin-top: 1em"><i>bridge</i> to
indicate connection via a bridge device on the host,</p>

<p style="margin-left:9%; margin-top: 1em"><i>direct</i> to
indicate connection directly to one of the host's network
interfaces or bridges,</p>

<p style="margin-left:9%; margin-top: 1em"><i>hostdev</i>
to indicate connection using a passthrough of PCI device on
the host,</p>


<p style="margin-left:9%; margin-top: 1em"><i>vhostuser</i>
to indicate connection using a virtio transport
protocol.</p>

<p style="margin-left:9%; margin-top: 1em"><b>source</b>
indicates the source of the connection. The source depends
on the type of the interface:</p>

<p style="margin-left:9%; margin-top: 1em"><i>network</i>
name of the virtual network,</p>

<p style="margin-left:9%; margin-top: 1em"><i>bridge</i>
the name of the bridge device,</p>

<p style="margin-left:9%; margin-top: 1em"><i>direct</i>
the name of the host's interface or bridge,</p>

<p style="margin-left:9%; margin-top: 1em"><i>hostdev</i>
the PCI address of the host's interface formatted as
domain:bus:slot.function.</p>


<p style="margin-left:9%; margin-top: 1em"><i>vhostuser</i>
the path to UNIX socket (control plane)</p>

<p style="margin-left:9%; margin-top: 1em"><b>--target</b>
is used to specify the tap/macvtap device to be used to
connect the domain to the source. Names starting with 'vnet'
are considered as auto-generated and are blanked
out/regenerated each time the interface is attached.</p>

<p style="margin-left:9%; margin-top: 1em"><b>--mac</b>
specifies the MAC address of the network interface; if a MAC
address is not given, a new address will be automatically
generated (and stored in the persistent configuration if
&quot;--config&quot; is given on the command line).</p>

<p style="margin-left:9%; margin-top: 1em"><b>--script</b>
is used to specify a path to a custom script to be called
while attaching to a bridge - this will be called instead of
the default script not in addition to it. This is valid only
for interfaces of <i>bridge</i> type and only for Xen
domains.</p>

<p style="margin-left:9%; margin-top: 1em"><b>--model</b>
specifies the network device model to be presented to the
domain.</p>

<p style="margin-left:9%; margin-top: 1em"><b>alias</b> can
set user supplied alias.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--inbound</b>
and <b>--outbound</b> control the bandwidth of the
interface. At least one from the <i>average</i>,
<i>floor</i> pair must be specified. The other two
<i>peak</i> and <i>burst</i> are optional, so
&quot;average,peak&quot;, &quot;average,,burst&quot;,
&quot;average,,,floor&quot;, &quot;average&quot; and
&quot;,,,floor&quot; are also legal. Values for
<i>average</i>, <i>floor</i> and <i>peak</i> are expressed
in kilobytes per second, while <i>burst</i> is expressed in
kilobytes in a single burst at <i>peak</i> speed as
described in the Network XML documentation at <br>

&lt;https://libvirt.org/formatnetwork.html#quality-of-service&gt;
.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--managed</b>
is usable only for <i>hostdev</i> type and tells libvirt
that the interface should be managed, which means detached
and reattached from/to the host by libvirt.</p>


<p style="margin-left:9%; margin-top: 1em"><b>--source-mode</b>
is mandatory for <i>vhostuser</i> interface and accepts
values <i>server</i> and <i>client</i> that control whether
hypervisor waits for the other process to connect, or
initiates connection, respectively.</p>

<p style="margin-left:9%; margin-top: 1em">If
<b>--print-xml</b> is specified, then the XML of the
interface that would be attached is printed instead.</p>

<p style="margin-left:9%; margin-top: 1em">If <b>--live</b>
is specified, affect a running domain. If <b>--config</b> is
specified, affect the next startup of a persistent guest. If
<b>--current</b> is specified, affect the current domain
state, which can either be live or offline. Both
<b>--live</b> and <b>--config</b> flags may be given, but
<b>--current</b> is exclusive. When no flag is specified
legacy API is used whose behavior depends on the hypervisor
driver.</p>

<p style="margin-left:9%; margin-top: 1em">For
compatibility purposes, <b>--persistent</b> behaves like
<b>--config</b> for an offline domain, and like <b>--live
--config</b> for a running domain.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Note</b>: the
optional target value is the name of a device to be created
as the back-end on the node. If not provided a device named
&quot;vnetN&quot; or &quot;vifN&quot; will be created
automatically.</p>

<h3>detach-device
<a name="detach-device"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">detach-device
domain FILE [[[--live] [--config] | <br>
[--current]] | [--persistent]]</p>

<p style="margin-left:9%; margin-top: 1em">Detach a device
from the domain, takes the same kind of XML descriptions as
command <b>attach-device</b>. For passthrough host devices,
see also <b>nodedev-reattach</b>, needed if the device does
not use managed mode.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Note</b>: The
supplied XML description of the device should be as specific
as its definition in the domain XML. The set of attributes
used to match the device are internal to the drivers. Using
a partial definition, or attempting to detach a device that
is not present in the domain XML, but shares some specific
attributes with one that is present, may lead to unexpected
results.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Quirk</b>:
Device unplug is asynchronous in most cases and requires
guest cooperation. This means that it's up to the discretion
of the guest to disallow or delay the unplug arbitrarily. As
the libvirt API used in this command was designed as
synchronous it returns success after some timeout even if
the device was not unplugged yet to allow further
interactions with the domain e.g. if the guest is
unresponsive. Callers which need to make sure that the
device was unplugged can use libvirt events (see virsh
event) to be notified when the device is removed. Note that
the event may arrive before the command returns.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, affect a running domain. If <i>--config</i> is
specified, affect the next startup of a persistent guest. If
<i>--current</i> is specified, it is equivalent to either
<i>--live</i> or <i>--config</i>, depending on the current
state of the guest. Both <i>--live</i> and <i>--config</i>
flags may be given, but <i>--current</i> is exclusive. When
no flag is specified legacy API is used whose behavior
depends on the hypervisor driver.</p>

<p style="margin-left:9%; margin-top: 1em">For
compatibility purposes, <i>--persistent</i> behaves like
<i>--config</i> for an offline domain, and like <i>--live
--config</i> for a running domain.</p>

<p style="margin-left:9%; margin-top: 1em">Note that older
versions of virsh used <i>--config</i> as an alias for
<i>--persistent</i>.</p>

<h3>detach-device-alias
<a name="detach-device-alias"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">detach-device-alias
domain alias [[[--live] [--config] | [--current]]]]</p>

<p style="margin-left:9%; margin-top: 1em">Detach a device
with given <i>alias</i> from the <i>domain</i>. This command
returns successfully after the unplug request was sent to
the hypervisor. The actual removal of the device is notified
asynchronously via libvirt events (see virsh event).</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, affect a running domain. If <i>--config</i> is
specified, affect the next startup of a persistent guest. If
<i>--current</i> is specified, it is equivalent to either
<i>--live</i> or <i>--config</i>, depending on the current
state of the guest. Both <i>--live</i> and <i>--config</i>
flags may be given, but <i>--current</i> is exclusive.</p>

<h3>detach-disk
<a name="detach-disk"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">detach-disk
domain target [[[--live] [--config] | <br>
[--current]] | [--persistent]] [--print-xml]</p>

<p style="margin-left:9%; margin-top: 1em">Detach a disk
device from a domain. The <i>target</i> is the device as
seen from the domain.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, affect a running domain. If <i>--config</i> is
specified, affect the next startup of a persistent guest. If
<i>--current</i> is specified, it is equivalent to either
<i>--live</i> or <i>--config</i>, depending on the current
state of the guest. Both <i>--live</i> and <i>--config</i>
flags may be given, but <i>--current</i> is exclusive. When
no flag is specified legacy API is used whose behavior
depends on the hypervisor driver.</p>

<p style="margin-left:9%; margin-top: 1em">For
compatibility purposes, <i>--persistent</i> behaves like
<i>--config</i> for an offline domain, and like <i>--live
--config</i> for a running domain.</p>

<p style="margin-left:9%; margin-top: 1em">Note that older
versions of virsh used <i>--config</i> as an alias for
<i>--persistent</i>.</p>

<p style="margin-left:9%; margin-top: 1em">If
<b>--print-xml</b> is specified, then the XML which would be
used to detach the disk is printed instead.</p>

<p style="margin-left:9%; margin-top: 1em">Please see
documentation for <b>detach-device</b> for known quirks.</p>

<h3>detach-interface
<a name="detach-interface"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">detach-interface
domain type [--mac mac] <br>
[[[--live] [--config] | [--current]] | [--persistent]]
[--print-xml]</p>

<p style="margin-left:9%; margin-top: 1em">Detach a network
interface from a domain. <i>type</i> can be either
<i>network</i> to indicate a physical network device or
<i>bridge</i> to indicate a bridge to a device. It is
recommended to use the <i>mac</i> option to distinguish
between the interfaces if more than one are present on the
domain.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, affect a running domain. If <i>--config</i> is
specified, affect the next startup of a persistent guest. If
<i>--current</i> is specified, it is equivalent to either
<i>--live</i> or <i>--config</i>, depending on the current
state of the guest. Both <i>--live</i> and <i>--config</i>
flags may be given, but <i>--current</i> is exclusive. When
no flag is specified legacy API is used whose behavior
depends on the hypervisor driver.</p>

<p style="margin-left:9%; margin-top: 1em">For
compatibility purposes, <i>--persistent</i> behaves like
<i>--config</i> for an offline domain, and like <i>--live
--config</i> for a running domain.</p>

<p style="margin-left:9%; margin-top: 1em">Note that older
versions of virsh used <i>--config</i> as an alias for
<i>--persistent</i>.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--print-xml</i> is specified, then the XML used to detach
the interface is printed instead.</p>

<p style="margin-left:9%; margin-top: 1em">Please see
documentation for <b>detach-device</b> for known quirks.</p>

<h3>update-device
<a name="update-device"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">update-device
domain file [--force] [[[--live] <br>
[--config] | [--current]] | [--persistent]]</p>

<p style="margin-left:9%; margin-top: 1em">Update the
characteristics of a device associated with <i>domain</i>,
based on the device definition in an XML <i>file</i>. The
<i>--force</i> option can be used to force device update,
e.g., to eject a CD-ROM even if it is locked/mounted in the
domain. See the documentation at
https://libvirt.org/formatdomain.html#elementsDevices
&lt;https://libvirt.org/formatdomain.html#devices&gt; <br>
to learn about libvirt XML format for a device.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, affect a running domain. If <i>--config</i> is
specified, affect the next startup of a persistent guest. If
<i>--current</i> is specified, it is equivalent to either
<i>--live</i> or <i>--config</i>, depending on the current
state of the guest. Both <i>--live</i> and <i>--config</i>
flags may be given, but <i>--current</i> is exclusive. Not
specifying any flag is the same as specifying
<i>--current</i>.</p>

<p style="margin-left:9%; margin-top: 1em">For
compatibility purposes, <i>--persistent</i> behaves like
<i>--config</i> for an offline domain, and like <i>--live
--config</i> for a running domain.</p>

<p style="margin-left:9%; margin-top: 1em">Note that older
versions of virsh used <i>--config</i> as an alias for
<i>--persistent</i>.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Note</b>:
using of partial device definition XML files may lead to
unexpected results as some fields may be autogenerated and
thus match devices other than expected.</p>

<h3>update-memory-device
<a name="update-memory-device"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">update-memory-device
domain [--print-xml] [[--alias alias] | [--node node]] <br>
[[--live] [--config] | [--current]] <br>
[--requested-size size]</p>

<p style="margin-left:9%; margin-top: 1em">This command
finds <b>&lt;memory/&gt;</b> device inside given
<i>domain</i>, changes requested values and passes updated
device XML to daemon. If <i>--print-xml</i> is specified
then the device is not changed, but the updated device XML
is printed to stdout. If there are more than one
<b>&lt;memory/&gt;</b> devices in <i>domain</i> use
<i>--alias</i> or <i>--node</i> to select the desired
one.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, affect a running domain. If <i>--config</i> is
specified, affect the next startup of a persistent guest. If
<i>--current</i> is specified, it is equivalent to either
<i>--live</i> or <i>--config</i>, depending on the current
state of the guest. Both <i>--live</i> and <i>--config</i>
flags may be given, but <i>--current</i> is exclusive. Not
specifying any flag is the same as specifying
<i>--current</i>.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--requested-size</i> is specified then
<b>&lt;requested/&gt;</b> under memory target is changed to
requested <i>size</i> (as scaled integer, see <b>NOTES</b>
above). It defaults to kibibytes if no suffix is provided.
The option is valid only for <b>virtio-mem</b> memory device
model.</p>

<h3>change-media
<a name="change-media"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">change-media
domain path [--eject] [--insert] <br>
[--update] [source] [--force] [[--live] [--config] | <br>
[--current]] [--print-xml] [--block]</p>

<p style="margin-left:9%; margin-top: 1em">Change media of
CDROM or floppy drive. <i>path</i> can be the
fully-qualified path or the unique target name (&lt;target
dev='hdc'&gt;) of the disk device. <i>source</i> specifies
the path of the media to be inserted or updated. The
<i>--block</i> flag allows setting the backing type in case
a block device is used as media for the CDROM or floppy
drive instead of a file.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--eject</i>
indicates the media will be ejected. <i>--insert</i>
indicates the media will be inserted. <i>source</i> must be
specified. If the device has source (e.g. &lt;source
file='media'&gt;), and <i>source</i> is not specified,
<i>--update</i> is equal to <i>--eject</i>. If the device
has no source, and <i>source</i> is specified,
<i>--update</i> is equal to <i>--insert</i>. If the device
has source, and <i>source</i> is specified, <i>--update</i>
behaves like combination of <i>--eject</i> and
<i>--insert</i>. If none of <i>--eject</i>, <i>--insert</i>,
and <i>--update</i> is specified, <i>--update</i> is used by
default. The <i>--force</i> option can be used to force
media changing. If <i>--live</i> is specified, alter live
configuration of running guest. If <i>--config</i> is
specified, alter persistent configuration, effect observed
on next startup of the guest. <i>--current</i> can be either
or both of <i>live</i> and <i>config</i>, depends on the
hypervisor's implementation. Both <i>--live</i> and
<i>--config</i> flags may be given, but <i>--current</i> is
exclusive. If no flag is specified, behavior is different
depending on hypervisor. If <i>--print-xml</i> is specified,
the XML that would be used to change media is printed
instead of changing the media.</p>

<h3>dom-fd-associate
<a name="dom-fd-associate"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">dom-fd-associate
domain --name FDGROUPNAME --pass-fds M,N,.... <br>
[--seclabel-writable] [--seclabel-restore]</p>

<p style="margin-left:9%; margin-top: 1em">Associate one or
more fds described via <i>--pass-fds</i> argument to
<i>domain</i> as <i>--name</i>. The lifetime of the passed
fd group is the same as the connection, thus exiting virsh
un-registers them afterwards.</p>

<p style="margin-left:9%; margin-top: 1em">By default
security labels are applied if needed but they are not
restored after use to avoid keeping them open unnecessarily.
Best-effort security label restore may be requested by using
the <i>--seclabel-restore</i> flag.</p>

<h2>NODEDEV COMMANDS
<a name="NODEDEV COMMANDS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The following
commands manipulate host devices that are intended to be
passed through to guest domains via &lt;hostdev&gt; elements
in a domain's &lt;devices&gt; section. A node device key is
generally specified by the bus name followed by its address,
using underscores between all components, such as
pci_0000_00_02_1, usb_1_5_3, or net_eth1_00_27_13_6a_fe_00.
The <b>nodedev-list</b> gives the full list of host devices
that are known to libvirt, although this includes devices
that cannot be assigned to a guest (for example, attempting
to detach the PCI device that controls the host's hard disk
controller where the guest's disk images live could cause
the host system to lock up or reboot).</p>

<p style="margin-left:9%; margin-top: 1em">For more
information on node device definition see: <br>
&lt;https://libvirt.org/formatnode.html&gt; .</p>

<p style="margin-left:9%; margin-top: 1em">Passthrough
devices cannot be simultaneously used by the host and its
guest domains, nor by multiple active guests at once. If the
&lt;hostdev&gt; description of a PCI device includes the
attribute <b>managed='yes'</b>, and the hypervisor driver
supports it, then the device is in managed mode, and
attempts to use that passthrough device in an active guest
will automatically behave as if <b>nodedev-detach</b> (guest
start, device hot-plug) and <b>nodedev-reattach</b> (guest
stop, device hot-unplug) were called at the right points. If
a PCI device is not marked as managed, then it must manually
be detached before guests can use it, and manually
reattached to be returned to the host. Also, if a device is
manually detached, then the host does not regain control of
the device without a matching reattach, even if the guests
use the device in managed mode.</p>

<h3>nodedev-create
<a name="nodedev-create"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">nodedev-create
FILE [--validate]</p>

<p style="margin-left:9%; margin-top: 1em">Create a device
on the host node that can then be assigned to virtual
machines. Normally, libvirt is able to automatically
determine which host nodes are available for use, but this
allows registration of host hardware that libvirt did not
automatically detect. <i>file</i> contains xml for a
top-level &lt;device&gt; description of a node device.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--validate</i> is specified, validates the format of the
XML document against an internal RNG schema.</p>

<h3>nodedev-update
<a name="nodedev-update"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">nodedev-update
device FILE [[--live] [--config] | [--current]]</p>

<p style="margin-left:9%; margin-top: 1em">Update a device
on the host. <i>device</i> can be either device name or wwn
pair in &quot;wwnn,wwpn&quot; format (only works for vHBA
currently). <i>file</i> contains xml for a top-level
&lt;device&gt; description of the node device.
<i>--current</i> can be either or both of <i>live</i> and
<i>config</i>, depends on the hypervisor's implementation.
Both <i>--live</i> and <i>--config</i> flags may be given,
but <i>--current</i> is exclusive. If no flag is specified,
behavior is different depending on hypervisor.</p>

<h3>nodedev-destroy
<a name="nodedev-destroy"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">nodedev-destroy
device</p>

<p style="margin-left:9%; margin-top: 1em">Destroy (stop) a
device on the host. <i>device</i> can be either device name
or wwn pair in &quot;wwnn,wwpn&quot; format (only works for
vHBA currently). Note that this makes libvirt quit managing
a host device, and may even make that device unusable by the
rest of the physical host until a reboot.</p>

<h3>nodedev-define
<a name="nodedev-define"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">nodedev-define
FILE [--validate]</p>

<p style="margin-left:9%; margin-top: 1em">Define an
inactive persistent device or modify an existing persistent
one from the XML <i>FILE</i>.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--validate</i> is specified, validates the format of the
XML document against an internal RNG schema.</p>

<h3>nodedev-undefine
<a name="nodedev-undefine"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">nodedev-undefine
device</p>

<p style="margin-left:9%; margin-top: 1em">Undefine the
configuration for a persistent device. If the device is
active, make it transient.</p>

<h3>nodedev-start
<a name="nodedev-start"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">nodedev-start
device</p>

<p style="margin-left:9%; margin-top: 1em">Start a
(previously defined) inactive device.</p>

<h3>nodedev-detach
<a name="nodedev-detach"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">nodedev-detach
nodedev [--driver backend_driver]</p>

<p style="margin-left:9%; margin-top: 1em">Detach
<i>nodedev</i> from the host driver and bind it to a special
driver that provides the API needed by the hypervisor for
assigning the device to a virtual machine (using
&lt;hostdev&gt; in the domain XML definition). This is
reversed with <b>nodedev-reattach</b>, and is done
automatically by the hypervisor driver for managed devices
(those devices with &quot;managed='yes'&quot; in their XML
definition).</p>

<p style="margin-left:9%; margin-top: 1em">Different
hypervisors expect the device being assigned to be bound to
different drivers. For example, QEMU's &quot;vfio&quot;
backend requires the device to be bound to the driver
&quot;vfio-pci&quot; or to a &quot;VFIO variant&quot; driver
(this is a driver that supports the full API provided by
vfio-pci, plus some other APIs to support things like live
migration). The <i>--driver</i> parameter can be used to
specify a particular driver (e.g. a device-specific VFIO
variant driver) the device should be bound to. When
<i>--driver</i> is omitted, the default driver for the
hypervisor is used (&quot;vfio-pci&quot; for QEMU,
&quot;pciback&quot; for Xen).</p>

<h3>nodedev-dumpxml
<a name="nodedev-dumpxml"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">nodedev-dumpxml
[--inactive] [--xpath EXPRESSION] [--wrap] device</p>

<p style="margin-left:9%; margin-top: 1em">Dump a
&lt;device&gt; XML representation for the given node device,
including such information as the device name, which bus
owns the device, the vendor and product id, and any
capabilities of the device usable by libvirt (such as
whether device reset is supported). <i>device</i> can be
either device name or wwn pair in &quot;wwnn,wwpn&quot;
format (only works for HBA). An additional option affecting
the XML dump may be used. <i>--inactive</i> tells virsh to
dump the node device configuration that will be used on next
start of the node device as opposed to the current node
device configuration.</p>

<p style="margin-left:9%; margin-top: 1em">If the
<b>--xpath</b> argument provides an XPath expression, it
will be evaluated against the output XML and only those
matching nodes will be printed. The default behaviour is to
print each matching node as a standalone document, however,
for ease of additional processing, the <b>--wrap</b>
argument will cause the matching node to be wrapped in a
common root node.</p>

<h3>nodedev-info
<a name="nodedev-info"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">nodedev-info
device</p>

<p style="margin-left:9%; margin-top: 1em">Returns basic
information about the <i>device</i> object.</p>

<h3>nodedev-list
<a name="nodedev-list"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">nodedev-list
[--cap capability] [--tree] [--inactive | --all]
[--persistent | --transient]</p>

<p style="margin-left:9%; margin-top: 1em">List all of the
devices available on the node that are known by libvirt.
<i>cap</i> is used to filter the list by capability types,
the types must be separated by comma, e.g. --cap pci,scsi.
Valid capability types include 'system', 'pci',
'usb_device', 'usb', 'net', 'scsi_host', 'scsi_target',
'scsi', 'storage', 'fc_host', 'vports', 'scsi_generic',
'drm', 'mdev', 'mdev_types', 'ccw', 'ccwgroup',
'ccwgroup_member', 'css', 'ap_card', 'ap_queue',
'ap_matrix'. By default, only active devices are listed.
<i>--inactive</i> is used to list only inactive devices, and
<i>--all</i> is used to list both active and inactive
devices. <i>--persistent</i> is used to list only persistent
devices, and <i>--transient</i> is used to list only
transient devices. Not providing <i>--persistent</i> or
<i>--transient</i> will list all devices unless filtered
otherwise. <i>--transient</i> is mutually exclusive with
<i>--persistent</i> and <i>--inactive</i>. If <i>--tree</i>
is used, the output is formatted in a tree representing
parents of each node. <i>--tree</i> is mutually exclusive
with all other options but <i>--all</i>.</p>

<h3>nodedev-reattach
<a name="nodedev-reattach"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">nodedev-reattach
nodedev</p>

<p style="margin-left:9%; margin-top: 1em">Declare that
<i>nodedev</i> is no longer in use by any guests, and that
the host can resume normal use of the device. This is done
automatically for PCI devices in managed mode and USB
devices, but must be done explicitly to match any explicit
<b>nodedev-detach</b>.</p>

<h3>nodedev-reset
<a name="nodedev-reset"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">nodedev-reset
nodedev</p>

<p style="margin-left:9%; margin-top: 1em">Trigger a device
reset for <i>nodedev</i>, useful prior to transferring a
node device between guest passthrough or the host. Libvirt
will often do this action implicitly when required, but this
command allows an explicit reset when needed.</p>

<h3>nodedev-event
<a name="nodedev-event"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">nodedev-event
{[nodedev] event [--loop] [--timeout seconds] [--timestamp]
| --list}</p>

<p style="margin-left:9%; margin-top: 1em">Wait for a class
of node device events to occur, and print appropriate
details of events as they happen. The events can optionally
be filtered by <i>nodedev</i>. Using <i>--list</i> as the
only argument will provide a list of possible <i>event</i>
values known by this client, although the connection might
not allow registering for all these events.</p>

<p style="margin-left:9%; margin-top: 1em">By default, this
command is one-shot, and returns success once an event
occurs; you can send SIGINT (usually via <b>Ctrl-C</b>) to
quit immediately. If <i>--timeout</i> is specified, the
command gives up waiting for events after <i>seconds</i>
have elapsed. With <i>--loop</i>, the command prints all
events until a timeout or interrupt key.</p>

<p style="margin-left:9%; margin-top: 1em">When
<i>--timestamp</i> is used, a human-readable timestamp will
be printed before the event.</p>

<h3>nodedev-autostart
<a name="nodedev-autostart"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">nodedev-autostart
[--disable] device</p>

<p style="margin-left:9%; margin-top: 1em">Configure a
device to be automatically started when the host machine
boots or the parent device becomes available. With
<i>--disable</i>, the device will be set to manual mode and
will no longer be automatically started by the host. This
command is only supported for persistently-defined mediated
devices.</p>

<h2>VIRTUAL NETWORK COMMANDS
<a name="VIRTUAL NETWORK COMMANDS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The following
commands manipulate networks. Libvirt has the capability to
define virtual networks which can then be used by domains
and linked to actual network devices. For more detailed
information about this feature see the documentation at
&lt;https://libvirt.org/formatnetwork.html&gt; . Many of the
commands for virtual networks are similar to the ones used
for domains, but the way to name a virtual network is either
by its name or UUID.</p>

<h3>net-autostart
<a name="net-autostart"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">net-autostart
network [--disable]</p>

<p style="margin-left:9%; margin-top: 1em">Configure a
virtual network to be automatically started at boot. The
<i>--disable</i> option disable autostarting.</p>

<h3>net-create
<a name="net-create"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">net-create file
[--validate]</p>

<p style="margin-left:9%; margin-top: 1em">Create a
transient (temporary) virtual network from an XML
<i>file</i> and instantiate (start) the network. See the
documentation at
&lt;https://libvirt.org/formatnetwork.html&gt; to get a
description of the XML network format used by libvirt.</p>

<p style="margin-left:9%; margin-top: 1em">Optionally, the
format of the input XML file can be validated against an
internal RNG schema with <i>--validate</i>.</p>

<h3>net-define
<a name="net-define"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">net-define file
[--validate]</p>

<p style="margin-left:9%; margin-top: 1em">Define an
inactive persistent virtual network or modify an existing
persistent one from the XML <i>file</i>. Optionally, the
format of the input XML file can be validated against an
internal RNG schema with <i>--validate</i>.</p>

<h3>net-desc
<a name="net-desc"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">net-desc
network [[--live] [--config] | <br>
[--current]] [--title] [--edit] [--new-desc <br>
New description or title message]</p>

<p style="margin-left:9%; margin-top: 1em">Show or modify
description and title of a network. These values are user
fields that allow storing arbitrary textual data to allow
easy identification of networks. Title should be short,
although it's not enforced. (See also <b>net-metadata</b>
that works with XML based network metadata.)</p>

<p style="margin-left:9%; margin-top: 1em">Flags
<i>--live</i> or <i>--config</i> select whether this command
works on live or persistent definitions of the network. If
both <i>--live</i> and <i>--config</i> are specified, the
<i>--config</i> option takes precedence on getting the
current description and both live configuration and config
are updated while setting the description. <i>--current</i>
is exclusive and implied if none of these was specified.</p>

<p style="margin-left:9%; margin-top: 1em">Flag
<i>--edit</i> specifies that an editor with the contents of
current description or title should be opened and the
contents saved back afterwards.</p>

<p style="margin-left:9%; margin-top: 1em">Flag
<i>--title</i> selects operation on the title field instead
of description.</p>

<p style="margin-left:9%; margin-top: 1em">If neither of
<i>--edit</i> and <i>--new-desc</i> are specified the note
or description is displayed instead of being modified.</p>

<h3>net-destroy
<a name="net-destroy"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">net-destroy
network</p>

<p style="margin-left:9%; margin-top: 1em">Destroy (stop) a
given transient or persistent virtual network specified by
its name or UUID. This takes effect immediately.</p>

<h3>net-dumpxml
<a name="net-dumpxml"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">net-dumpxml
[--inactive] [--xpath EXPRESSION] [--wrap] network</p>

<p style="margin-left:9%; margin-top: 1em">Output the
virtual network information as an XML dump to stdout. If
<i>--inactive</i> is specified, then physical functions are
not expanded into their associated virtual functions.</p>

<p style="margin-left:9%; margin-top: 1em">If the
<b>--xpath</b> argument provides an XPath expression, it
will be evaluated against the output XML and only those
matching nodes will be printed. The default behaviour is to
print each matching node as a standalone document, however,
for ease of additional processing, the <b>--wrap</b>
argument will cause the matching node to be wrapped in a
common root node.</p>

<h3>net-edit
<a name="net-edit"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">net-edit
network</p>

<p style="margin-left:9%; margin-top: 1em">Edit the XML
configuration file for a network.</p>

<p style="margin-left:9%; margin-top: 1em">This is
equivalent to:</p>

<p style="margin-left:13%; margin-top: 1em">virsh
net-dumpxml --inactive network &gt; network.xml <br>
vi network.xml (or make changes with your other text editor)
<br>
virsh net-define network.xml</p>

<p style="margin-left:9%; margin-top: 1em">except that it
does some error checking.</p>

<p style="margin-left:9%; margin-top: 1em">The editor used
can be supplied by the <b>$VISUAL</b> or <b>$EDITOR</b>
environment variables, and defaults to <b>vi</b>.</p>

<h3>net-event
<a name="net-event"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">net-event
{[network] event [--loop] [--timeout seconds] [--timestamp]
| --list}</p>

<p style="margin-left:9%; margin-top: 1em">Wait for a class
of network events to occur, and print appropriate details of
events as they happen. The events can optionally be filtered
by <i>network</i>. Using <i>--list</i> as the only argument
will provide a list of possible <i>event</i> values known by
this client, although the connection might not allow
registering for all these events.</p>

<p style="margin-left:9%; margin-top: 1em">By default, this
command is one-shot, and returns success once an event
occurs; you can send SIGINT (usually via <b>Ctrl-C</b>) to
quit immediately. If <i>--timeout</i> is specified, the
command gives up waiting for events after <i>seconds</i>
have elapsed. With <i>--loop</i>, the command prints all
events until a timeout or interrupt key.</p>

<p style="margin-left:9%; margin-top: 1em">When
<i>--timestamp</i> is used, a human-readable timestamp will
be printed before the event.</p>

<h3>net-info
<a name="net-info"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">net-info
network</p>

<p style="margin-left:9%; margin-top: 1em">Returns basic
information about the <i>network</i> object.</p>

<h3>net-list
<a name="net-list"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">net-list
[--inactive | --all] <br>
{ [--table] | --name | --uuid } <br>
[--persistent] [&lt;--transient&gt;] <br>
[--autostart] [&lt;--no-autostart&gt;] <br>
[--title]</p>

<p style="margin-left:9%; margin-top: 1em">Returns the list
of active networks, if <i>--all</i> is specified this will
also include defined but inactive networks, if
<i>--inactive</i> is specified only the inactive ones will
be listed. You may also want to filter the returned networks
by <i>--persistent</i> to list the persistent ones,
<i>--transient</i> to list the transient ones,
<i>--autostart</i> to list the ones with autostart enabled,
and <i>--no-autostart</i> to list the ones with autostart
disabled.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--name</i>
is specified, network names are printed instead of the table
formatted one per line. If <i>--uuid</i> is specified
network's UUID's are printed instead of names. Flag
<i>--table</i> specifies that the legacy table-formatted
output should be used. This is the default. All of these are
mutually exclusive.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--title</i> is specified, then the short network
description (title) is printed in an extra column. This flag
is usable only with the default <i>--table</i> output.</p>

<p style="margin-left:9%; margin-top: 1em">NOTE: When
talking to older servers, this command is forced to use a
series of API calls with an inherent race, where a pool
might not be listed or might appear more than once if it
changed state between calls while the list was being
collected. Newer servers do not have this problem.</p>

<h3>net-metadata
<a name="net-metadata"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">net-metadata
network [[--live] [--config] | [--current]] <br>
[--edit] [uri] [key] [set] [--remove]</p>

<p style="margin-left:9%; margin-top: 1em">Show or modify
custom XML metadata of a network. The metadata is a user
defined XML that allows storing arbitrary XML data in the
network definition. Multiple separate custom metadata pieces
can be stored in the network XML. The pieces are identified
by a private XML namespace provided via the <i>uri</i>
argument. (See also <b>net-desc</b> that works with textual
metadata of a network, such as title and description.)</p>

<p style="margin-left:9%; margin-top: 1em">Flags
<i>--live</i> or <i>--config</i> select whether this command
works on live or persistent definitions of the network. If
both <i>--live</i> and <i>--config</i> are specified, the
<i>--config</i> option takes precedence on getting the
current description and both live configuration and config
are updated while setting the description. <i>--current</i>
is exclusive and implied if none of these was specified.</p>

<p style="margin-left:9%; margin-top: 1em">Flag
<i>--remove</i> specifies that the metadata element
specified by the <i>uri</i> argument should be removed
rather than updated.</p>

<p style="margin-left:9%; margin-top: 1em">Flag
<i>--edit</i> specifies that an editor with the metadata
identified by the <i>uri</i> argument should be opened and
the contents saved back afterwards. Otherwise the new
contents can be provided via the <i>set</i> argument.</p>

<p style="margin-left:9%; margin-top: 1em">When setting
metadata via <i>--edit</i> or <i>set</i> the <i>key</i>
argument must be specified and is used to prefix the custom
elements to bind them to the private namespace.</p>

<p style="margin-left:9%; margin-top: 1em">If neither of
<i>--edit</i> and <i>set</i> are specified the XML metadata
corresponding to the <i>uri</i> namespace is displayed
instead of being modified.</p>

<h3>net-name
<a name="net-name"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">net-name
network-UUID</p>

<p style="margin-left:9%; margin-top: 1em">Convert a
network UUID to network name.</p>

<h3>net-start
<a name="net-start"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">net-start
network</p>

<p style="margin-left:9%; margin-top: 1em">Start a
(previously defined) inactive network.</p>

<h3>net-undefine
<a name="net-undefine"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">net-undefine
network</p>

<p style="margin-left:9%; margin-top: 1em">Undefine the
configuration for a persistent network. If the network is
active, make it transient.</p>

<h3>net-uuid
<a name="net-uuid"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">net-uuid
network-name</p>

<p style="margin-left:9%; margin-top: 1em">Convert a
network name to network UUID.</p>

<h3>net-update
<a name="net-update"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">net-update
network command section xml <br>
[--parent-index index] [[--live] [--config] |
[--current]]</p>

<p style="margin-left:9%; margin-top: 1em">Update the given
section of an existing network definition, with the changes
optionally taking effect immediately, without needing to
destroy and re-start the network.</p>

<p style="margin-left:9%; margin-top: 1em"><i>command</i>
is one of &quot;add-first&quot;, &quot;add-last&quot;,
&quot;add&quot; (a synonym for add-last),
&quot;delete&quot;, or &quot;modify&quot;.</p>

<p style="margin-left:9%; margin-top: 1em"><i>section</i>
is one of &quot;bridge&quot;, &quot;domain&quot;,
&quot;ip&quot;, &quot;ip-dhcp-host&quot;,
&quot;ip-dhcp-range&quot;, &quot;forward&quot;,
&quot;forward-interface&quot;, &quot;forward-pf&quot;,
&quot;portgroup&quot;, &quot;dns-host&quot;,
&quot;dns-txt&quot;, or &quot;dns-srv&quot;, each section
being named by a concatenation of the xml element hierarchy
leading to the element being changed. For example,
&quot;ip-dhcp-host&quot; will change a &lt;host&gt; element
that is contained inside a &lt;dhcp&gt; element inside an
&lt;ip&gt; element of the network.</p>

<p style="margin-left:9%; margin-top: 1em"><i>xml</i> is
either the text of a complete xml element of the type being
changed (e.g. &quot;&lt;host mac=&quot;00:11:22:33:44:55'
ip='1.2.3.4'/&gt;&quot;, or the name of a file that contains
a complete xml element. Disambiguation is done by looking at
the first character of the provided text - if the first
character is &quot;&lt;&quot;, it is xml text, if the first
character is not &quot;&lt;&quot;, it is the name of a file
that contains the xml text to be used.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--parent-index</i> option is used to specify which of
several parent elements the requested element is in
(0-based). For example, a dhcp &lt;host&gt; element could be
in any one of multiple &lt;ip&gt; elements in the network;
if a parent-index isn't provided, the &quot;most
appropriate&quot; &lt;ip&gt; element will be selected
(usually the only one that already has a &lt;dhcp&gt;
element), but if <i>--parent-index</i> is given, that
particular instance of &lt;ip&gt; will get the
modification.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, affect a running network. If <i>--config</i>
is specified, affect the next startup of a persistent
network. If <i>--current</i> is specified, it is equivalent
to either <i>--live</i> or <i>--config</i>, depending on the
current state of the guest. Both <i>--live</i> and
<i>--config</i> flags may be given, but <i>--current</i> is
exclusive. Not specifying any flag is the same as specifying
<i>--current</i>.</p>

<h3>net-dhcp-leases
<a name="net-dhcp-leases"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">net-dhcp-leases
network [mac]</p>

<p style="margin-left:9%; margin-top: 1em">Get a list of
dhcp leases for all network interfaces connected to the
given virtual <i>network</i> or limited output just for one
interface if <i>mac</i> is specified.</p>

<h2>NETWORK PORT COMMANDS
<a name="NETWORK PORT COMMANDS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The following
commands manipulate network ports. Libvirt virtual networks
have ports created when a virtual machine has a virtual
network interface added. In general there should be no need
to use any of the commands here, since the hypervisor
drivers run these commands are the right point in a virtual
machine's lifecycle. They can be useful for debugging
problems and / or recovering from bugs / stale state.</p>

<h3>net-port-list
<a name="net-port-list"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">net-port-list {
[--table] | --uuid } network</p>

<p style="margin-left:9%; margin-top: 1em">List all network
ports recorded against the network.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--uuid</i>
is specified network ports' UUID's are printed instead of a
table. Flag <i>--table</i> specifies that the legacy
table-formatted output should be used. This is the default.
All of these are mutually exclusive.</p>

<h3>net-port-create
<a name="net-port-create"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">net-port-create
network file [--validate]</p>

<p style="margin-left:9%; margin-top: 1em">Allocate a new
network port reserving resources based on the port
description. Optionally, the format of the input XML file
can be validated against an internal RNG schema with
<i>--validate</i>.</p>

<h3>net-port-dumpxml
<a name="net-port-dumpxml"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">net-port-dumpxml
[--xpath EXPRESSION] [--wrap] network port</p>

<p style="margin-left:9%; margin-top: 1em">Output the
network port information as an XML dump to stdout.</p>

<p style="margin-left:9%; margin-top: 1em">If the
<b>--xpath</b> argument provides an XPath expression, it
will be evaluated against the output XML and only those
matching nodes will be printed. The default behaviour is to
print each matching node as a standalone document, however,
for ease of additional processing, the <b>--wrap</b>
argument will cause the matching node to be wrapped in a
common root node.</p>

<h3>net-port-delete
<a name="net-port-delete"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">net-port-delete
network port</p>

<p style="margin-left:9%; margin-top: 1em">Delete record of
the network port and release its resources</p>

<h2>INTERFACE COMMANDS
<a name="INTERFACE COMMANDS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The following
commands manipulate host interfaces. Often, these host
interfaces can then be used by name within domain
&lt;interface&gt; elements (such as a system-created bridge
interface), but there is no requirement that host interfaces
be tied to any particular guest configuration XML at
all.</p>

<p style="margin-left:9%; margin-top: 1em">Many of the
commands for host interfaces are similar to the ones used
for domains, and the way to name an interface is either by
its name or its MAC address. However, using a MAC address
for an <i>iface</i> argument only works when that address is
unique (if an interface and a bridge share the same MAC
address, which is often the case, then using that MAC
address results in an error due to ambiguity, and you must
resort to a name instead).</p>

<h3>iface-bridge
<a name="iface-bridge"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">iface-bridge
interface bridge [--no-stp] [delay] [--no-start]</p>

<p style="margin-left:9%; margin-top: 1em">Create a bridge
device named <i>bridge</i>, and attach the existing network
device <i>interface</i> to the new bridge. The new bridge
defaults to starting immediately, with STP enabled and a
delay of 0; these settings can be altered with
<i>--no-stp</i>, <i>--no-start</i>, and an integer number of
seconds for <i>delay</i>. All IP address configuration of
<i>interface</i> will be moved to the new bridge device.</p>

<p style="margin-left:9%; margin-top: 1em">See also
<b>iface-unbridge</b> for undoing this operation.</p>

<h3>iface-define
<a name="iface-define"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">iface-define
file [--validate]</p>

<p style="margin-left:9%; margin-top: 1em">Define an
inactive persistent physical host interface or modify an
existing persistent one from the XML <i>file</i>.
Optionally, the format of the input XML file can be
validated against an internal RNG schema with
<i>--validate</i>.</p>

<h3>iface-destroy
<a name="iface-destroy"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">iface-destroy
interface</p>

<p style="margin-left:9%; margin-top: 1em">Destroy (stop) a
given host interface, such as by running &quot;if-down&quot;
to disable that interface from active use. This takes effect
immediately.</p>

<h3>iface-dumpxml
<a name="iface-dumpxml"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">iface-dumpxml
[--inactive] [--xpath EXPRESSION] [--wrap] interface</p>

<p style="margin-left:9%; margin-top: 1em">Output the host
interface information as an XML dump to stdout. If
<i>--inactive</i> is specified, then the output reflects the
persistent state of the interface that will be used the next
time it is started.</p>

<p style="margin-left:9%; margin-top: 1em">If the
<b>--xpath</b> argument provides an XPath expression, it
will be evaluated against the output XML and only those
matching nodes will be printed. The default behaviour is to
print each matching node as a standalone document, however,
for ease of additional processing, the <b>--wrap</b>
argument will cause the matching node to be wrapped in a
common root node.</p>

<h3>iface-edit
<a name="iface-edit"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">iface-edit
interface</p>

<p style="margin-left:9%; margin-top: 1em">Edit the XML
configuration file for a host interface.</p>

<p style="margin-left:9%; margin-top: 1em">This is
equivalent to:</p>

<p style="margin-left:13%; margin-top: 1em">virsh
iface-dumpxml iface &gt; iface.xml <br>
vi iface.xml (or make changes with your other text editor)
<br>
virsh iface-define iface.xml</p>

<p style="margin-left:9%; margin-top: 1em">except that it
does some error checking.</p>

<p style="margin-left:9%; margin-top: 1em">The editor used
can be supplied by the <b>$VISUAL</b> or <b>$EDITOR</b>
environment variables, and defaults to <b>vi</b>.</p>

<h3>iface-list
<a name="iface-list"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">iface-list
[--inactive | --all]</p>

<p style="margin-left:9%; margin-top: 1em">Returns the list
of active host interfaces. If <i>--all</i> is specified this
will also include defined but inactive interfaces. If
<i>--inactive</i> is specified only the inactive ones will
be listed.</p>

<h3>iface-name
<a name="iface-name"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">iface-name
interface</p>

<p style="margin-left:9%; margin-top: 1em">Convert a host
interface MAC to interface name, if the MAC address is
unique among the host's interfaces.</p>


<p style="margin-left:9%; margin-top: 1em"><i>interface</i>
specifies the interface MAC address.</p>

<h3>iface-mac
<a name="iface-mac"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">iface-mac
interface</p>

<p style="margin-left:9%; margin-top: 1em">Convert a host
interface name to MAC address.</p>


<p style="margin-left:9%; margin-top: 1em"><i>interface</i>
specifies the interface name.</p>

<h3>iface-start
<a name="iface-start"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">iface-start
interface</p>

<p style="margin-left:9%; margin-top: 1em">Start a
(previously defined) host interface, such as by running
&quot;if-up&quot;.</p>

<h3>iface-unbridge
<a name="iface-unbridge"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">iface-unbridge
bridge [--no-start]</p>

<p style="margin-left:9%; margin-top: 1em">Tear down a
bridge device named <i>bridge</i>, releasing its underlying
interface back to normal usage, and moving all IP address
configuration from the bridge device to the underlying
device. The underlying interface is restarted unless
<i>--no-start</i> is present; this flag is present for
symmetry, but generally not recommended.</p>

<p style="margin-left:9%; margin-top: 1em">See also
<b>iface-bridge</b> for creating a bridge.</p>

<h3>iface-undefine
<a name="iface-undefine"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">iface-undefine
interface</p>

<p style="margin-left:9%; margin-top: 1em">Undefine the
configuration for an inactive host interface.</p>

<h3>iface-begin
<a name="iface-begin"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">iface-begin</p>

<p style="margin-left:9%; margin-top: 1em">Create a
snapshot of current host interface settings, which can later
be committed (<i>iface-commit</i>) or restored
(<i>iface-rollback</i>). If a snapshot already exists, then
this command will fail until the previous snapshot has been
committed or restored. Undefined behavior results if any
external changes are made to host interfaces outside of the
libvirt API between the beginning of a snapshot and its
eventual commit or rollback.</p>

<h3>iface-commit
<a name="iface-commit"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">iface-commit</p>

<p style="margin-left:9%; margin-top: 1em">Declare all
changes since the last <i>iface-begin</i> as working, and
delete the rollback point. If no interface snapshot has
already been started, then this command will fail.</p>

<h3>iface-rollback
<a name="iface-rollback"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">iface-rollback</p>

<p style="margin-left:9%; margin-top: 1em">Revert all host
interface settings back to the state recorded in the last
<i>iface-begin</i>. If no interface snapshot has already
been started, then this command will fail. Rebooting the
host also serves as an implicit rollback point.</p>

<h2>STORAGE POOL COMMANDS
<a name="STORAGE POOL COMMANDS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The following
commands manipulate storage pools. Libvirt has the
capability to manage various storage solutions, including
files, raw partitions, and domain-specific formats, used to
provide the storage volumes visible as devices within
virtual machines. For more detailed information about this
feature, see the documentation at <br>
&lt;https://libvirt.org/formatstorage.html&gt; . Many of the
commands for pools are similar to the ones used for
domains.</p>

<h3>find-storage-pool-sources
<a name="find-storage-pool-sources"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">find-storage-pool-sources
type [srcSpec]</p>

<p style="margin-left:9%; margin-top: 1em">Returns XML
describing all possible available storage pool sources that
could be used to create or define a storage pool of a given
<i>type</i>. If <i>srcSpec</i> is provided, it is a file
that contains XML to further restrict the query for
pools.</p>

<p style="margin-left:9%; margin-top: 1em">Not all storage
pools support discovery in this manner. Furthermore, for
those that do support discovery, only specific XML elements
are required in order to return valid data, while other
elements and even attributes of some elements are ignored
since they are not necessary to find the pool based on the
search criteria. The following lists the supported
<i>type</i> options and the expected minimal XML elements
used to perform the search.</p>

<p style="margin-left:9%; margin-top: 1em">For a
&quot;netfs&quot; or &quot;gluster&quot; pool, the minimal
expected XML required is the &lt;host&gt; element with a
&quot;name&quot; attribute describing the IP address or
hostname to be used to find the pool. The &quot;port&quot;
attribute will be ignored as will any other provided XML
elements in <i>srcSpec</i>.</p>

<p style="margin-left:9%; margin-top: 1em">For a
&quot;logical&quot; pool, the contents of the <i>srcSpec</i>
file are ignored, although if provided the file must at
least exist.</p>

<p style="margin-left:9%; margin-top: 1em">For an
&quot;iscsi&quot; or &quot;iscsi-direct&quot; pool, the
minimal expect XML required is the &lt;host&gt; element with
a &quot;name&quot; attribute describing the IP address or
hostname to be used to find the pool (the iSCSI server
address). Optionally, the &quot;port&quot; attribute may be
provided, although it will default to 3260. Optionally, an
&lt;initiator&gt; XML element with a &quot;name&quot;
attribute may be provided to further restrict the iSCSI
target search to a specific initiator for multi-iqn iSCSI
storage pools.</p>

<h3>find-pool-sources-as
<a name="find-pool-sources-as"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">find-storage-pool-sources-as
type [host] [port] [initiator]</p>

<p style="margin-left:9%; margin-top: 1em">Rather than
providing <i>srcSpec</i> XML file for
<b>find-storage-pool-sources</b> use this command option in
order to have virsh generate the query XML file using the
optional arguments. The command will return the same output
XML as <b>find-storage-pool-sources</b>.</p>

<p style="margin-left:9%; margin-top: 1em">Use <i>host</i>
to describe a specific host to use for networked storage,
such as netfs, gluster, and iscsi <i>type</i> pools.</p>

<p style="margin-left:9%; margin-top: 1em">Use <i>port</i>
to further restrict which networked port to utilize for the
connection if required by the specific storage backend, such
as iscsi.</p>

<p style="margin-left:9%; margin-top: 1em">Use
<i>initiator</i> to further restrict the iscsi <i>type</i>
pool searches to specific target initiators.</p>

<h3>pool-autostart
<a name="pool-autostart"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">pool-autostart
pool-or-uuid [--disable]</p>

<p style="margin-left:9%; margin-top: 1em">Configure
whether <i>pool</i> should automatically start at boot.</p>

<h3>pool-build
<a name="pool-build"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">pool-build
pool-or-uuid [--overwrite] [--no-overwrite]</p>

<p style="margin-left:9%; margin-top: 1em">Build a given
pool.</p>

<p style="margin-left:9%; margin-top: 1em">Options
<i>--overwrite</i> and <i>--no-overwrite</i> can only be
used for <b>pool-build</b> a filesystem, disk, or logical
pool.</p>

<p style="margin-left:9%; margin-top: 1em">For a file
system pool if neither flag is specified, then
<b>pool-build</b> just makes the target path directory and
no attempt to run mkfs on the target volume device. If
<i>--no-overwrite</i> is specified, it probes to determine
if a filesystem already exists on the target device,
returning an error if one exists or using mkfs to format the
target device if not. If <i>--overwrite</i> is specified,
mkfs is always executed and any existing data on the target
device is overwritten unconditionally.</p>

<p style="margin-left:9%; margin-top: 1em">For a disk pool,
if neither of them is specified or <i>--no-overwrite</i> is
specified, <b>pool-build</b> will check the target volume
device for existing filesystems or partitions before
attempting to write a new label on the target volume device.
If the target volume device already has a label, the command
will fail. If <i>--overwrite</i> is specified, then no check
will be made on the target volume device prior to writing a
new label. Writing of the label uses the pool source format
type or &quot;dos&quot; if not specified.</p>

<p style="margin-left:9%; margin-top: 1em">For a logical
pool, if neither of them is specified or
<i>--no-overwrite</i> is specified, <b>pool-build</b> will
check the target volume devices for existing filesystems or
partitions before attempting to initialize and format each
device for usage by the logical pool. If any target volume
device already has a label, the command will fail. If
<i>--overwrite</i> is specified, then no check will be made
on the target volume devices prior to initializing and
formatting each device. Once all the target volume devices
are properly formatted via pvcreate, the volume group will
be created using all the devices.</p>

<h3>pool-create
<a name="pool-create"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">pool-create
file [--build] [[--overwrite] | [--no-overwrite]]</p>

<p style="margin-left:9%; margin-top: 1em">Create and start
a pool object from the XML <i>file</i>.</p>


<p style="margin-left:9%; margin-top: 1em">[<i>--build</i>]
[[<i>--overwrite</i>] | [<i>--no-overwrite</i>]] perform a
<b>pool-build</b> after creation in order to remove the need
for a follow-up command to build the pool. The
<i>--overwrite</i> and <i>--no-overwrite</i> flags follow
the same rules as <b>pool-build</b>. If just <i>--build</i>
is provided, then <b>pool-build</b> is called with no
flags.</p>

<h3>pool-create-as
<a name="pool-create-as"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">pool-create-as
name type <br>
[--source-host hostname] [--source-path path] [--source-dev
path] <br>
[--source-name name] [--target path] [--source-format
format] <br>
[--source-initiator initiator-iqn] <br>
[--auth-type authtype --auth-username username <br>
[--secret-usage usage | --secret-uuid uuid]] <br>
[--source-protocol-ver ver] <br>
[[--adapter-name name] | [--adapter-wwnn wwnn --adapter-wwpn
wwpn] <br>
[--adapter-parent parent | <br>
--adapter-parent-wwnn parent_wwnn adapter-parent-wwpn
parent_wwpn | <br>
--adapter-parent-fabric-wwn parent_fabric_wwn]] <br>
[--build] [[--overwrite] | [--no-overwrite]]
[--print-xml]</p>

<p style="margin-left:9%; margin-top: 1em">Create and start
a pool object <i>name</i> from the raw parameters. If
<i>--print-xml</i> is specified, then print the XML of the
pool object without creating the pool. Otherwise, the pool
has the specified <i>type</i>. When using
<b>pool-create-as</b> for a pool of <i>type</i>
&quot;disk&quot;, the existing partitions found on the
<i>--source-dev path</i> will be used to populate the disk
pool. Therefore, it is suggested to use
<b>pool-define-as</b> and <b>pool-build</b> with the
<i>--overwrite</i> in order to properly initialize the disk
pool.</p>


<p style="margin-left:9%; margin-top: 1em">[<i>--source-host
hostname</i>] provides the source hostname for pools backed
by storage from a remote server (pool types netfs, iscsi,
rbd, sheepdog, gluster).</p>


<p style="margin-left:9%; margin-top: 1em">[<i>--source-path
path</i>] provides the source directory path for pools
backed by directories (pool type dir).</p>


<p style="margin-left:9%; margin-top: 1em">[<i>--source-dev
path</i>] provides the source path for pools backed by
physical devices (pool types fs, logical, disk, iscsi,
zfs).</p>


<p style="margin-left:9%; margin-top: 1em">[<i>--source-name
name</i>] provides the source name for pools backed by
storage from a named element (pool types logical, rbd,
sheepdog, gluster).</p>

<p style="margin-left:9%; margin-top: 1em">[<i>--target
path</i>] is the path for the mapping of the storage pool
into the host file system.</p>


<p style="margin-left:9%; margin-top: 1em">[<i>--source-format
format</i>] provides information about the format of the
pool (pool types fs, netfs, disk, logical).</p>


<p style="margin-left:9%; margin-top: 1em">[<i>--source-initiator
initiator-iqn</i>] provides the initiator iqn for iscsi
connection of the pool (pool type iscsi-direct).</p>

<p style="margin-left:9%; margin-top: 1em">[<i>--auth-type
authtype --auth-username username</i> [<i>--secret-usage
usage</i> | <i>--secret-uuid uuid</i>]] provides the
elements required to generate authentication credentials for
the storage pool. The <i>authtype</i> is either chap for
iscsi <i>type</i> pools or ceph for rbd <i>type</i> pools.
Either the secret <i>usage</i> or <i>uuid</i> value may be
provided, but not both.</p>


<p style="margin-left:9%; margin-top: 1em">[<i>--source-protocol-ver
ver</i>] provides the NFS protocol version number used to
contact the server's NFS service via nfs mount option
'nfsvers=n'. It is expect the <i>ver</i> value is an
unsigned integer.</p>


<p style="margin-left:9%; margin-top: 1em">[<i>--adapter-name
name</i>] defines the scsi_hostN adapter name to be used for
the scsi_host adapter type pool.</p>


<p style="margin-left:9%; margin-top: 1em">[<i>--adapter-wwnn
wwnn --adapter-wwpn wwpn</i> [<i>--adapter-parent parent</i>
| <i>--adapter-parent-wwnn parent_wwnn adapter-parent-wwpn
parent_wwpn</i> | <i>--adapter-parent-fabric-wwn
parent_fabric_wwn</i>]] defines the wwnn and wwpn to be used
for the fc_host adapter type pool. Optionally provide the
parent scsi_hostN node device to be used for the vHBA either
by parent name, parent_wwnn and parent_wwpn, or
parent_fabric_wwn. The parent name could change between
reboots if the hardware environment changes, so providing
the parent_wwnn and parent_wwpn ensure usage of the same
physical HBA even if the scsi_hostN node device changes.
Usage of the parent_fabric_wwn allows a bit more flexibility
to choose an HBA on the same storage fabric in order to
define the pool.</p>


<p style="margin-left:9%; margin-top: 1em">[<i>--build</i>]
[[<i>--overwrite</i>] | [<i>--no-overwrite</i>]] perform a
<b>pool-build</b> after creation in order to remove the need
for a follow-up command to build the pool. The
<i>--overwrite</i> and <i>--no-overwrite</i> flags follow
the same rules as <b>pool-build</b>. If just <i>--build</i>
is provided, then <b>pool-build</b> is called with no
flags.</p>

<p style="margin-left:9%; margin-top: 1em">For a
&quot;logical&quot; pool only [<i>--name</i>] needs to be
provided. The [<i>--source-name</i>] if provided must match
the Volume Group name. If not provided, one will be
generated using the [<i>--name</i>]. If provided the
[<i>--target</i>] is ignored and a target source is
generated using the [<i>--source-name</i>] (or as generated
from the [<i>--name</i>]).</p>

<h3>pool-define
<a name="pool-define"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">pool-define
file [--validate]</p>

<p style="margin-left:9%; margin-top: 1em">Define an
inactive persistent storage pool or modify an existing
persistent one from the XML <i>file</i>. Optionally, the
format of the input XML file can be validated against an
internal RNG schema with <i>--validate</i>.</p>

<h3>pool-define-as
<a name="pool-define-as"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">pool-define-as
name type <br>
[--source-host hostname] [--source-path path] [--source-dev
path] <br>
[*--source-name name*] [*--target path*] [*--source-format
format*] <br>
[--source-initiator initiator-iqn] <br>
[*--auth-type authtype* *--auth-username username* <br>
[*--secret-usage usage* | *--secret-uuid uuid*]] <br>
[*--source-protocol-ver ver*] <br>
[[*--adapter-name name*] | [*--adapter-wwnn*
*--adapter-wwpn*] <br>
[*--adapter-parent parent*]] [*--print-xml*]</p>

<p style="margin-left:9%; margin-top: 1em">Create, but do
not start, a pool object <i>name</i> from the raw
parameters. If <i>--print-xml</i> is specified, then print
the XML of the pool object without defining the pool.
Otherwise, the pool has the specified <i>type</i>.</p>

<p style="margin-left:9%; margin-top: 1em">Use the same
arguments as <b>pool-create-as</b>, except for the
<i>--build</i>, <i>--overwrite</i>, and
<i>--no-overwrite</i> options.</p>

<h3>pool-destroy
<a name="pool-destroy"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">pool-destroy
pool-or-uuid</p>

<p style="margin-left:9%; margin-top: 1em">Destroy (stop) a
given <i>pool</i> object. Libvirt will no longer manage the
storage described by the pool object, but the raw data
contained in the pool is not changed, and can be later
recovered with <b>pool-create</b>.</p>

<h3>pool-delete
<a name="pool-delete"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">pool-delete
pool-or-uuid</p>

<p style="margin-left:9%; margin-top: 1em">Destroy the
resources used by a given <i>pool</i> object. This operation
is non-recoverable. The <i>pool</i> object will still exist
after this command, ready for the creation of new storage
volumes.</p>

<h3>pool-dumpxml
<a name="pool-dumpxml"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">pool-dumpxml
[--inactive] [--xpath EXPRESSION] [--wrap] pool-or-uuid</p>

<p style="margin-left:9%; margin-top: 1em">Returns the XML
information about the <i>pool</i> object. <i>--inactive</i>
tells virsh to dump pool configuration that will be used on
next start of the pool as opposed to the current pool
configuration.</p>

<p style="margin-left:9%; margin-top: 1em">If the
<b>--xpath</b> argument provides an XPath expression, it
will be evaluated against the output XML and only those
matching nodes will be printed. The default behaviour is to
print each matching node as a standalone document, however,
for ease of additional processing, the <b>--wrap</b>
argument will cause the matching node to be wrapped in a
common root node.</p>

<h3>pool-edit
<a name="pool-edit"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">pool-edit
pool-or-uuid</p>

<p style="margin-left:9%; margin-top: 1em">Edit the XML
configuration file for a storage pool.</p>

<p style="margin-left:9%; margin-top: 1em">This is
equivalent to:</p>

<p style="margin-left:13%; margin-top: 1em">virsh
pool-dumpxml pool &gt; pool.xml <br>
vi pool.xml (or make changes with your other text editor)
<br>
virsh pool-define pool.xml</p>

<p style="margin-left:9%; margin-top: 1em">except that it
does some error checking.</p>

<p style="margin-left:9%; margin-top: 1em">The editor used
can be supplied by the <b>$VISUAL</b> or <b>$EDITOR</b>
environment variables, and defaults to <b>vi</b>.</p>

<h3>pool-info
<a name="pool-info"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">pool-info
[--bytes] pool-or-uuid</p>

<p style="margin-left:9%; margin-top: 1em">Returns basic
information about the <i>pool</i> object. If <i>--bytes</i>
is specified the sizes of basic info are not converted to
human friendly units.</p>

<h3>pool-list
<a name="pool-list"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">pool-list
[--inactive] [--all] <br>
[--persistent] [--transient] <br>
[--autostart] [--no-autostart] <br>
[[--details] [--uuid] <br>
[--name] [&lt;type&gt;]</p>

<p style="margin-left:9%; margin-top: 1em">List pool
objects known to libvirt. By default, only active pools are
listed; <i>--inactive</i> lists just the inactive pools, and
<i>--all</i> lists all pools.</p>

<p style="margin-left:9%; margin-top: 1em">In addition,
there are several sets of filtering flags.
<i>--persistent</i> is to list the persistent pools,
<i>--transient</i> is to list the transient pools.
<i>--autostart</i> lists the autostarting pools,
<i>--no-autostart</i> lists the pools with autostarting
disabled. If <i>--uuid</i> is specified only pool's UUIDs
are printed. If <i>--name</i> is specified only pool's names
are printed. If both <i>--name</i> and <i>--uuid</i> are
specified, pool's UUID and names are printed side by side
without any header. Option <i>--details</i> is mutually
exclusive with options <i>--uuid</i> and <i>--name</i>.</p>

<p style="margin-left:9%; margin-top: 1em">You may also
want to list pools with specified types using <i>type</i>,
the pool types must be separated by comma, e.g. --type
dir,disk. The valid pool types include 'dir', 'fs', 'netfs',
'logical', 'disk', 'iscsi', 'scsi', 'mpath', 'rbd',
'sheepdog', 'gluster', 'zfs', 'vstorage' and
'iscsi-direct'.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--details</i> option instructs virsh to additionally
display pool persistence and capacity related information
where available.</p>

<p style="margin-left:9%; margin-top: 1em">NOTE: When
talking to older servers, this command is forced to use a
series of API calls with an inherent race, where a pool
might not be listed or might appear more than once if it
changed state between calls while the list was being
collected. Newer servers do not have this problem.</p>

<h3>pool-name
<a name="pool-name"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">pool-name
uuid</p>

<p style="margin-left:9%; margin-top: 1em">Convert the
<i>uuid</i> to a pool name.</p>

<h3>pool-refresh
<a name="pool-refresh"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">pool-refresh
pool-or-uuid</p>

<p style="margin-left:9%; margin-top: 1em">Refresh the list
of volumes contained in <i>pool</i>.</p>

<h3>pool-start
<a name="pool-start"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">pool-start
pool-or-uuid [--build] [[--overwrite] |
[--no-overwrite]]</p>

<p style="margin-left:9%; margin-top: 1em">Start the
storage <i>pool</i>, which is previously defined but
inactive.</p>


<p style="margin-left:9%; margin-top: 1em">[<i>--build</i>]
[[<i>--overwrite</i>] | [<i>--no-overwrite</i>]] perform a
<b>pool-build</b> prior to <b>pool-start</b> to ensure the
pool environment is in an expected state rather than needing
to run the build command prior to startup. The
<i>--overwrite</i> and <i>--no-overwrite</i> flags follow
the same rules as <b>pool-build</b>. If just <i>--build</i>
is provided, then <b>pool-build</b> is called with no
flags.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Note</b>: A
storage pool that relies on remote resources such as an
&quot;iscsi&quot; or a (v)HBA backed &quot;scsi&quot; pool
may need to be refreshed multiple times in order to have all
the volumes detected (see <b>pool-refresh</b>). This is
because the corresponding volume devices may not be present
in the host's filesystem during the initial pool startup or
the current refresh attempt. The number of refresh retries
is dependent upon the network connection and the time the
host takes to export the corresponding devices.</p>

<h3>pool-undefine
<a name="pool-undefine"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">pool-undefine
pool-or-uuid</p>

<p style="margin-left:9%; margin-top: 1em">Undefine the
configuration for an inactive <i>pool</i>.</p>

<h3>pool-uuid
<a name="pool-uuid"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">pool-uuid
pool</p>

<p style="margin-left:9%; margin-top: 1em">Returns the UUID
of the named <i>pool</i>.</p>

<h3>pool-event
<a name="pool-event"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">pool-event
{[pool] event [--loop] [--timeout seconds] [--timestamp] |
--list}</p>

<p style="margin-left:9%; margin-top: 1em">Wait for a class
of storage pool events to occur, and print appropriate
details of events as they happen. The events can optionally
be filtered by <i>pool</i>. Using <i>--list</i> as the only
argument will provide a list of possible <i>event</i> values
known by this client, although the connection might not
allow registering for all these events.</p>

<p style="margin-left:9%; margin-top: 1em">By default, this
command is one-shot, and returns success once an event
occurs; you can send SIGINT (usually via <b>Ctrl-C</b>) to
quit immediately. If <i>--timeout</i> is specified, the
command gives up waiting for events after <i>seconds</i>
have elapsed. With <i>--loop</i>, the command prints all
events until a timeout or interrupt key.</p>

<p style="margin-left:9%; margin-top: 1em">When
<i>--timestamp</i> is used, a human-readable timestamp will
be printed before the event.</p>

<h2>VOLUME COMMANDS
<a name="VOLUME COMMANDS"></a>
</h2>


<h3>vol-create
<a name="vol-create"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">vol-create
pool-or-uuid FILE [--prealloc-metadata] [--validate]</p>

<p style="margin-left:9%; margin-top: 1em">Create a volume
from an XML &lt;file&gt;.</p>


<p style="margin-left:9%; margin-top: 1em"><i>pool-or-uuid</i>
is the name or UUID of the storage pool to create the volume
in.</p>

<p style="margin-left:9%; margin-top: 1em"><i>FILE</i> is
the XML &lt;file&gt; with the volume definition. An easy way
to create the XML &lt;file&gt; is to use the
<b>vol-dumpxml</b> command to obtain the definition of a
pre-existing volume.</p>


<p style="margin-left:9%; margin-top: 1em">[<i>--prealloc-metadata</i>]
preallocate metadata (for qcow2 images which don't support
full allocation). This option creates a sparse image file
with metadata, resulting in higher performance compared to
images with no preallocation and only slightly higher
initial disk space usage.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--validate</i> is specified, validates the format of the
XML document against an internal RNG schema.</p>


<p style="margin-left:9%; margin-top: 1em"><b>Example:</b></p>

<p style="margin-left:13%; margin-top: 1em">virsh
vol-dumpxml --pool storagepool1 appvolume1 &gt;
newvolume.xml <br>
vi newvolume.xml (or make changes with your other text
editor) <br>
virsh vol-create differentstoragepool newvolume.xml</p>

<h3>vol-create-from
<a name="vol-create-from"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">vol-create-from
pool-or-uuid FILE vol-name-or-key-or-path <br>
[--inputpool pool-or-uuid] [--prealloc-metadata] [--reflink]
[--validate]</p>

<p style="margin-left:9%; margin-top: 1em">Create a volume,
using another volume as input.</p>


<p style="margin-left:9%; margin-top: 1em"><i>pool-or-uuid</i>
is the name or UUID of the storage pool to create the volume
in.</p>

<p style="margin-left:9%; margin-top: 1em"><i>FILE</i> is
the XML &lt;file&gt; with the volume definition.</p>


<p style="margin-left:9%; margin-top: 1em"><i>vol-name-or-key-or-path</i>
is the name or key or path of the source volume.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--inputpool
pool-or-uuid</i> is the name or uuid of the storage pool the
source volume is in.</p>


<p style="margin-left:9%; margin-top: 1em">[<i>--prealloc-metadata</i>]
preallocate metadata (for qcow2 images which don't support
full allocation). This option creates a sparse image file
with metadata, resulting in higher performance compared to
images with no preallocation and only slightly higher
initial disk space usage.</p>

<p style="margin-left:9%; margin-top: 1em">When
<i>--reflink</i> is specified, perform a COW lightweight
copy, where the data blocks are copied only when modified.
If this is not possible, the copy fails.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--validate</i> is specified, validates the format of the
XML document against an internal RNG schema.</p>

<h3>vol-create-as
<a name="vol-create-as"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">vol-create-as
pool-or-uuid name capacity [--allocation size] [--format
string] <br>
[--backing-vol vol-name-or-key-or-path] <br>
[--backing-vol-format string] [--prealloc-metadata]
[--print-xml]</p>

<p style="margin-left:9%; margin-top: 1em">Create a volume
from a set of arguments unless <i>--print-xml</i> is
specified, in which case just the XML of the volume object
is printed out without any actual object creation.</p>


<p style="margin-left:9%; margin-top: 1em"><i>pool-or-uuid</i>
is the name or UUID of the storage pool to create the volume
in.</p>

<p style="margin-left:9%; margin-top: 1em"><i>name</i> is
the name of the new volume. For a disk pool, this must match
the partition name as determined from the pool's source
device path and the next available partition. For example, a
source device path of /dev/sdb and there are no partitions
on the disk, then the name must be sdb1 with the next name
being sdb2 and so on.</p>

<p style="margin-left:9%; margin-top: 1em"><i>capacity</i>
is the size of the volume to be created, as a scaled integer
(see <b>NOTES</b> above), defaulting to bytes if there is no
suffix.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--allocation
size</i> is the initial size to be allocated in the volume,
also as a scaled integer defaulting to bytes.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--format
string</i> is used in file based storage pools to specify
the volume file format to use; raw, bochs, qcow, qcow2,
vmdk, qed. Use extended for disk storage pools in order to
create an extended partition (other values are validity
checked but not preserved when libvirtd is restarted or the
pool is refreshed).</p>


<p style="margin-left:9%; margin-top: 1em"><i>--backing-vol
vol-name-or-key-or-path</i> is the source backing volume to
be used if taking a snapshot of an existing volume.</p>


<p style="margin-left:9%; margin-top: 1em"><i>--backing-vol-format
string</i> is the format of the snapshot backing volume;
raw, bochs, qcow, qcow2, qed, vmdk, host_device. These are,
however, meant for file based storage pools.</p>


<p style="margin-left:9%; margin-top: 1em">[<i>--prealloc-metadata</i>]
preallocate metadata (for qcow2 images which don't support
full allocation). This option creates a sparse image file
with metadata, resulting in higher performance compared to
images with no preallocation and only slightly higher
initial disk space usage.</p>

<h3>vol-clone
<a name="vol-clone"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">vol-clone
vol-name-or-key-or-path name <br>
[--pool pool-or-uuid] [--prealloc-metadata] [--reflink]
[--print-xml]</p>

<p style="margin-left:9%; margin-top: 1em">Clone an
existing volume within the parent pool. Less powerful, but
easier to type, version of <b>vol-create-from</b>.</p>


<p style="margin-left:9%; margin-top: 1em"><i>vol-name-or-key-or-path</i>
is the name or key or path of the source volume.</p>

<p style="margin-left:9%; margin-top: 1em"><i>name</i> is
the name of the new volume.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--pool
pool-or-uuid</i> is the name or UUID of the storage pool
that contains the source volume and will contain the new
volume. If the source volume name is provided instead of the
key or path, then providing the pool is necessary to find
the volume to be cloned; otherwise, the first volume found
by the key or path will be used.</p>


<p style="margin-left:9%; margin-top: 1em">[<i>--prealloc-metadata</i>]
preallocate metadata (for qcow2 images which don't support
full allocation). This option creates a sparse image file
with metadata, resulting in higher performance compared to
images with no preallocation and only slightly higher
initial disk space usage.</p>

<p style="margin-left:9%; margin-top: 1em">When
<i>--reflink</i> is specified, perform a COW lightweight
copy, where the data blocks are copied only when modified.
If this is not possible, the copy fails.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--print-xml</i> is specified, then the XML used to clone
the volume is printed instead.</p>

<h3>vol-delete
<a name="vol-delete"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">vol-delete
vol-name-or-key-or-path [--pool pool-or-uuid]
[--delete-snapshots]</p>

<p style="margin-left:9%; margin-top: 1em">Delete a given
volume.</p>


<p style="margin-left:9%; margin-top: 1em"><i>vol-name-or-key-or-path</i>
is the volume name or key or path of the volume to
delete.</p>

<p style="margin-left:9%; margin-top: 1em">[<i>--pool
pool-or-uuid</i>] is the name or UUID of the storage pool
the volume is in. If the volume name is provided instead of
the key or path, then providing the pool is necessary to
find the volume to be deleted; otherwise, the first volume
found by the key or path will be used.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--delete-snapshots</i> flag specifies that any snapshots
associated with the storage volume should be deleted as
well. Not all storage drivers support this option, presently
only rbd.</p>

<h3>vol-upload
<a name="vol-upload"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">vol-upload
vol-name-or-key-or-path local-file <br>
[--pool pool-or-uuid] [--offset bytes] <br>
[--length bytes] [--sparse]</p>

<p style="margin-left:9%; margin-top: 1em">Upload the
contents of <i>local-file</i> to a storage volume.</p>


<p style="margin-left:9%; margin-top: 1em"><i>vol-name-or-key-or-path</i>
is the name or key or path of the volume where the
<i>local-file</i> will be uploaded.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--pool
pool-or-uuid</i> is the name or UUID of the storage pool the
volume is in. If the volume name is provided instead of the
key or path, then providing the pool is necessary to find
the volume to be uploaded into; otherwise, the first volume
found by the key or path will be used.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--offset</i>
is the position in the storage volume at which to start
writing the data. The value must be 0 or larger.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--length</i>
is an upper bound of the amount of data to be uploaded. A
negative value is interpreted as an unsigned long long value
to essentially include everything from the offset to the end
of the volume.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--sparse</i> is specified, this command will preserve
volume sparseness.</p>

<p style="margin-left:9%; margin-top: 1em">An error will
occur if the <i>local-file</i> is greater than the specified
<i>length</i>.</p>

<p style="margin-left:9%; margin-top: 1em">See the
description for the libvirt virStorageVolUpload API for
details regarding possible target volume and pool changes as
a result of the pool refresh when the upload is
attempted.</p>

<h3>vol-download
<a name="vol-download"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">vol-download
vol-name-or-key-or-path local-file <br>
[--pool pool-or-uuid] [--offset bytes] [--length bytes] <br>
[--sparse]</p>

<p style="margin-left:9%; margin-top: 1em">Download the
contents of a storage volume to <i>local-file</i>.</p>


<p style="margin-left:9%; margin-top: 1em"><i>vol-name-or-key-or-path</i>
is the name or key or path of the volume to download into
<i>local-file</i>.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--pool
pool-or-uuid</i> is the name or UUID of the storage pool the
volume is in. If the volume name is provided instead of the
key or path, then providing the pool is necessary to find
the volume to be uploaded into; otherwise, the first volume
found by the key or path will be used.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--offset</i>
is the position in the storage volume at which to start
reading the data. The value must be 0 or larger.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--length</i>
is an upper bound of the amount of data to be downloaded. A
negative value is interpreted as an unsigned long long value
to essentially include everything from the offset to the end
of the volume.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--sparse</i> is specified, this command will preserve
volume sparseness.</p>

<h3>vol-wipe
<a name="vol-wipe"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">vol-wipe
vol-name-or-key-or-path [--pool pool-or-uuid] [--algorithm
algorithm]</p>

<p style="margin-left:9%; margin-top: 1em">Wipe a volume,
ensure data previously on the volume is not accessible to
future reads.</p>


<p style="margin-left:9%; margin-top: 1em"><i>vol-name-or-key-or-path</i>
is the name or key or path of the volume to wipe. It is
possible to choose different wiping algorithms instead of
re-writing volume with zeroes.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--pool
pool-or-uuid</i> is the name or UUID of the storage pool the
volume is in. If the volume name is provided instead of the
key or path, then providing the pool is necessary to find
the volume to be wiped; otherwise, the first volume found by
the key or path will be used.</p>

<p style="margin-left:9%; margin-top: 1em">Use the
<i>--algorithm</i> switch choosing from the list of the
following algorithms in order to define which algorithm to
use for the wipe.</p>

<p style="margin-left:9%; margin-top: 1em"><b>Supported
algorithms</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p style="margin-top: 1em">zero - 1-pass all zeroes</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p>nnsa - 4-pass NNSA Policy Letter NAP-14.1-C (XVI-8) for
sanitizing removable and non-removable hard disks: random
x2, 0x00, verify.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p>dod - 4-pass DoD 5220.22-M section 8-306 procedure for
sanitizing removable and non-removable rigid disks: random,
0x00, 0xff, verify.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p>bsi - 9-pass method recommended by the German Center of
Security in Information Technologies (
&lt;https://www.bsi.bund.de&gt; ): 0xff, 0xfe, 0xfd, 0xfb,
0xf7, 0xef, 0xdf, 0xbf, 0x7f.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p>gutmann - The canonical 35-pass sequence described in
Gutmann's paper.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p>schneier - 7-pass method described by Bruce Schneier in
&quot;Applied Cryptography&quot; (1996): 0x00, 0xff, random
x5.</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p>pfitzner7 - Roy Pfitzner's 7-random-pass method: random
x7.</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p>pfitzner33 - Roy Pfitzner's 33-random-pass method:
random x33.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p>random - 1-pass pattern: random.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="88%">


<p>trim - 1-pass trimming the volume using TRIM or
DISCARD</p> </td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em"><b>Note</b>: The
<b>scrub</b> binary will be used to handle the 'nnsa',
'dod', 'bsi', 'gutmann', 'schneier', 'pfitzner7' and
'pfitzner33' algorithms. The availability of the algorithms
may be limited by the version of the <b>scrub</b> binary
installed on the host. The 'zero' algorithm will write
zeroes to the entire volume. For some volumes, such as
sparse or rbd volumes, this may result in completely filling
the volume with zeroes making it appear to be completely
full. As an alternative, the 'trim' algorithm does not
overwrite all the data in a volume, rather it expects the
storage driver to be able to discard all bytes in a volume.
It is up to the storage driver to handle how the discarding
occurs. Not all storage drivers or volume types can support
'trim'.</p>

<h3>vol-dumpxml
<a name="vol-dumpxml"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">vol-dumpxml
[--pool pool-or-uuid] [--xpath EXPRESSION] [--wrap] <br>
vol-name-or-key-or-path</p>

<p style="margin-left:9%; margin-top: 1em">Output the
volume information as an XML dump to stdout.</p>


<p style="margin-left:9%; margin-top: 1em"><i>vol-name-or-key-or-path</i>
is the name or key or path of the volume to output the
XML.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--pool
pool-or-uuid</i> is the name or UUID of the storage pool the
volume is in. If the volume name is provided instead of the
key or path, then providing the pool is necessary to find
the volume to be uploaded into; otherwise, the first volume
found by the key or path will be used.</p>

<p style="margin-left:9%; margin-top: 1em">If the
<b>--xpath</b> argument provides an XPath expression, it
will be evaluated against the output XML and only those
matching nodes will be printed. The default behaviour is to
print each matching node as a standalone document, however,
for ease of additional processing, the <b>--wrap</b>
argument will cause the matching node to be wrapped in a
common root node.</p>

<h3>vol-info
<a name="vol-info"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">vol-info
vol-name-or-key-or-path [--pool pool-or-uuid] [--bytes]
[--physical]</p>

<p style="margin-left:9%; margin-top: 1em">Returns basic
information about the given storage volume.</p>


<p style="margin-left:9%; margin-top: 1em"><i>vol-name-or-key-or-path</i>
is the name or key or path of the volume to return
information for.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--pool
pool-or-uuid</i> is the name or UUID of the storage pool the
volume is in. If the volume name is provided instead of the
key or path, then providing the pool is necessary to find
the volume to be uploaded into; otherwise, the first volume
found by the key or path will be used.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--bytes</i> is specified the sizes are not converted to
human friendly units.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--physical</i> is specified, then the host physical size
is returned and displayed instead of the allocation value.
The physical value for some file types, such as qcow2 may
have a different (larger) physical value than is shown for
allocation. Additionally sparse files will have different
physical and allocation values.</p>

<h3>vol-list
<a name="vol-list"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">vol-list
[--pool pool-or-uuid] [--details]</p>

<p style="margin-left:9%; margin-top: 1em">Return the list
of volumes in the given storage pool.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--pool
pool-or-uuid</i> is the name or UUID of the storage
pool.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--details</i> option instructs virsh to additionally
display volume type and capacity related information where
available.</p>

<h3>vol-pool
<a name="vol-pool"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">vol-pool
vol-key-or-path [--uuid]</p>

<p style="margin-left:9%; margin-top: 1em">Return the pool
name or UUID for a given volume. By default, the pool name
is returned.</p>


<p style="margin-left:9%; margin-top: 1em"><i>vol-key-or-path</i>
is the key or path of the volume to return the pool
information.</p>

<p style="margin-left:9%; margin-top: 1em">If the
<i>--uuid</i> option is given, the pool UUID is returned
instead.</p>

<h3>vol-path
<a name="vol-path"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">vol-path
vol-name-or-key [--pool pool-or-uuid]</p>

<p style="margin-left:9%; margin-top: 1em">Return the path
for a given volume.</p>


<p style="margin-left:9%; margin-top: 1em"><i>vol-name-or-key</i>
is the name or key of the volume to return the path.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--pool
pool-or-uuid</i> is the name or UUID of the storage pool the
volume is in. If the volume name is provided instead of the
key, then providing the pool is necessary to find the volume
to be uploaded into; otherwise, the first volume found by
the key will be used.</p>

<h3>vol-name
<a name="vol-name"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">vol-name
vol-key-or-path</p>

<p style="margin-left:9%; margin-top: 1em">Return the name
for a given volume.</p>


<p style="margin-left:9%; margin-top: 1em"><i>vol-key-or-path</i>
is the key or path of the volume to return the name.</p>

<h3>vol-key
<a name="vol-key"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">vol-key
vol-name-or-path [--pool pool-or-uuid]</p>

<p style="margin-left:9%; margin-top: 1em">Return the
volume key for a given volume.</p>


<p style="margin-left:9%; margin-top: 1em"><i>vol-name-or-path</i>
is the name or path of the volume to return the volume
key.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--pool
pool-or-uuid</i> is the name or UUID of the storage pool the
volume is in. If the volume name is provided instead of the
path, then providing the pool is necessary to find the
volume to be uploaded into; otherwise, the first volume
found by the path will be used.</p>

<h3>vol-resize
<a name="vol-resize"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">vol-resize
vol-name-or-path capacity [--pool pool-or-uuid] [--allocate]
[--delta] [--shrink]</p>

<p style="margin-left:9%; margin-top: 1em">Resize the
capacity of the given volume, in bytes.</p>


<p style="margin-left:9%; margin-top: 1em"><i>vol-name-or-key-or-path</i>
is the name or key or path of the volume to resize.</p>

<p style="margin-left:9%; margin-top: 1em"><i>capacity</i>
is a scaled integer (see <b>NOTES</b> above) for the volume,
which defaults to bytes if there is no suffix.</p>

<p style="margin-left:9%; margin-top: 1em"><i>--pool
pool-or-uuid</i> is the name or UUID of the storage pool the
volume is in. If the volume name is provided instead of the
key or path, then providing the pool is necessary to find
the volume to be uploaded into; otherwise, the first volume
found by the key or path will be used.</p>

<p style="margin-left:9%; margin-top: 1em">The new
<i>capacity</i> might be sparse unless <i>--allocate</i> is
specified.</p>

<p style="margin-left:9%; margin-top: 1em">Normally,
<i>capacity</i> is the new size, but if <i>--delta</i> is
present, then it is added to the existing size.</p>

<p style="margin-left:9%; margin-top: 1em">Attempts to
shrink the volume will fail unless <i>--shrink</i> is
present. The <i>capacity</i> cannot be negative unless
<i>--shrink</i> is provided, but a negative sign is not
necessary.</p>

<p style="margin-left:9%; margin-top: 1em">This command is
only safe for storage volumes not in use by an active guest;
see also <b>blockresize</b> for live resizing.</p>

<h2>SECRET COMMANDS
<a name="SECRET COMMANDS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The following
commands manipulate &quot;secrets&quot; (e.g. passwords,
passphrases and encryption keys). Libvirt can store secrets
independently from their use, and other objects (e.g.
volumes or domains) can refer to the secrets for encryption
or possibly other uses. Secrets are identified using a UUID.
See <br>
&lt;https://libvirt.org/formatsecret.html&gt; for
documentation of the XML format used to represent properties
of secrets.</p>

<h3>secret-define
<a name="secret-define"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">secret-define
file [--validate]</p>

<p style="margin-left:9%; margin-top: 1em">Create a secret
with the properties specified in <i>file</i>, with no
associated secret value. If <i>file</i> does not specify a
UUID, choose one automatically. If <i>file</i> specifies a
UUID of an existing secret, replace its properties by
properties defined in <i>file</i>, without affecting the
secret value.</p>

<p style="margin-left:9%; margin-top: 1em">Optionally, the
format of the input XML file can be validated against an
internal RNG schema with <i>--validate</i>.</p>

<h3>secret-dumpxml
<a name="secret-dumpxml"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">secret-dumpxml
[--xpath EXPRESSION] [--wrap] secret</p>

<p style="margin-left:9%; margin-top: 1em">Output
properties of <i>secret</i> (specified by its UUID) as an
XML dump to stdout.</p>

<p style="margin-left:9%; margin-top: 1em">If the
<b>--xpath</b> argument provides an XPath expression, it
will be evaluated against the output XML and only those
matching nodes will be printed. The default behaviour is to
print each matching node as a standalone document, however,
for ease of additional processing, the <b>--wrap</b>
argument will cause the matching node to be wrapped in a
common root node.</p>

<h3>secret-event
<a name="secret-event"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">secret-event
{[secret] event [--loop] [--timeout seconds] [--timestamp] |
--list}</p>

<p style="margin-left:9%; margin-top: 1em">Wait for a class
of secret events to occur, and print appropriate details of
events as they happen. The events can optionally be filtered
by <i>secret</i>. Using <i>--list</i> as the only argument
will provide a list of possible <i>event</i> values known by
this client, although the connection might not allow
registering for all these events.</p>

<p style="margin-left:9%; margin-top: 1em">By default, this
command is one-shot, and returns success once an event
occurs; you can send SIGINT (usually via <b>Ctrl-C</b>) to
quit immediately. If <i>--timeout</i> is specified, the
command gives up waiting for events after <i>seconds</i>
have elapsed. With <i>--loop</i>, the command prints all
events until a timeout or interrupt key.</p>

<p style="margin-left:9%; margin-top: 1em">When
<i>--timestamp</i> is used, a human-readable timestamp will
be printed before the event.</p>

<h3>secret-set-value
<a name="secret-set-value"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">secret-set-value
secret (--file filename [--plain] | --interactive |
base64)</p>

<p style="margin-left:9%; margin-top: 1em">Set the value
associated with <i>secret</i> (specified by its UUID) to the
value Base64-encoded value <i>base64</i> or Base-64-encoded
contents of file named <i>filename</i>. Using the
<i>--plain</i> flag is together with <i>--file</i> allows
one to use the file contents directly as the secret
value.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--interactive</i> flag is used the secret value is read
as a password from the terminal.</p>

<p style="margin-left:9%; margin-top: 1em">Note that
<i>--file</i>, <i>--interactive</i> and <i>base64</i>
options are mutually exclusive.</p>

<p style="margin-left:9%; margin-top: 1em">Passing secrets
via the <i>base64</i> option on command line is INSECURE and
deprecated. Use the <i>--file</i> option instead.</p>

<h3>secret-get-value
<a name="secret-get-value"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">secret-get-value
[--plain] secret</p>

<p style="margin-left:9%; margin-top: 1em">Output the value
associated with <i>secret</i> (specified by its UUID) to
stdout, encoded using Base64.</p>

<p style="margin-left:9%; margin-top: 1em">If the
<i>--plain</i> flag is used the value is not base64 encoded,
but rather printed raw. Note that unless virsh is started in
quiet mode (<i>virsh -q</i>) it prints a newline at the end
of the command. This newline is not part of the secret.</p>

<h3>secret-undefine
<a name="secret-undefine"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">secret-undefine
secret</p>

<p style="margin-left:9%; margin-top: 1em">Delete a
<i>secret</i> (specified by its UUID), including the
associated value, if any.</p>

<h3>secret-list
<a name="secret-list"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">secret-list
[--ephemeral] [--no-ephemeral] <br>
[--private] [--no-private]</p>

<p style="margin-left:9%; margin-top: 1em">Returns the list
of secrets. You may also want to filter the returned secrets
by <i>--ephemeral</i> to list the ephemeral ones,
<i>--no-ephemeral</i> to list the non-ephemeral ones,
<i>--private</i> to list the private ones, and
<i>--no-private</i> to list the non-private ones.</p>

<h2>SNAPSHOT COMMANDS
<a name="SNAPSHOT COMMANDS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The following
commands manipulate domain snapshots. Snapshots take the
disk, memory, and device state of a domain at a
point-of-time, and save it for future use. They have many
uses, from saving a &quot;clean&quot; copy of an OS image to
saving a domain's state before a potentially destructive
operation. Snapshots are identified with a unique name. See
<br>
&lt;https://libvirt.org/formatsnapshot.html&gt; for
documentation of the XML format used to represent properties
of snapshots.</p>

<h3>snapshot-create
<a name="snapshot-create"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">snapshot-create
domain [xmlfile] {[--redefine [--current]] | <br>
[--no-metadata] [--halt] [--disk-only] [--reuse-external]
<br>
[--quiesce] [--atomic] [--live]} [--validate]</p>

<p style="margin-left:9%; margin-top: 1em">Create a
snapshot for domain <i>domain</i> with the properties
specified in <i>xmlfile</i>. Optionally, the
<i>--validate</i> option can be passed to validate the
format of the input XML file against an internal RNG schema
(identical to using the virt-xml-validate(1) tool).
Normally, the only properties settable for a domain snapshot
are the &lt;name&gt; and &lt;description&gt; elements, as
well as &lt;disks&gt; if <i>--disk-only</i> is given; the
rest of the fields are ignored, and automatically filled in
by libvirt. If <i>xmlfile</i> is completely omitted, then
libvirt will choose a value for all fields. The new snapshot
will become current, as listed by
<b>snapshot-current</b>.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--halt</i>
is specified, the domain will be left in an inactive state
after the snapshot is created.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--disk-only</i> is specified, the snapshot will only
include disk content rather than the usual full system
snapshot with vm state. Disk snapshots are captured faster
than full system snapshots, but reverting to a disk snapshot
may require fsck or journal replays, since it is like the
disk state at the point when the power cord is abruptly
pulled; and mixing <i>--halt</i> and <i>--disk-only</i>
loses any data that was not flushed to disk at the time.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--redefine</i> is specified, then all XML elements
produced by <b>snapshot-dumpxml</b> are valid; this can be
used to migrate snapshot hierarchy from one machine to
another, to recreate hierarchy for the case of a transient
domain that goes away and is later recreated with the same
name and UUID, or to make slight alterations in the snapshot
metadata (such as host-specific aspects of the domain XML
embedded in the snapshot). When this flag is supplied, the
<i>xmlfile</i> argument is mandatory, and the domain's
current snapshot will not be altered unless the
<i>--current</i> flag is also given.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--no-metadata</i> is specified, then the snapshot data is
created, but any metadata is immediately discarded (that is,
libvirt does not treat the snapshot as current, and cannot
revert to the snapshot unless <i>--redefine</i> is later
used to teach libvirt about the metadata again).</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--reuse-external</i> is specified, and the snapshot XML
requests an external snapshot with a destination of an
existing file, then the destination must exist and be
pre-created with correct format and metadata. The file is
then reused; otherwise, a snapshot is refused to avoid
losing contents of the existing files.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--quiesce</i> is specified, libvirt will try to use guest
agent to freeze and unfreeze domain's mounted file systems.
However, if domain has no guest agent, snapshot creation
will fail. Currently, this requires <i>--disk-only</i> to be
passed as well.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--atomic</i> is specified, libvirt will guarantee that
the snapshot either succeeds, or fails with no changes; not
all hypervisors support this. If this flag is not specified,
then some hypervisors may fail after partially performing
the action, and <b>dumpxml</b> must be used to see whether
any partial changes occurred.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, libvirt takes the snapshot while the guest is
running. Both disk snapshot and domain memory snapshot are
taken. This increases the size of the memory image of the
external snapshot. This is currently supported only for full
system external snapshots.</p>

<p style="margin-left:9%; margin-top: 1em">Existence of
snapshot metadata will prevent attempts to <b>undefine</b> a
persistent guest. However, for transient domains, snapshot
metadata is silently lost when the domain quits running
(whether by command such as <b>destroy</b> or by internal
guest action).</p>

<p style="margin-left:9%; margin-top: 1em">For now, it is
not possible to create snapshots in a domain that has
checkpoints, although this restriction will be lifted in a
future release.</p>

<h3>snapshot-create-as
<a name="snapshot-create-as"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">snapshot-create-as
domain {[--print-xml] [--no-metadata] <br>
[--halt] [--reuse-external]} [name] <br>
[description] [--disk-only [--quiesce]] [--atomic]
[--validate] <br>
[[--live] [--memspec memspec]] [--diskspec] diskspec]...</p>

<p style="margin-left:9%; margin-top: 1em">Create a
snapshot for domain <i>domain</i> with the given
&lt;name&gt; and &lt;description&gt;; if either value is
omitted, libvirt will choose a value. If <i>--print-xml</i>
is specified, then XML appropriate for
<i>snapshot-create</i> is output, rather than actually
creating a snapshot. Otherwise, if <i>--halt</i> is
specified, the domain will be left in an inactive state
after the snapshot is created, and if <i>--disk-only</i> is
specified, the snapshot will not include vm state.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--memspec</i> option can be used to control whether a
full system snapshot is internal or external. The
<i>--memspec</i> flag is mandatory, followed by a
<b>memspec</b> of the form
<b>[file=]name[,snapshot=type]</b>, where type can be
<b>no</b>, <b>internal</b>, or <b>external</b>. To include a
literal comma in <b>file=name</b>, escape it with a second
comma. <i>--memspec</i> cannot be used together with
<i>--disk-only</i>.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--diskspec</i> option can be used to control how
<i>--disk-only</i> and external full system snapshots create
external files. This option can occur multiple times,
according to the number of &lt;disk&gt; elements in the
domain xml. Each &lt;diskspec&gt; is in the form
<b>disk[,snapshot=type][,driver=type][,stype=type][,file=name]</b>.
A <i>diskspec</i> must be provided for disks backed by block
devices as libvirt doesn't auto-generate file names for
those. The optional <b>stype</b> parameter allows one to
control the type of the source file. Supported values are
'file' (default) and 'block'. To exclude a disk from an
external snapshot use <b>--diskspec
disk,snapshot=no</b>.</p>

<p style="margin-left:9%; margin-top: 1em">To include a
literal comma in <b>disk</b> or in <b>file=name</b>, escape
it with a second comma. A literal <i>--diskspec</i> must
precede each <b>diskspec</b> unless all three of
<i>domain</i>, <i>name</i>, and <i>description</i> are also
present. For example, a diskspec of
&quot;vda,snapshot=external,file=/path/to,,new&quot; results
in the following XML:</p>

<p style="margin-left:13%; margin-top: 1em">&lt;disk
name='vda' snapshot='external'&gt; <br>
&lt;source file='/path/to,new'/&gt; <br>
&lt;/disk&gt;</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--reuse-external</i> is specified, and the domain XML or
<i>diskspec</i> option requests an external snapshot with a
destination of an existing file, then the destination must
exist and be pre-created with correct format and metadata.
The file is then reused; otherwise, a snapshot is refused to
avoid losing contents of the existing files.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--quiesce</i> is specified, libvirt will try to use guest
agent to freeze and unfreeze domain's mounted file systems.
However, if domain has no guest agent, snapshot creation
will fail. Currently, this requires <i>--disk-only</i> to be
passed as well.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--no-metadata</i> is specified, then the snapshot data is
created, but any metadata is immediately discarded (that is,
libvirt does not treat the snapshot as current, and cannot
revert to the snapshot unless <b>snapshot-create</b> is
later used to teach libvirt about the metadata again).</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--atomic</i> is specified, libvirt will guarantee that
the snapshot either succeeds, or fails with no changes; not
all hypervisors support this. If this flag is not specified,
then some hypervisors may fail after partially performing
the action, and <b>dumpxml</b> must be used to see whether
any partial changes occurred.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--live</i>
is specified, libvirt takes the snapshot while the guest is
running. This increases the size of the memory image of the
external snapshot. This is currently supported only for
external full system snapshots.</p>

<p style="margin-left:9%; margin-top: 1em">For now, it is
not possible to create snapshots in a domain that has
checkpoints, although this restriction will be lifted in a
future release.</p>

<p style="margin-left:9%; margin-top: 1em">Optionally, the
<i>--validate</i> option can be passed to validate XML
document which is internally generated by this command
against the internal RNG schema.</p>

<h3>snapshot-current
<a name="snapshot-current"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">snapshot-current
domain {[--name] | [--security-info] | [snapshotname]}</p>

<p style="margin-left:9%; margin-top: 1em">Without
<i>snapshotname</i>, this will output the snapshot XML for
the domain's current snapshot (if any). If <i>--name</i> is
specified, just the current snapshot name instead of the
full xml. Otherwise, using <i>--security-info</i> will also
include security sensitive information in the XML.</p>

<p style="margin-left:9%; margin-top: 1em">With
<i>snapshotname</i>, this is a request to make the existing
named snapshot become the current snapshot, without
reverting the domain.</p>

<h3>snapshot-edit
<a name="snapshot-edit"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">snapshot-edit
domain [snapshotname] [--current] {[--rename] |
[--clone]}</p>

<p style="margin-left:9%; margin-top: 1em">Edit the XML
configuration file for <i>snapshotname</i> of a domain. If
both <i>snapshotname</i> and <i>--current</i> are specified,
also force the edited snapshot to become the current
snapshot. If <i>snapshotname</i> is omitted, then
<i>--current</i> must be supplied, to edit the current
snapshot.</p>

<p style="margin-left:9%; margin-top: 1em">This is
equivalent to:</p>

<p style="margin-left:13%; margin-top: 1em">virsh
snapshot-dumpxml dom name &gt; snapshot.xml <br>
vi snapshot.xml (or make changes with your other text
editor) <br>
virsh snapshot-create dom snapshot.xml --redefine
[--current]</p>

<p style="margin-left:9%; margin-top: 1em">except that it
does some error checking.</p>

<p style="margin-left:9%; margin-top: 1em">The editor used
can be supplied by the <b>$VISUAL</b> or <b>$EDITOR</b>
environment variables, and defaults to <b>vi</b>.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--rename</i> is specified, then the edits can change the
snapshot name. If <i>--clone</i> is specified, then changing
the snapshot name will create a clone of the snapshot
metadata. If neither is specified, then the edits must not
change the snapshot name. Note that changing a snapshot name
must be done with care, since the contents of some
snapshots, such as internal snapshots within a single qcow2
file, are accessible only from the original name.</p>

<h3>snapshot-info
<a name="snapshot-info"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">snapshot-info
domain {snapshot | --current}</p>

<p style="margin-left:9%; margin-top: 1em">Output basic
information about a named &lt;snapshot&gt;, or the current
snapshot with <i>--current</i>.</p>

<h3>snapshot-list
<a name="snapshot-list"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">snapshot-list
domain [--metadata] [--no-metadata] <br>
[{--parent | --roots | [{--tree | --name}]}] [--topological]
<br>
[{[--from] snapshot | --current} [--descendants]] <br>
[--leaves] [--no-leaves] [--inactive] [--active] <br>
[--disk-only] [--internal] [--external]</p>

<p style="margin-left:9%; margin-top: 1em">List all of the
available snapshots for the given domain, defaulting to show
columns for the snapshot name, creation time, and domain
state.</p>

<p style="margin-left:9%; margin-top: 1em">Normally, table
form output is sorted by snapshot name; using
<i>--topological</i> instead sorts so that no child is
listed before its ancestors (although there may be more than
one possible ordering with this property).</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--parent</i> is specified, add a column to the output
table giving the name of the parent of each snapshot. If
<i>--roots</i> is specified, the list will be filtered to
just snapshots that have no parents. If <i>--tree</i> is
specified, the output will be in a tree format, listing just
snapshot names. These three options are mutually
exclusive.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--name</i>
is specified only the snapshot name is printed optionally
followed by a tab-separated name of the parent snapshot if
<i>--parent</i> is used as well. This option is mutually
exclusive with <i>--tree</i>.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--from</i>
is provided, filter the list to snapshots which are children
of the given <b>snapshot</b>; or if <i>--current</i> is
provided, start at the current snapshot. When used in
isolation or with <i>--parent</i>, the list is limited to
direct children unless <i>--descendants</i> is also present.
When used with <i>--tree</i>, the use of
<i>--descendants</i> is implied. This option is not
compatible with <i>--roots</i>. Note that the starting point
of <i>--from</i> or <i>--current</i> is not included in the
list unless the <i>--tree</i> option is also present.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--leaves</i> is specified, the list will be filtered to
just snapshots that have no children. Likewise, if
<i>--no-leaves</i> is specified, the list will be filtered
to just snapshots with children. (Note that omitting both
options does no filtering, while providing both options will
either produce the same list or error out depending on
whether the server recognizes the flags). Filtering options
are not compatible with <i>--tree</i>.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--metadata</i> is specified, the list will be filtered to
just snapshots that involve libvirt metadata, and thus would
prevent <b>undefine</b> of a persistent guest, or be lost on
<b>destroy</b> of a transient domain. Likewise, if
<i>--no-metadata</i> is specified, the list will be filtered
to just snapshots that exist without the need for libvirt
metadata.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--inactive</i> is specified, the list will be filtered to
snapshots that were taken when the domain was shut off. If
<i>--active</i> is specified, the list will be filtered to
snapshots that were taken when the domain was running, and
where the snapshot includes the memory state to revert to
that running state. If <i>--disk-only</i> is specified, the
list will be filtered to snapshots that were taken when the
domain was running, but where the snapshot includes only
disk state.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--internal</i> is specified, the list will be filtered to
snapshots that use internal storage of existing disk images.
If <i>--external</i> is specified, the list will be filtered
to snapshots that use external files for disk images or
memory state.</p>

<h3>snapshot-dumpxml
<a name="snapshot-dumpxml"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">snapshot-dumpxml
[--security-info] [--xpath EXPRESSION] [--wrap] <br>
domain snapshot</p>

<p style="margin-left:9%; margin-top: 1em">Output the
snapshot XML for the domain's snapshot named
<i>snapshot</i>. Using <i>--security-info</i> will also
include security sensitive information. Use
<b>snapshot-current</b> to easily access the XML of the
current snapshot.</p>

<p style="margin-left:9%; margin-top: 1em">If the
<b>--xpath</b> argument provides an XPath expression, it
will be evaluated against the output XML and only those
matching nodes will be printed. The default behaviour is to
print each matching node as a standalone document, however,
for ease of additional processing, the <b>--wrap</b>
argument will cause the matching node to be wrapped in a
common root node.</p>

<h3>snapshot-parent
<a name="snapshot-parent"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">snapshot-parent
domain {snapshot | --current}</p>

<p style="margin-left:9%; margin-top: 1em">Output the name
of the parent snapshot, if any, for the given
<i>snapshot</i>, or for the current snapshot with
<i>--current</i>.</p>

<h3>snapshot-revert
<a name="snapshot-revert"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">snapshot-revert
domain {snapshot | --current} [{--running | --paused}] <br>
[--force] [--reset-nvram]</p>

<p style="margin-left:9%; margin-top: 1em">Revert the given
domain to the snapshot specified by <i>snapshot</i>, or to
the current snapshot with <i>--current</i>. Be aware that
this is a destructive action; any changes in the domain
since the last snapshot was taken will be lost. Also note
that the state of the domain after snapshot-revert is
complete will be the state of the domain at the time the
original snapshot was taken.</p>

<p style="margin-left:9%; margin-top: 1em">Normally,
reverting to a snapshot leaves the domain in the state it
was at the time the snapshot was created, except that a disk
snapshot with no vm state leaves the domain in an inactive
state. Passing either the <i>--running</i> or
<i>--paused</i> flag will perform additional state changes
(such as booting an inactive domain, or pausing a running
domain). Since transient domains cannot be inactive, it is
required to use one of these flags when reverting to a disk
snapshot of a transient domain.</p>

<p style="margin-left:9%; margin-top: 1em">Since libvirt
7.10.0 the VM process is always restarted so the following
paragraph is no longer valid. If the snapshot metadata lacks
the full VM XML it's no longer possible to revert to such
snapshot.</p>

<p style="margin-left:9%; margin-top: 1em">There are a
number of cases where a snapshot revert involves extra risk,
which requires the use of <i>--force</i> to proceed:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="13%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="1%"></td>
<td width="85%">


<p style="margin-top: 1em">One is the case of a snapshot
that lacks full domain information for reverting
configuration (such as snapshots created prior to libvirt
0.9.5); since libvirt cannot prove that the current
configuration matches what was in use at the time of the
snapshot, supplying <i>--force</i> assures libvirt that the
snapshot is compatible with the current configuration (and
if it is not, the domain will likely fail to run).</p></td></tr>
<tr valign="top" align="left">
<td width="13%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="1%"></td>
<td width="85%">


<p>Another is the case of reverting from a running domain
to an active state where a new hypervisor has to be created
rather than reusing the existing hypervisor, because it
implies drawbacks such as breaking any existing VNC or Spice
connections; this condition happens with an active snapshot
that uses a provably incompatible configuration, as well as
with an inactive snapshot that is combined with the
<i>--start</i> or <i>--pause</i> flag.</p></td></tr>
<tr valign="top" align="left">
<td width="13%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="1%"></td>
<td width="85%">


<p>Also, libvirt will refuse to restore snapshots of
inactive QEMU domains while there is managed saved state.
This is because those snapshots do not contain memory state
and will therefore not replace the existing memory state.
This ends up switching a disk underneath a running system
and will likely cause extensive filesystem corruption or
crashes due to swap content mismatches when run.</p></td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">If
<i>--reset-nvram</i> is specified, any existing NVRAM file
will be deleted and re-initialized from its pristine
template.</p>

<h3>snapshot-delete
<a name="snapshot-delete"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">snapshot-delete
domain {snapshot | --current} <br>
[--metadata] [{--children | --children-only}]</p>

<p style="margin-left:9%; margin-top: 1em">Delete the
snapshot for the domain named <i>snapshot</i>, or the
current snapshot with <i>--current</i>. If this snapshot has
child snapshots, changes from this snapshot will be merged
into the children. If <i>--children</i> is passed, then
delete this snapshot and any children of this snapshot. If
<i>--children-only</i> is passed, then delete any children
of this snapshot, but leave this snapshot intact. These two
flags are mutually exclusive.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--metadata</i> is specified, then only delete the
snapshot metadata maintained by libvirt, while leaving the
snapshot contents intact for access by external tools;
otherwise deleting a snapshot also removes the data contents
from that point in time.</p>

<h2>CHECKPOINT COMMANDS
<a name="CHECKPOINT COMMANDS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The following
commands manipulate domain checkpoints. Checkpoints serve as
a point in time to identify which portions of a guest's
disks have changed after that time, making it possible to
perform incremental and differential backups. Checkpoints
are identified with a unique name. See <br>
&lt;https://libvirt.org/formatcheckpoint.html&gt; for
documentation of the XML format used to represent properties
of checkpoints.</p>

<h3>checkpoint-create
<a name="checkpoint-create"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">checkpoint-create
domain [xmlfile] { --redefine [--redefine-validate] |
[--quiesce]}</p>

<p style="margin-left:9%; margin-top: 1em">Create a
checkpoint for domain <i>domain</i> with the properties
specified in <i>xmlfile</i> describing a
&lt;domaincheckpoint&gt; top-level element. The format of
the input XML file will be validated against an internal RNG
schema (identical to using the virt-xml-validate(1) tool).
If <i>xmlfile</i> is completely omitted, then libvirt will
create a checkpoint with a name based on the current
time.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--redefine</i> is specified, then all XML elements
produced by <b>checkpoint-dumpxml</b> are valid; this can be
used to migrate checkpoint hierarchy from one machine to
another, to recreate hierarchy for the case of a transient
domain that goes away and is later recreated with the same
name and UUID, or to make slight alterations in the
checkpoint metadata (such as host-specific aspects of the
domain XML embedded in the checkpoint). When this flag is
supplied, the <i>xmlfile</i> argument is mandatory.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--redefine-validate</i> is specified along with
<i>--redefine</i> the hypervisor performs validation of
metadata associated with the checkpoint stored in places
besides the checkpoint XML. Note that some hypervisors may
require that the domain is running to perform
validation.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--quiesce</i> is specified, libvirt will try to use guest
agent to freeze and unfreeze domain's mounted file systems.
However, if domain has no guest agent, checkpoint creation
will fail.</p>

<p style="margin-left:9%; margin-top: 1em">Existence of
checkpoint metadata will prevent attempts to <b>undefine</b>
a persistent guest. However, for transient domains,
checkpoint metadata is silently lost when the domain quits
running (whether by command such as <b>destroy</b> or by
internal guest action).</p>

<p style="margin-left:9%; margin-top: 1em">For now, it is
not possible to create checkpoints in a domain that has
snapshots, although this restriction will be lifted in a
future release.</p>

<h3>checkpoint-create-as
<a name="checkpoint-create-as"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">checkpoint-create-as
domain [--print-xml] [name] <br>
[description] [--quiesce] [--diskspec] diskspec]...</p>

<p style="margin-left:9%; margin-top: 1em">Create a
checkpoint for domain <i>domain</i> with the given
&lt;name&gt; and &lt;description&gt;; if either value is
omitted, libvirt will choose a value. If <i>--print-xml</i>
is specified, then XML appropriate for
<i>checkpoint-create</i> is output, rather than actually
creating a checkpoint.</p>

<p style="margin-left:9%; margin-top: 1em">The
<i>--diskspec</i> option can be used to control which guest
disks participate in the checkpoint. This option can occur
multiple times, according to the number of &lt;disk&gt;
elements in the domain xml. Each &lt;diskspec&gt; is in the
form <b>disk[,checkpoint=type][,bitmap=name]</b>. A literal
<i>--diskspec</i> must precede each <b>diskspec</b> unless
all three of <i>domain</i>, <i>name</i>, and
<i>description</i> are also present. For example, a diskspec
of &quot;vda,checkpoint=bitmap,bitmap=map1&quot; results in
the following XML:</p>

<p style="margin-left:13%; margin-top: 1em">&lt;disk
name='vda' checkpoint='bitmap' bitmap='map1'/&gt;</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--quiesce</i> is specified, libvirt will try to use guest
agent to freeze and unfreeze domain's mounted file systems.
However, if domain has no guest agent, checkpoint creation
will fail.</p>

<p style="margin-left:9%; margin-top: 1em">For now, it is
not possible to create checkpoints in a domain that has
snapshots, although this restriction will be lifted in a
future release.</p>

<h3>checkpoint-edit
<a name="checkpoint-edit"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">checkpoint-edit
domain checkpointname</p>

<p style="margin-left:9%; margin-top: 1em">Edit the XML
configuration file for <i>checkpointname</i> of a
domain.</p>

<p style="margin-left:9%; margin-top: 1em">This is
equivalent to:</p>

<p style="margin-left:13%; margin-top: 1em">virsh
checkpoint-dumpxml dom name &gt; checkpoint.xml <br>
vi checkpoint.xml (or make changes with your other text
editor) <br>
virsh checkpoint-create dom checkpoint.xml --redefine</p>

<p style="margin-left:9%; margin-top: 1em">except that it
does some error checking, including that the edits should
not attempt to change the checkpoint name.</p>

<p style="margin-left:9%; margin-top: 1em">The editor used
can be supplied by the <b>$VISUAL</b> or <b>$EDITOR</b>
environment variables, and defaults to <b>vi</b>.</p>

<h3>checkpoint-info
<a name="checkpoint-info"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">checkpoint-info
domain checkpoint</p>

<p style="margin-left:9%; margin-top: 1em">Output basic
information about a named &lt;checkpoint&gt;.</p>

<h3>checkpoint-list
<a name="checkpoint-list"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">checkpoint-list
domain [{--parent | --roots | <br>
[{--tree | --name}]}] [--topological] <br>
[[--from] checkpoint | [--descendants]] <br>
[--leaves] [--no-leaves]</p>

<p style="margin-left:9%; margin-top: 1em">List all of the
available checkpoints for the given domain, defaulting to
show columns for the checkpoint name and creation time.</p>

<p style="margin-left:9%; margin-top: 1em">Normally, table
form output is sorted by checkpoint name; using
<i>--topological</i> instead sorts so that no child is
listed before its ancestors (although there may be more than
one possible ordering with this property).</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--parent</i> is specified, add a column to the output
table giving the name of the parent of each checkpoint. If
<i>--roots</i> is specified, the list will be filtered to
just checkpoints that have no parents. If <i>--tree</i> is
specified, the output will be in a tree format, listing just
checkpoint names. These three options are mutually
exclusive.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--name</i>
is specified only the checkpoint name is printed optionally
followed by a tab-separated name of the parent checkpoint if
<i>--parent</i> is used as well. This option is mutually
exclusive with <i>--tree</i>.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--from</i>
is provided, filter the list to checkpoints which are
children of the given <b>checkpoint</b>. When used in
isolation or with <i>--parent</i>, the list is limited to
direct children unless <i>--descendants</i> is also present.
When used with <i>--tree</i>, the use of
<i>--descendants</i> is implied. This option is not
compatible with <i>--roots</i>. Note that the starting point
of <i>--from</i> is not included in the list unless the
<i>--tree</i> option is also present.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--leaves</i> is specified, the list will be filtered to
just checkpoints that have no children. Likewise, if
<i>--no-leaves</i> is specified, the list will be filtered
to just checkpoints with children. (Note that omitting both
options does no filtering, while providing both options will
either produce the same list or error out depending on
whether the server recognizes the flags). Filtering options
are not compatible with <i>--tree</i>.</p>

<h3>checkpoint-dumpxml
<a name="checkpoint-dumpxml"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">checkpoint-dumpxml
[--security-info] [--no-domain] [--size] <br>
[--xpath EXPRESSION] [--wrap] domain checkpoint</p>

<p style="margin-left:9%; margin-top: 1em">Output the
checkpoint XML for the domain's checkpoint named
<i>checkpoint</i>. Using <i>--security-info</i> will also
include security sensitive information.</p>

<p style="margin-left:9%; margin-top: 1em">Using
<i>--size</i> will add XML indicating the current size in
bytes of guest data that has changed since the checkpoint
was created (although remember that guest activity between a
size check and actually creating a backup can result in the
backup needing slightly more space). Note that some
hypervisors may require that <i>domain</i> is running when
<i>--size</i> is used.</p>

<p style="margin-left:9%; margin-top: 1em">Using
<i>--no-domain</i> will omit the &lt;domain&gt; element from
the output for a more compact view.</p>

<p style="margin-left:9%; margin-top: 1em">If the
<b>--xpath</b> argument provides an XPath expression, it
will be evaluated against the output XML and only those
matching nodes will be printed. The default behaviour is to
print each matching node as a standalone document, however,
for ease of additional processing, the <b>--wrap</b>
argument will cause the matching node to be wrapped in a
common root node.</p>

<h3>checkpoint-parent
<a name="checkpoint-parent"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">checkpoint-parent
domain checkpoint</p>

<p style="margin-left:9%; margin-top: 1em">Output the name
of the parent checkpoint, if any, for the given
<i>checkpoint</i>.</p>

<h3>checkpoint-delete
<a name="checkpoint-delete"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">checkpoint-delete
domain checkpoint <br>
[--metadata] [{--children | --children-only}]</p>

<p style="margin-left:9%; margin-top: 1em">Delete the
checkpoint for the domain named <i>checkpoint</i>. The
record of which portions of the disk changed since the
checkpoint are merged into the parent checkpoint (if any).
If <i>--children</i> is passed, then delete this checkpoint
and any children of this checkpoint. If
<i>--children-only</i> is passed, then delete any children
of this checkpoint, but leave this checkpoint intact. These
two flags are mutually exclusive.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--metadata</i> is specified, then only delete the
checkpoint metadata maintained by libvirt, while leaving the
checkpoint contents intact for access by external tools;
otherwise deleting a checkpoint also removes the ability to
perform an incremental backup from that point in time.</p>

<h2>NWFILTER COMMANDS
<a name="NWFILTER COMMANDS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The following
commands manipulate network filters. Network filters allow
filtering of the network traffic coming from and going to
virtual machines. Individual network traffic filters are
written in XML and may contain references to other network
filters, describe traffic filtering rules, or contain both.
Network filters are referenced by virtual machines from
within their interface description. A network filter may be
referenced by multiple virtual machines' interfaces.</p>

<h3>nwfilter-define
<a name="nwfilter-define"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">nwfilter-define
xmlfile [--validate]</p>

<p style="margin-left:9%; margin-top: 1em">Make a new
network filter known to libvirt. If a network filter with
the same name already exists, it will be replaced with the
new XML. Any running virtual machine referencing this
network filter will have its network traffic rules adapted.
If for any reason the network traffic filtering rules cannot
be instantiated by any of the running virtual machines, then
the new XML will be rejected.</p>

<p style="margin-left:9%; margin-top: 1em">Optionally, the
format of the input XML file can be validated against an
internal RNG schema with <i>--validate</i>.</p>

<h3>nwfilter-undefine
<a name="nwfilter-undefine"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">nwfilter-undefine
nwfilter-name</p>

<p style="margin-left:9%; margin-top: 1em">Delete a network
filter. The deletion will fail if any running virtual
machine is currently using this network filter.</p>

<h3>nwfilter-list
<a name="nwfilter-list"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">nwfilter-list</p>

<p style="margin-left:9%; margin-top: 1em">List all of the
available network filters.</p>

<h3>nwfilter-dumpxml
<a name="nwfilter-dumpxml"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">nwfilter-dumpxml
[--xpath EXPRESSION] [--wrap] nwfilter-name</p>

<p style="margin-left:9%; margin-top: 1em">Output the
network filter XML.</p>

<p style="margin-left:9%; margin-top: 1em">If the
<b>--xpath</b> argument provides an XPath expression, it
will be evaluated against the output XML and only those
matching nodes will be printed. The default behaviour is to
print each matching node as a standalone document, however,
for ease of additional processing, the <b>--wrap</b>
argument will cause the matching node to be wrapped in a
common root node.</p>

<h3>nwfilter-edit
<a name="nwfilter-edit"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">nwfilter-edit
nwfilter-name</p>

<p style="margin-left:9%; margin-top: 1em">Edit the XML of
a network filter.</p>

<p style="margin-left:9%; margin-top: 1em">This is
equivalent to:</p>

<p style="margin-left:13%; margin-top: 1em">virsh
nwfilter-dumpxml myfilter &gt; myfilter.xml <br>
vi myfilter.xml (or make changes with your other text
editor) <br>
virsh nwfilter-define myfilter.xml</p>

<p style="margin-left:9%; margin-top: 1em">except that it
does some error checking. The new network filter may be
rejected due to the same reason as mentioned in
<i>nwfilter-define</i>.</p>

<p style="margin-left:9%; margin-top: 1em">The editor used
can be supplied by the <b>$VISUAL</b> or <b>$EDITOR</b>
environment variables, and defaults to <b>vi</b>.</p>

<h2>NWFILTER BINDING COMMANDS
<a name="NWFILTER BINDING COMMANDS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The following
commands manipulate network filter bindings. Network filter
bindings track the association between a network port and a
network filter. Generally the bindings are managed
automatically by the hypervisor drivers when adding/removing
NICs on a guest.</p>

<p style="margin-left:9%; margin-top: 1em">If an admin is
creating/deleting TAP devices for non-guest usage, however,
the network filter binding commands provide a way to make
use of the network filters directly.</p>

<h3>nwfilter-binding-create
<a name="nwfilter-binding-create"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">nwfilter-binding-create
xmlfile [--validate]</p>

<p style="margin-left:9%; margin-top: 1em">Associate a
network port with a network filter. The network filter
backend will immediately attempt to instantiate the filter
rules on the port. This command may be used to associate a
filter with a currently running guest that does not have a
filter defined for a specific network port. Since the
bindings are generally automatically managed by the
hypervisor, using this command to define a filter for a
network port and then starting the guest afterwards may
prevent the guest from starting if it attempts to use the
network port and finds a filter already defined.</p>

<p style="margin-left:9%; margin-top: 1em">Optionally, the
format of the input XML file can be validated against an
internal RNG schema with <i>--validate</i>.</p>

<h3>nwfilter-binding-delete
<a name="nwfilter-binding-delete"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">nwfilter-binding-delete
port-name</p>

<p style="margin-left:9%; margin-top: 1em">Disassociate a
network port from a network filter. The network filter
backend will immediately tear down the filter rules that
exist on the port. This command may be used to remove the
network port binding for a filter currently in use for the
guest while the guest is running without needing to restart
the guest. Restoring the network port binding filter for the
running guest would be accomplished by using
<i>nwfilter-binding-create</i>.</p>

<h3>nwfilter-binding-list
<a name="nwfilter-binding-list"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">nwfilter-binding-list</p>

<p style="margin-left:9%; margin-top: 1em">List all of the
network ports which have filters associated with them.</p>

<h3>nwfilter-binding-dumpxml
<a name="nwfilter-binding-dumpxml"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">nwfilter-binding-dumpxml
[--xpath EXPRESSION] [--wrap] port-name</p>

<p style="margin-left:9%; margin-top: 1em">Output the
network filter binding XML for the network device called
<b>port-name</b>.</p>

<p style="margin-left:9%; margin-top: 1em">If the
<b>--xpath</b> argument provides an XPath expression, it
will be evaluated against the output XML and only those
matching nodes will be printed. The default behaviour is to
print each matching node as a standalone document, however,
for ease of additional processing, the <b>--wrap</b>
argument will cause the matching node to be wrapped in a
common root node.</p>

<h2>HYPERVISOR-SPECIFIC COMMANDS
<a name="HYPERVISOR-SPECIFIC COMMANDS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">NOTE: Use of the
following commands is <b>strongly</b> discouraged. They can
cause libvirt to become confused and do the wrong thing on
subsequent operations. Once you have used these commands,
please do not report problems to the libvirt developers; the
reports will be ignored. If you find that these commands are
the only way to accomplish something, then it is better to
request that the feature be added as a first-class citizen
in the regular libvirt library.</p>

<h3>qemu-attach
<a name="qemu-attach"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>

<p style="margin-left:13%; margin-top: 1em">qemu-attach
pid</p>

<p style="margin-left:9%; margin-top: 1em">Attach an
externally launched QEMU process to the libvirt QEMU driver.
The QEMU process must have been created with a monitor
connection using the UNIX driver. Ideally the process will
also have had the '-name' argument specified.</p>

<p style="margin-left:13%; margin-top: 1em">$ qemu-kvm
-cdrom &#732;/demo.iso \ <br>
-monitor unix:/tmp/demo,server,nowait \ <br>
-name foo \ <br>
-uuid cece4f9f-dff0-575d-0e8e-01fe380f12ea &amp; <br>
$ QEMUPID=$! <br>
$ virsh qemu-attach $QEMUPID</p>

<p style="margin-left:9%; margin-top: 1em">Not all
functions of libvirt are expected to work reliably after
attaching to an externally launched QEMU process. There may
be issues with the guest ABI changing upon migration and
device hotplug or hotunplug may not work. The attached
environment should be considered primarily read-only.</p>

<h3>qemu-monitor-command
<a name="qemu-monitor-command"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">qemu-monitor-command
domain { [--hmp] | [--pretty] [--return-value] } <br>
[--pass-fds N,M,...] command...</p>

<p style="margin-left:9%; margin-top: 1em">Send an
arbitrary monitor command <i>command</i> to domain
<i>domain</i> through the QEMU monitor. The results of the
command will be printed on stdout.</p>

<p style="margin-left:9%; margin-top: 1em">If more than one
argument is provided for <i>command</i>, they are
concatenated with a space in between before passing the
single command to the monitor.</p>

<p style="margin-left:9%; margin-top: 1em">Note that
libvirt uses the QMP to talk to qemu so <i>command</i> must
be valid JSON in QMP format to work properly. If
<i>command</i> is not a JSON object libvirt tries to wrap it
as a JSON object to provide convenient interface such as the
groups of commands with identical handling:</p>

<p style="margin-left:13%; margin-top: 1em"># simple
command <br>
$ virsh qemu-monitor-command VM commandname <br>
$ virsh qemu-monitor-command VM
'{&quot;execute&quot;:&quot;commandname&quot;}'</p>

<p style="margin-left:13%; margin-top: 1em"># with
arguments <br>
$ virsh qemu-monitor-command VM commandname
'&quot;arg1&quot;:123' '&quot;arg2&quot;:&quot;test&quot;'
<br>
$ virsh qemu-monitor-command VM commandname
'{&quot;arg1&quot;:123,&quot;arg2&quot;:&quot;test&quot;}'
<br>
$ virsh qemu-monitor-command VM
'{&quot;execute&quot;:&quot;commandname&quot;,
&quot;arguments&quot;:{&quot;arg1&quot;:123,&quot;arg2&quot;:&quot;test&quot;}}'</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--pretty</i> is given the QMP reply is
pretty-printed.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--return-value</i> is given the 'return' key of the QMP
response object is extracted rather than passing through the
full reply from QEMU.</p>

<p style="margin-left:9%; margin-top: 1em">If <i>--hmp</i>
is passed, the command is considered to be a human monitor
command and libvirt will automatically convert it into QMP
and convert the result back.</p>

<p style="margin-left:9%; margin-top: 1em">If
<i>--pass-fds</i> is specified, the argument is a comma
separated list of open file descriptors which should be
passed on to qemu along with the command.</p>

<h3>qemu-agent-command
<a name="qemu-agent-command"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">qemu-agent-command
domain [--timeout seconds | --async | --block]
command...</p>

<p style="margin-left:9%; margin-top: 1em">Send an
arbitrary guest agent command <i>command</i> to domain
<i>domain</i> through QEMU agent. <i>--timeout</i>,
<i>--async</i> and <i>--block</i> options are exclusive.
<i>--timeout</i> requires timeout seconds <i>seconds</i> and
it must be positive. When <i>--aysnc</i> is given, the
command waits for timeout whether success or failed. And
when <i>--block</i> is given, the command waits forever with
blocking timeout.</p>

<h3>qemu-monitor-event
<a name="qemu-monitor-event"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">qemu-monitor-event
[domain] [--event event-name] <br>
[--loop] [--timeout seconds] [--pretty] [--regex]
[--no-case] <br>
[--timestamp]</p>

<p style="margin-left:9%; margin-top: 1em">Wait for
arbitrary QEMU monitor events to occur, and print out the
details of events as they happen. The events can optionally
be filtered by <i>domain</i> or <i>event-name</i>. The
'query-events' QMP command can be used via
<i>qemu-monitor-command</i> to learn what events are
supported. If <i>--regex</i> is used, <i>event-name</i> is a
basic regular expression instead of a literal string. If
<i>--no-case</i> is used, <i>event-name</i> will match
case-insensitively.</p>

<p style="margin-left:9%; margin-top: 1em">By default, this
command is one-shot, and returns success once an event
occurs; you can send SIGINT (usually via <b>Ctrl-C</b>) to
quit immediately. If <i>--timeout</i> is specified, the
command gives up waiting for events after <i>seconds</i>
have elapsed. With <i>--loop</i>, the command prints all
events until a timeout or interrupt key. If <i>--pretty</i>
is specified, any JSON event details are pretty-printed for
better legibility.</p>

<p style="margin-left:9%; margin-top: 1em">When
<i>--timestamp</i> is used, a human-readable timestamp will
be printed before the event, and the timing information
provided by QEMU will be omitted.</p>

<h3>lxc-enter-namespace
<a name="lxc-enter-namespace"></a>
</h3>



<p style="margin-left:9%; margin-top: 1em"><b>Syntax:</b></p>


<p style="margin-left:13%; margin-top: 1em">lxc-enter-namespace
domain [--noseclabel] -- <br>
/path/to/binary [arg1, [arg2, ...]]</p>

<p style="margin-left:9%; margin-top: 1em">Enter the
namespace of <i>domain</i> and execute the command
<b>/path/to/binary</b> passing the requested args. The
binary path is relative to the container root filesystem,
not the host root filesystem. The binary will inherit the
environment variables / console visible to virsh. The
command will be run with the same sVirt context and cgroups
placement as processes within the container. This command
only works when connected to the LXC hypervisor driver. This
command succeeds only if <b>/path/to/binary</b> has 0 exit
status.</p>

<p style="margin-left:9%; margin-top: 1em">By default the
new process will run with the security label of the new
parent container. Use the <i>--noseclabel</i> option to
instead have the process keep the same security label as
<b>virsh</b>.</p>

<h2>ENVIRONMENT
<a name="ENVIRONMENT"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The following
environment variables can be set to alter the behaviour of
<b>virsh</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="25%">


<p style="margin-top: 1em">VIRSH_DEBUG=&lt;0 to 4&gt;</p></td>
<td width="63%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">Turn on verbose
debugging of virsh commands. Valid levels are</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="1%"></td>
<td width="17%">


<p style="margin-top: 1em">VIRSH_DEBUG=0</p></td>
<td width="69%">
</td></tr>
</table>

<p style="margin-left:14%; margin-top: 1em">DEBUG -
Messages at ALL levels get logged</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="1%"></td>
<td width="17%">


<p style="margin-top: 1em">VIRSH_DEBUG=1</p></td>
<td width="69%">
</td></tr>
</table>

<p style="margin-left:14%; margin-top: 1em">INFO - Logs
messages at levels INFO, NOTICE, WARNING and ERROR</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="1%"></td>
<td width="17%">


<p style="margin-top: 1em">VIRSH_DEBUG=2</p></td>
<td width="69%">
</td></tr>
</table>

<p style="margin-left:14%; margin-top: 1em">NOTICE - Logs
messages at levels NOTICE, WARNING and ERROR</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="1%"></td>
<td width="17%">


<p style="margin-top: 1em">VIRSH_DEBUG=3</p></td>
<td width="69%">
</td></tr>
</table>

<p style="margin-left:14%; margin-top: 1em">WARNING - Logs
messages at levels WARNING and ERROR</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="1%"></td>
<td width="17%">


<p style="margin-top: 1em">VIRSH_DEBUG=4</p></td>
<td width="69%">
</td></tr>
</table>

<p style="margin-left:14%; margin-top: 1em">ERROR -
Messages at only ERROR level gets logged.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="33%">


<p style="margin-top: 1em">VIRSH_LOG_FILE=``LOGFILE``</p></td>
<td width="55%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The file to log
virsh debug messages.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="32%">


<p style="margin-top: 1em">VIRSH_DEFAULT_CONNECT_URI</p></td>
<td width="56%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The hypervisor
to connect to by default. Set this to a URI, in the same
format as accepted by the <b>connect</b> option. This
environment variable is deprecated in favour of the global
<b>LIBVIRT_DEFAULT_URI</b> variable which serves the same
purpose.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="24%">


<p style="margin-top: 1em">LIBVIRT_DEFAULT_URI</p></td>
<td width="64%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The hypervisor
to connect to by default. Set this to a URI, in the same
format as accepted by the <b>connect</b> option. This
overrides the default URI set in any client config file and
prevents libvirt from probing for drivers.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="7%">


<p style="margin-top: 1em">VISUAL</p></td>
<td width="81%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The editor to
use by the <b>edit</b> and related options.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="7%">


<p style="margin-top: 1em">EDITOR</p></td>
<td width="81%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The editor to
use by the <b>edit</b> and related options, if <b>VISUAL</b>
is not set.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="17%">


<p style="margin-top: 1em">VIRSH_HISTSIZE</p></td>
<td width="71%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">The number of
commands to remember in the command history. The default
value is 500.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="24%">


<p style="margin-top: 1em">LIBVIRT_DEBUG=LEVEL</p></td>
<td width="64%">
</td></tr>
</table>

<p style="margin-left:12%; margin-top: 1em">Turn on verbose
debugging of all libvirt API calls. Valid levels are</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="1%"></td>
<td width="19%">


<p style="margin-top: 1em">LIBVIRT_DEBUG=1</p></td>
<td width="67%">
</td></tr>
</table>

<p style="margin-left:14%; margin-top: 1em">Messages at
level DEBUG or above</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="1%"></td>
<td width="19%">


<p style="margin-top: 1em">LIBVIRT_DEBUG=2</p></td>
<td width="67%">
</td></tr>
</table>

<p style="margin-left:14%; margin-top: 1em">Messages at
level INFO or above</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="1%"></td>
<td width="19%">


<p style="margin-top: 1em">LIBVIRT_DEBUG=3</p></td>
<td width="67%">
</td></tr>
</table>

<p style="margin-left:14%; margin-top: 1em">Messages at
level WARNING or above</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="1%"></td>
<td width="19%">


<p style="margin-top: 1em">LIBVIRT_DEBUG=4</p></td>
<td width="67%">
</td></tr>
</table>

<p style="margin-left:14%; margin-top: 1em">Messages at
level ERROR</p>

<p style="margin-left:9%; margin-top: 1em">For further
information about debugging options consult <br>
&lt;https://libvirt.org/logging.html&gt;</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Please report
all bugs you discover. This should be done via either:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p style="margin-top: 1em">1.</p></td>
<td width="1%"></td>
<td width="20%">


<p style="margin-top: 1em">the mailing list</p></td>
<td width="67%">
</td></tr>
</table>


<p style="margin-left:13%; margin-top: 1em">&lt;https://libvirt.org/contact.html&gt;</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p style="margin-top: 1em">2.</p></td>
<td width="1%"></td>
<td width="19%">


<p style="margin-top: 1em">the bug tracker</p></td>
<td width="68%">
</td></tr>
</table>


<p style="margin-left:13%; margin-top: 1em">&lt;https://libvirt.org/bugs.html&gt;</p>

<p style="margin-left:9%; margin-top: 1em">Alternatively,
you may report bugs to your software distributor /
vendor.</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Please refer to
the AUTHORS file distributed with libvirt.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Copyright (C)
2005, 2007-2015 Red Hat, Inc., and the authors listed in the
libvirt AUTHORS file.</p>

<h2>LICENSE
<a name="LICENSE"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em"><b>virsh</b> is
distributed under the terms of the GNU LGPL v2+. This is
free software; see the source for copying conditions. There
is NO warranty; not even for MERCHANTABILITY or FITNESS FOR
A PARTICULAR PURPOSE</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em">virt-install(1),
virt-xml-validate(1), virt-top(1), virt-df(1), <br>
 &lt;https://libvirt.org/&gt;</p>
<hr>
</body>
</html>
