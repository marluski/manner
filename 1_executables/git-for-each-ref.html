<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Mon Apr  7 17:26:02 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>GIT-FOR-EACH-REF</title>

</head>
<body>

<h1 align="center">GIT-FOR-EACH-REF</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#FIELD NAMES">FIELD NAMES</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#CAVEATS">CAVEATS</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#GIT">GIT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em">git-for-each-ref
- Output information on each ref</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em"><i>git
for-each-ref</i> [--count=&lt;count&gt;]
[--shell|--perl|--python|--tcl] <br>
[(--sort=&lt;key&gt;)...] [--format=&lt;format&gt;] <br>
[--include-root-refs] [ --stdin | &lt;pattern&gt;... ] <br>
[--points-at=&lt;object&gt;] <br>
[--merged[=&lt;object&gt;]] [--no-merged[=&lt;object&gt;]]
<br>
[--contains[=&lt;object&gt;]]
[--no-contains[=&lt;object&gt;]] <br>
[--exclude=&lt;pattern&gt; ...]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Iterate over all
refs that match <i>&lt;pattern&gt;</i> and show them
according to the given <i>&lt;format&gt;</i>, after sorting
them according to the given set of <i>&lt;key&gt;</i>. If
<i>&lt;count&gt;</i> is given, stop after showing that many
refs. The interpolated values in <i>&lt;format&gt;</i> can
optionally be quoted as string literals in the specified
host language allowing their direct evaluation in that
language.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em">&lt;pattern&gt;...</p>

<p style="margin-left:14%;">If one or more patterns are
given, only refs are shown that match against at least one
pattern, either using fnmatch(3) or literally, in the latter
case matching completely or from the beginning up to a
slash.</p>

<p style="margin-left:9%; margin-top: 1em">--stdin</p>

<p style="margin-left:14%;">If <b>--stdin</b> is supplied,
then the list of patterns is read from standard input
instead of from the argument list.</p>


<p style="margin-left:9%; margin-top: 1em">--count=&lt;count&gt;</p>

<p style="margin-left:14%;">By default the command shows
all refs that match <i>&lt;pattern&gt;</i>. This option
makes it stop after showing that many refs.</p>


<p style="margin-left:9%; margin-top: 1em">--sort=&lt;key&gt;</p>

<p style="margin-left:14%;">A field name to sort on. Prefix
<b>-</b> to sort in descending order of the value. When
unspecified, <b>refname</b> is used. You may use the
--sort=&lt;key&gt; option multiple times, in which case the
last key becomes the primary key.</p>


<p style="margin-left:9%; margin-top: 1em">--format=&lt;format&gt;</p>

<p style="margin-left:14%;">A string that interpolates
%(<b>fieldname</b>) from a ref being shown and the object it
points at. In addition, the string literal %% renders as %
and %xx - where <b>xx</b> are hex digits - renders as the
character with hex code <b>xx</b>. For example, %00
interpolates to \0 (NUL), %09 to \t (TAB), and %0a to \n
(LF).</p>

<p style="margin-left:14%; margin-top: 1em">When
unspecified, <i>&lt;format&gt;</i> defaults to
%(<b>objectname</b>) <b>SPC</b> %(<b>objecttype</b>)
<b>TAB</b> %(<b>refname</b>).</p>


<p style="margin-left:9%; margin-top: 1em">--color[=&lt;when&gt;]</p>

<p style="margin-left:14%;">Respect any colors specified in
the <b>--format</b> option. The <i>&lt;when&gt;</i> field
must be one of <b>always</b>, <b>never</b>, or <b>auto</b>
(if <i>&lt;when&gt;</i> is absent, behave as if
<b>always</b> was given).</p>

<p style="margin-left:9%; margin-top: 1em">--shell, --perl,
--python, --tcl</p>

<p style="margin-left:14%;">If given, strings that
substitute %(<b>fieldname</b>) placeholders are quoted as
string literals suitable for the specified host language.
This is meant to produce a scriptlet that can directly be
&lsquo;eval&lsquo;ed.</p>


<p style="margin-left:9%; margin-top: 1em">--points-at=&lt;object&gt;</p>

<p style="margin-left:14%;">Only list refs which points at
the given object.</p>


<p style="margin-left:9%; margin-top: 1em">--merged[=&lt;object&gt;]</p>

<p style="margin-left:14%;">Only list refs whose tips are
reachable from the specified commit (HEAD if not
specified).</p>


<p style="margin-left:9%; margin-top: 1em">--no-merged[=&lt;object&gt;]</p>

<p style="margin-left:14%;">Only list refs whose tips are
not reachable from the specified commit (HEAD if not
specified).</p>


<p style="margin-left:9%; margin-top: 1em">--contains[=&lt;object&gt;]</p>

<p style="margin-left:14%;">Only list refs which contain
the specified commit (HEAD if not specified).</p>


<p style="margin-left:9%; margin-top: 1em">--no-contains[=&lt;object&gt;]</p>

<p style="margin-left:14%;">Only list refs which
don&rsquo;t contain the specified commit (HEAD if not
specified).</p>


<p style="margin-left:9%; margin-top: 1em">--ignore-case</p>

<p style="margin-left:14%;">Sorting and filtering refs are
case insensitive.</p>


<p style="margin-left:9%; margin-top: 1em">--omit-empty</p>

<p style="margin-left:14%;">Do not print a newline after
formatted refs where the format expands to the empty
string.</p>


<p style="margin-left:9%; margin-top: 1em">--exclude=&lt;pattern&gt;</p>

<p style="margin-left:14%;">If one or more patterns are
given, only refs which do not match any excluded pattern(s)
are shown. Matching is done using the same rules as
<i>&lt;pattern&gt;</i> above.</p>


<p style="margin-left:9%; margin-top: 1em">--include-root-refs</p>

<p style="margin-left:14%;">List root refs (HEAD and
pseudorefs) apart from regular refs.</p>

<h2>FIELD NAMES
<a name="FIELD NAMES"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Various values
from structured fields in referenced objects can be used to
interpolate into the resulting output, or as sort keys.</p>

<p style="margin-left:9%; margin-top: 1em">For all objects,
the following names can be used:</p>

<p style="margin-left:9%; margin-top: 1em">refname</p>

<p style="margin-left:14%;">The name of the ref (the part
after $GIT_DIR/). For a non-ambiguous short name of the ref
append <b>:short</b>. The option core.warnAmbiguousRefs is
used to select the strict abbreviation mode. If
<b>lstrip=</b><i>&lt;N&gt;</i>
(<b>rstrip=</b><i>&lt;N&gt;</i>) is appended, strips
<i>&lt;N&gt;</i> slash-separated path components from the
front (back) of the refname (e.g. %(<b>refname:lstrip=2</b>)
turns <b>refs/tags/foo</b> into <b>foo</b> and
%(<b>refname:rstrip=2</b>) turns <b>refs/tags/foo</b> into
<b>refs</b>). If <i>&lt;N&gt;</i> is a negative number,
strip as many path components as necessary from the
specified end to leave <b>-</b><i>&lt;N&gt;</i> path
components (e.g. %(<b>refname:lstrip=-2</b>) turns
<b>refs/tags/foo</b> into <b>tags/foo</b> and
%(<b>refname:rstrip=-1</b>) turns <b>refs/tags/foo</b> into
<b>refs</b>). When the ref does not have enough components,
the result becomes an empty string if stripping with
positive &lt;N&gt;, or it becomes the full refname if
stripping with negative &lt;N&gt;. Neither is an error.</p>

<p style="margin-left:14%; margin-top: 1em"><b>strip</b>
can be used as a synonym to <b>lstrip</b>.</p>

<p style="margin-left:9%; margin-top: 1em">objecttype</p>

<p style="margin-left:14%;">The type of the object
(<b>blob</b>, <b>tree</b>, <b>commit</b>, <b>tag</b>).</p>

<p style="margin-left:9%; margin-top: 1em">objectsize</p>

<p style="margin-left:14%;">The size of the object (the
same as <i>git cat-file -s</i> reports). Append <b>:disk</b>
to get the size, in bytes, that the object takes up on disk.
See the note about on-disk sizes in the <b>CAVEATS</b>
section below.</p>

<p style="margin-left:9%; margin-top: 1em">objectname</p>

<p style="margin-left:14%;">The object name (aka SHA-1).
For a non-ambiguous abbreviation of the object name append
<b>:short</b>. For an abbreviation of the object name with
desired length append <b>:short=</b><i>&lt;length&gt;</i>,
where the minimum length is MINIMUM_ABBREV. The length may
be exceeded to ensure unique object names.</p>

<p style="margin-left:9%; margin-top: 1em">deltabase</p>

<p style="margin-left:14%;">This expands to the object name
of the delta base for the given object, if it is stored as a
delta. Otherwise it expands to the null object name (all
zeroes).</p>

<p style="margin-left:9%; margin-top: 1em">upstream</p>

<p style="margin-left:14%;">The name of a local ref which
can be considered &ldquo;upstream&rdquo; from the displayed
ref. Respects <b>:short</b>, <b>:lstrip</b> and
<b>:rstrip</b> in the same way as <b>refname</b> above.
Additionally respects <b>:track</b> to show &quot;[ahead N,
behind M]&quot; and <b>:trackshort</b> to show the terse
version: &quot;&gt;&quot; (ahead), &quot;&lt;&quot;
(behind), &quot;&lt;&gt;&quot; (ahead and behind), or
&quot;=&quot; (in sync). <b>:track</b> also prints
&quot;[gone]&quot; whenever unknown upstream ref is
encountered. Append <b>:track,nobracket</b> to show tracking
information without brackets (i.e &quot;ahead N, behind
M&quot;).</p>

<p style="margin-left:14%; margin-top: 1em">For any
remote-tracking branch %(<b>upstream</b>),
%(<b>upstream:remotename</b>) and
%(<b>upstream:remoteref</b>) refer to the name of the remote
and the name of the tracked remote ref, respectively. In
other words, the remote-tracking branch can be updated
explicitly and individually by using the refspec
%(<b>upstream:remoteref</b>)<b>:</b>%(<b>upstream</b>) to
fetch from %(<b>upstream:remotename</b>).</p>

<p style="margin-left:14%; margin-top: 1em">Has no effect
if the ref does not have tracking information associated
with it. All the options apart from <b>nobracket</b> are
mutually exclusive, but if used together the last option is
selected.</p>

<p style="margin-left:9%; margin-top: 1em">push</p>

<p style="margin-left:14%;">The name of a local ref which
represents the <b>@</b>{push} location for the displayed
ref. Respects <b>:short</b>, <b>:lstrip</b>, <b>:rstrip</b>,
<b>:track</b>, <b>:trackshort</b>, <b>:remotename</b>, and
<b>:remoteref</b> options as <b>upstream</b> does. Produces
an empty string if no <b>@</b>{push} ref is configured.</p>

<p style="margin-left:9%; margin-top: 1em">HEAD</p>

<p style="margin-left:14%;"><i>*</i> if HEAD matches
current ref (the checked out branch), ' ' otherwise.</p>

<p style="margin-left:9%; margin-top: 1em">color</p>

<p style="margin-left:14%;">Change output color. Followed
by <b>:</b><i>&lt;colorname&gt;</i>, where color names are
described under Values in the &quot;CONFIGURATION FILE&quot;
section of <b>git-config</b>(1). For example,
%(<b>color:bold red</b>).</p>

<p style="margin-left:9%; margin-top: 1em">align</p>

<p style="margin-left:14%;">Left-, middle-, or right-align
the content between %(align:...) and %(end). The
&quot;align:&quot; is followed by
<b>width=</b><i>&lt;width&gt;</i> and
<b>position=</b><i>&lt;position&gt;</i> in any order
separated by a comma, where the <i>&lt;position&gt;</i> is
either left, right or middle, default being left and
<i>&lt;width&gt;</i> is the total length of the content with
alignment. For brevity, the &quot;width=&quot; and/or
&quot;position=&quot; prefixes may be omitted, and bare
&lt;width&gt; and &lt;position&gt; used instead. For
instance,
%(<b>align:</b><i>&lt;width&gt;</i><b>,</b><i>&lt;position&gt;</i>).
If the contents length is more than the width then no
alignment is performed. If used with <b>--quote</b>
everything in between %(align:...) and %(end) is quoted, but
if nested then only the topmost level performs quoting.</p>

<p style="margin-left:9%; margin-top: 1em">if</p>

<p style="margin-left:14%;">Used as
%(if)...%(then)...%(end) or
%(if)...%(then)...%(else)...%(end). If there is an atom with
value or string literal after the %(if) then everything
after the %(then) is printed, else if the %(else) atom is
used, then everything after %(else) is printed. We ignore
space when evaluating the string before %(then), this is
useful when we use the %(HEAD) atom which prints either
&quot;*&quot; or &quot; &quot; and we want to apply the
<i>if</i> condition only on the <i>HEAD</i> ref. Append
&quot;:equals=&lt;string&gt;&quot; or
&quot;:notequals=&lt;string&gt;&quot; to compare the value
between the %(if:...) and %(then) atoms with the given
string.</p>

<p style="margin-left:9%; margin-top: 1em">symref</p>

<p style="margin-left:14%;">The ref which the given
symbolic ref refers to. If not a symbolic ref, nothing is
printed. Respects the <b>:short</b>, <b>:lstrip</b> and
<b>:rstrip</b> options in the same way as <b>refname</b>
above.</p>

<p style="margin-left:9%; margin-top: 1em">signature</p>

<p style="margin-left:14%;">The GPG signature of a
commit.</p>


<p style="margin-left:9%; margin-top: 1em">signature:grade</p>

<p style="margin-left:14%;">Show &quot;G&quot; for a good
(valid) signature, &quot;B&quot; for a bad signature,
&quot;U&quot; for a good signature with unknown validity,
&quot;X&quot; for a good signature that has expired,
&quot;Y&quot; for a good signature made by an expired key,
&quot;R&quot; for a good signature made by a revoked key,
&quot;E&quot; if the signature cannot be checked (e.g.
missing key) and &quot;N&quot; for no signature.</p>


<p style="margin-left:9%; margin-top: 1em">signature:signer</p>

<p style="margin-left:14%;">The signer of the GPG signature
of a commit.</p>


<p style="margin-left:9%; margin-top: 1em">signature:key</p>

<p style="margin-left:14%;">The key of the GPG signature of
a commit.</p>


<p style="margin-left:9%; margin-top: 1em">signature:fingerprint</p>

<p style="margin-left:14%;">The fingerprint of the GPG
signature of a commit.</p>


<p style="margin-left:9%; margin-top: 1em">signature:primarykeyfingerprint</p>

<p style="margin-left:14%;">The primary key fingerprint of
the GPG signature of a commit.</p>


<p style="margin-left:9%; margin-top: 1em">signature:trustlevel</p>

<p style="margin-left:14%;">The trust level of the GPG
signature of a commit. Possible outputs are <b>ultimate</b>,
<b>fully</b>, <b>marginal</b>, <b>never</b> and
<b>undefined</b>.</p>


<p style="margin-left:9%; margin-top: 1em">worktreepath</p>

<p style="margin-left:14%;">The absolute path to the
worktree in which the ref is checked out, if it is checked
out in any linked worktree. Empty string otherwise.</p>


<p style="margin-left:9%; margin-top: 1em">ahead-behind:&lt;committish&gt;</p>

<p style="margin-left:14%;">Two integers, separated by a
space, demonstrating the number of commits ahead and behind,
respectively, when comparing the output ref to the
<i>&lt;committish&gt;</i> specified in the format.</p>


<p style="margin-left:9%; margin-top: 1em">is-base:&lt;committish&gt;</p>

<p style="margin-left:14%;">In at most one row,
(<i>&lt;committish&gt;</i>) will appear to indicate the ref
that is most likely the ref used as a starting point for the
branch that produced <i>&lt;committish&gt;</i>. This choice
is made using a heuristic: choose the ref that minimizes the
number of commits in the first-parent history of
<i>&lt;committish&gt;</i> and not in the first-parent
history of the ref.</p>

<p style="margin-left:14%; margin-top: 1em">For example,
consider the following figure of first-parent histories of
several refs:</p>


<p style="margin-left:19%; margin-top: 1em">*--*--*--*--*--*
refs/heads/A <br>
\ <br>
\ <br>
*--*--*--* refs/heads/B <br>
\ \ <br>
\ \ <br>
* * refs/heads/C <br>
\ <br>
\ <br>
*--* refs/heads/D</p>

<p style="margin-left:14%; margin-top: 1em">Here, if
<b>A</b>, <b>B</b>, and <b>C</b> are the filtered
references, and the format string is
%(<b>refname</b>)<b>:</b>%(<b>is-base:D</b>), then the
output would be</p>

<p style="margin-left:19%; margin-top: 1em">refs/heads/A:
<br>
refs/heads/B:(D) <br>
refs/heads/C:</p>

<p style="margin-left:14%; margin-top: 1em">This is because
the first-parent history of <b>D</b> has its earliest
intersection with the first-parent histories of the filtered
refs at a common first-parent ancestor of <b>B</b> and
<b>C</b> and ties are broken by the earliest ref in the
sorted order.</p>

<p style="margin-left:14%; margin-top: 1em">Note that this
token will not appear if the first-parent history of
<i>&lt;committish&gt;</i> does not intersect the
first-parent histories of the filtered refs.</p>


<p style="margin-left:9%; margin-top: 1em">describe[:options]</p>

<p style="margin-left:14%;">A human-readable name, like
<b>git-describe</b>(1); empty string for undescribable
commits. The <b>describe</b> string may be followed by a
colon and one or more comma-separated options.</p>


<p style="margin-left:14%; margin-top: 1em">tags=&lt;bool-value&gt;</p>

<p style="margin-left:19%;">Instead of only considering
annotated tags, consider lightweight tags as well; see the
corresponding option in <b>git-describe</b>(1) for
details.</p>


<p style="margin-left:14%; margin-top: 1em">abbrev=&lt;number&gt;</p>

<p style="margin-left:19%;">Use at least &lt;number&gt;
hexadecimal digits; see the corresponding option in
<b>git-describe</b>(1) for details.</p>


<p style="margin-left:14%; margin-top: 1em">match=&lt;pattern&gt;</p>

<p style="margin-left:19%;">Only consider tags matching the
given <b>glob</b>(<b>7</b>) pattern, excluding the
&quot;refs/tags/&quot; prefix; see the corresponding option
in <b>git-describe</b>(1) for details.</p>


<p style="margin-left:14%; margin-top: 1em">exclude=&lt;pattern&gt;</p>

<p style="margin-left:19%;">Do not consider tags matching
the given <b>glob</b>(<b>7</b>) pattern, excluding the
&quot;refs/tags/&quot; prefix; see the corresponding option
in <b>git-describe</b>(1) for details.</p>

<p style="margin-left:9%; margin-top: 1em">In addition to
the above, for commit and tag objects, the header field
names (<b>tree</b>, <b>parent</b>, <b>object</b>,
<b>type</b>, and <b>tag</b>) can be used to specify the
value in the header field. Fields <b>tree</b> and
<b>parent</b> can also be used with modifier <b>:short</b>
and <b>:short=</b><i>&lt;length&gt;</i> just like
<b>objectname</b>.</p>

<p style="margin-left:9%; margin-top: 1em">For commit and
tag objects, the special <b>creatordate</b> and
<b>creator</b> fields will correspond to the appropriate
date or name-email-date tuple from the <b>committer</b> or
<b>tagger</b> fields depending on the object type. These are
intended for working on a mix of annotated and lightweight
tags.</p>

<p style="margin-left:9%; margin-top: 1em">For tag objects,
a <b>fieldname</b> prefixed with an asterisk (*) expands to
the <b>fieldname</b> value of the peeled object, rather than
that of the tag object itself.</p>

<p style="margin-left:9%; margin-top: 1em">Fields that have
name-email-date tuple as its value (<b>author</b>,
<b>committer</b>, and <b>tagger</b>) can be suffixed with
<b>name</b>, <b>email</b>, and <b>date</b> to extract the
named component. For email fields (<b>authoremail</b>,
<b>committeremail</b> and <b>taggeremail</b>), <b>:trim</b>
can be appended to get the email without angle brackets, and
<b>:localpart</b> to get the part before the <b>@</b> symbol
out of the trimmed email. In addition to these, the
<b>:mailmap</b> option and the corresponding
<b>:mailmap,trim</b> and <b>:mailmap,localpart</b> can be
used (order does not matter) to get values of the name and
email according to the .mailmap file or according to the
file set in the mailmap.file or mailmap.blob configuration
variable (see <b>gitmailmap</b>(5)).</p>

<p style="margin-left:9%; margin-top: 1em">The raw data in
an object is <b>raw</b>.</p>

<p style="margin-left:9%; margin-top: 1em">raw:size</p>

<p style="margin-left:14%;">The raw data size of the
object.</p>

<p style="margin-left:9%; margin-top: 1em">Note that
<b>--format=</b>%(<b>raw</b>) can not be used with
<b>--python</b>, <b>--shell</b>, <b>--tcl</b>, because such
language may not support arbitrary binary data in their
string variable type.</p>

<p style="margin-left:9%; margin-top: 1em">The message in a
commit or a tag object is <b>contents</b>, from which
<b>contents:</b><i>&lt;part&gt;</i> can be used to extract
various parts out of:</p>


<p style="margin-left:9%; margin-top: 1em">contents:size</p>

<p style="margin-left:14%;">The size in bytes of the commit
or tag message.</p>


<p style="margin-left:9%; margin-top: 1em">contents:subject</p>

<p style="margin-left:14%;">The first paragraph of the
message, which typically is a single line, is taken as the
&quot;subject&quot; of the commit or the tag message.
Instead of <b>contents:subject</b>, field <b>subject</b> can
also be used to obtain same results. <b>:sanitize</b> can be
appended to <b>subject</b> for subject line suitable for
filename.</p>


<p style="margin-left:9%; margin-top: 1em">contents:body</p>

<p style="margin-left:14%;">The remainder of the commit or
the tag message that follows the &quot;subject&quot;.</p>


<p style="margin-left:9%; margin-top: 1em">contents:signature</p>

<p style="margin-left:14%;">The optional GPG signature of
the tag.</p>


<p style="margin-left:9%; margin-top: 1em">contents:lines=N</p>

<p style="margin-left:14%;">The first <b>N</b> lines of the
message.</p>

<p style="margin-left:9%; margin-top: 1em">Additionally,
the trailers as interpreted by
<b>git-interpret-trailers</b>(1) are obtained as
<b>trailers</b>[<b>:options</b>] (or by using the historical
alias <b>contents:trailers</b>[<b>:options</b>]). For valid
[:option] values see <b>trailers</b> section of
<b>git-log</b>(1).</p>

<p style="margin-left:9%; margin-top: 1em">For sorting
purposes, fields with numeric values sort in numeric order
(<b>objectsize</b>, <b>authordate</b>, <b>committerdate</b>,
<b>creatordate</b>, <b>taggerdate</b>). All other fields are
used to sort in their byte-value order.</p>

<p style="margin-left:9%; margin-top: 1em">There is also an
option to sort by versions, this can be done by using the
fieldname <b>version:refname</b> or its alias
<b>v:refname</b>.</p>

<p style="margin-left:9%; margin-top: 1em">In any case, a
field name that refers to a field inapplicable to the object
referred by the ref does not cause an error. It returns an
empty string instead.</p>

<p style="margin-left:9%; margin-top: 1em">As a special
case for the date-type fields, you may specify a format for
the date by adding <b>:</b> followed by date format name
(see the values the <b>--date</b> option to
<b>git-rev-list</b>(1) takes). If this formatting is
provided in a <b>--sort</b> key, references will be sorted
according to the byte-value of the formatted string rather
than the numeric value of the underlying timestamp.</p>

<p style="margin-left:9%; margin-top: 1em">Some atoms like
%(align) and %(if) always require a matching %(end). We call
them &quot;opening atoms&quot; and sometimes denote them as
%($open).</p>

<p style="margin-left:9%; margin-top: 1em">When a scripting
language specific quoting is in effect, everything between a
top-level opening atom and its matching %(end) is evaluated
according to the semantics of the opening atom and only its
result from the top-level is quoted.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">An example
directly producing formatted text. Show the most recent 3
tagged commits:</p>

<p style="margin-left:14%; margin-top: 1em">#!/bin/sh</p>

<p style="margin-left:14%; margin-top: 1em">git
for-each-ref --count=3 --sort='-*authordate' \ <br>
--format='From: %(*authorname) %(*authoremail) <br>
Subject: %(*subject) <br>
Date: %(*authordate) <br>
Ref: %(*refname)</p>

<p style="margin-left:14%; margin-top: 1em">%(*body) <br>
' 'refs/tags'</p>

<p style="margin-left:9%; margin-top: 1em">A simple example
showing the use of shell eval on the output, demonstrating
the use of --shell. List the prefixes of all heads:</p>

<p style="margin-left:14%; margin-top: 1em">#!/bin/sh</p>

<p style="margin-left:14%; margin-top: 1em">git
for-each-ref --shell --format=&quot;ref=%(refname)&quot;
refs/heads | \ <br>
while read entry <br>
do <br>
eval &quot;$entry&quot; <br>
echo &lsquo;dirname $ref&lsquo; <br>
done</p>

<p style="margin-left:9%; margin-top: 1em">A bit more
elaborate report on tags, demonstrating that the format may
be an entire script:</p>

<p style="margin-left:14%; margin-top: 1em">#!/bin/sh</p>

<p style="margin-left:14%; margin-top: 1em">fmt=' <br>
r=%(refname) <br>
t=%(*objecttype) <br>
T=${r#refs/tags/}</p>


<p style="margin-left:14%; margin-top: 1em">o=%(*objectname)
<br>
n=%(*authorname) <br>
e=%(*authoremail) <br>
s=%(*subject) <br>
d=%(*authordate) <br>
b=%(*body)</p>

<p style="margin-left:14%; margin-top: 1em">kind=Tag <br>
if test &quot;z$t&quot; = z <br>
then <br>
# could be a lightweight tag <br>
t=%(objecttype) <br>
kind=&quot;Lightweight tag&quot; <br>
o=%(objectname) <br>
n=%(authorname) <br>
e=%(authoremail) <br>
s=%(subject) <br>
d=%(authordate) <br>
b=%(body) <br>
fi <br>
echo &quot;$kind $T points at a $t object $o&quot; <br>
if test &quot;z$t&quot; = zcommit <br>
then <br>
echo &quot;The commit was authored by $n $e <br>
at $d, and titled</p>

<p style="margin-left:14%; margin-top: 1em">$s</p>

<p style="margin-left:14%; margin-top: 1em">Its message
reads as: <br>
&quot; <br>
echo &quot;$b&quot; | sed -e &quot;s/&#710;/ /&quot; <br>
echo <br>
fi <br>
'</p>


<p style="margin-left:14%; margin-top: 1em">eval=&lsquo;git
for-each-ref --shell --format=&quot;$fmt&quot; \ <br>
--sort='*objecttype' \ <br>
--sort=-taggerdate \ <br>
refs/tags&lsquo; <br>
eval &quot;$eval&quot;</p>

<p style="margin-left:9%; margin-top: 1em">An example to
show the usage of %(if)...%(then)...%(else)...%(end). This
prefixes the current branch with a star.</p>

<p style="margin-left:14%; margin-top: 1em">git
for-each-ref --format=&quot;%(if)%(HEAD)%(then)* %(else)
%(end)%(refname:short)&quot; refs/heads/</p>

<p style="margin-left:9%; margin-top: 1em">An example to
show the usage of %(if)...%(then)...%(end). This prints the
authorname, if present.</p>

<p style="margin-left:14%; margin-top: 1em">git
for-each-ref
--format=&quot;%(refname)%(if)%(authorname)%(then) Authored
by: %(authorname)%(end)&quot;</p>

<h2>CAVEATS
<a name="CAVEATS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Note that the
sizes of objects on disk are reported accurately, but care
should be taken in drawing conclusions about which refs or
objects are responsible for disk usage. The size of a packed
non-delta object may be much larger than the size of objects
which delta against it, but the choice of which object is
the base and which is the delta is arbitrary and is subject
to change during a repack.</p>

<p style="margin-left:9%; margin-top: 1em">Note also that
multiple copies of an object may be present in the object
database; in this case, it is undefined which copy&rsquo;s
size or delta base will be reported.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">When combining
multiple <b>--contains</b> and <b>--no-contains</b> filters,
only references that contain at least one of the
<b>--contains</b> commits and contain none of the
<b>--no-contains</b> commits are shown.</p>

<p style="margin-left:9%; margin-top: 1em">When combining
multiple <b>--merged</b> and <b>--no-merged</b> filters,
only references that are reachable from at least one of the
<b>--merged</b> commits and from none of the
<b>--no-merged</b> commits are shown.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><b>git-show-ref</b>(1)</p>

<h2>GIT
<a name="GIT"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Part of the
<b>git</b>(1) suite</p>
<hr>
</body>
</html>
