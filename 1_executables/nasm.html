<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Mon Apr  7 17:28:38 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>NASM</title>

</head>
<body>

<h1 align="center">NASM</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#SYNTAX">SYNTAX</a><br>
<a href="#DIRECTIVES">DIRECTIVES</a><br>
<a href="#FORMAT-SPECIFIC DIRECTIVES">FORMAT-SPECIFIC DIRECTIVES</a><br>
<a href="#MACRO PREPROCESSOR">MACRO PREPROCESSOR</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">nasm - the
Netwide Assembler, a portable 80x86 assembler</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em"><b>nasm</b>
[<b>-@</b> response file] [<b>-f</b> format] [<b>-o</b>
outfile] [<b>-l</b> listfile] [<i>options</i>...]
filename</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The <b>nasm</b>
command assembles the file <i>filename</i> and directs
output to the file <i>outfile</i> if specified. If
<i>outfile</i> is not specified, <b>nasm</b> will derive a
default output file name from the name of its input file,
usually by appending &lsquo;.o&rsquo; or &lsquo;.obj&rsquo;,
or by removing all extensions for a raw binary file. Failing
that, the output file name will be
&lsquo;nasm.out&rsquo;.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em"><b>-@</b>
<i>filename</i></p>

<p style="margin-left:14%;">Causes <b>nasm</b> to process
options from filename as if they were included on the
command line.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-a</b></p>

<p style="margin-left:14%;">Causes <b>nasm</b> to assemble
the given input file without first applying the macro
preprocessor.</p>


<p style="margin-left:9%; margin-top: 1em"><b>-D</b>|<b>-d</b>
<i>macro[=value]</i></p>

<p style="margin-left:14%;">Pre-defines a single-line
macro.</p>


<p style="margin-left:9%; margin-top: 1em"><b>-E</b>|<b>-e</b></p>

<p style="margin-left:14%;">Causes <b>nasm</b> to
preprocess the given input file, and write the output to
<i>stdout</i> (or the specified output file name), and not
actually assemble anything.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-f</b>
<i>format</i></p>

<p style="margin-left:14%;">Specifies the output file
format. To see a list of valid output formats, use the
<b>-hf</b> option.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-F</b>
<i>format</i></p>

<p style="margin-left:14%;">Specifies the debug information
format. To see a list of valid output formats, use the
<b>-y</b> option (for example <b>-felf -y</b>).</p>

<p style="margin-left:9%; margin-top: 1em"><b>-g</b></p>

<p style="margin-left:14%;">Causes <b>nasm</b> to generate
debug information.</p>


<p style="margin-left:9%; margin-top: 1em"><b>-g</b><i>format</i></p>

<p style="margin-left:14%;">Equivalent to <b>-g -F</b>
<i>format</i>.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-h</b></p>

<p style="margin-left:14%;">Causes <b>nasm</b> to exit
immediately, after giving a summary of its invocation
options.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-hf</b></p>

<p style="margin-left:14%;">Same as <b>-h</b> , but also
lists all valid output formats.</p>


<p style="margin-left:9%; margin-top: 1em"><b>-I</b>|<b>-i</b>
<i>directory</i></p>

<p style="margin-left:14%;">Adds a directory to the search
path for include files. The directory specification must
include the trailing slash, as it will be directly prepended
to the name of the include file.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-l</b>
<i>listfile</i></p>

<p style="margin-left:14%;">Causes an assembly listing to
be directed to the given file, in which the original source
is displayed on the right hand side (plus the source for
included files and the expansions of multi-line macros) and
the generated code is shown in hex on the left.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-M</b></p>

<p style="margin-left:14%;">Causes <b>nasm</b> to output
Makefile-style dependencies to stdout; normal output is
suppressed.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-MG</b>
<i>file</i></p>

<p style="margin-left:14%;">Same as <b>-M</b> but assumes
that missing Makefile dependencies are generated and added
to dependency list without a prefix.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-MF</b>
<i>file</i></p>

<p style="margin-left:14%;">Output Makefile-style
dependencies to the specified file.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-MD</b>
<i>file</i></p>

<p style="margin-left:14%;">Same as a combination of
<b>-M</b> and <b>-MF</b> options.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-MT</b>
<i>file</i></p>

<p style="margin-left:14%;">Override the default name of
the dependency target dependency target name. This is
normally the same as the output filename, specified by the
<b>-o</b> option.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-MQ</b>
<i>file</i></p>

<p style="margin-left:14%;">The same as <b>-MT</b> except
it tries to quote characters that have special meaning in
Makefile syntax. This is not foolproof, as not all
characters with special meaning are quotable in Make.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-MP</b></p>

<p style="margin-left:14%;">Emit phony target.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-O</b>
<i>number</i></p>

<p style="margin-left:14%;">Optimize branch offsets.</p>

<p style="margin-left:19%; margin-top: 1em">&bull;
<b>-O0</b>: No optimization</p>

<p style="margin-left:19%; margin-top: 1em">&bull;
<b>-O1</b>: Minimal optimization</p>

<p style="margin-left:19%; margin-top: 1em">&bull;
<b>-Ox</b>: Multipass optimization (default)</p>

<p style="margin-left:9%; margin-top: 1em"><b>-o</b>
<i>outfile</i></p>

<p style="margin-left:14%;">Specifies a precise name for
the output file, overriding <b>nasm</b>'s default means of
determining it.</p>


<p style="margin-left:9%; margin-top: 1em"><b>-P</b>|<b>-p</b>
<i>file</i></p>

<p style="margin-left:14%;">Specifies a file to be
pre-included, before the main source file starts to be
processed.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-s</b></p>

<p style="margin-left:14%;">Causes <b>nasm</b> to send its
error messages and/or help text to stdout instead of
stderr.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-t</b></p>

<p style="margin-left:14%;">Causes <b>nasm</b> to assemble
in SciTech TASM compatible mode.</p>


<p style="margin-left:9%; margin-top: 1em"><b>-U</b>|<b>-u</b>
<i>macro</i></p>

<p style="margin-left:14%;">Undefines a single-line
macro.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-v</b></p>

<p style="margin-left:14%;">Causes <b>nasm</b> to exit
immediately, after displaying its version number.</p>


<p style="margin-left:9%; margin-top: 1em">*-W[no-]foo'</p>

<p style="margin-left:14%;">Causes <b>nasm</b> to enable or
disable certain classes of warning messages, in gcc-like
style, for example <b>-Wlabel-orphan</b> or
<b>-Wno-orphan-labels</b>.</p>


<p style="margin-left:9%; margin-top: 1em"><b>-w</b><i>[+-]foo</i></p>

<p style="margin-left:14%;">Causes <b>nasm</b> to enable or
disable certain classes of warning messages, for example
<b>-w+label-orphan</b> or <b>-w-macro-params</b>.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-X</b>
<i>format</i></p>

<p style="margin-left:14%;">Specifies error reporting
format (gnu or vc).</p>

<p style="margin-left:9%; margin-top: 1em"><b>-y</b></p>

<p style="margin-left:14%;">Causes <b>nasm</b> to list
supported debug formats.</p>

<p style="margin-left:9%; margin-top: 1em"><b>-Z</b>
<i>filename</i></p>

<p style="margin-left:14%;">Causes <b>nasm</b> to redirect
error messages to <i>filename</i>. This option exists to
support operating systems on which stderr is not easily
redirected.</p>

<p style="margin-left:9%; margin-top: 1em">--prefix,
--postfix</p>

<p style="margin-left:14%;">Prepend or append
(respectively) the given argument to all global or extern
variables.</p>

<h2>SYNTAX
<a name="SYNTAX"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">This man page
does not fully describe the syntax of <b>nasm</b>'s assembly
language, but does give a summary of the differences from
other assemblers.</p>


<p style="margin-left:9%; margin-top: 1em"><i>Registers</i>
have no leading &lsquo;%&rsquo; sign, unlike <b>gas</b>, and
floating-point stack registers are referred to as
<i>st0</i>, <i>st1</i>, and so on.</p>


<p style="margin-left:9%; margin-top: 1em"><i>Floating-point
instructions</i> may use either the single-operand form or
the double. A <i>TO</i> keyword is provided; thus, one could
either write</p>

<p style="margin-left:14%; margin-top: 1em">fadd st0,st1
<br>
fadd st1,st0</p>

<p style="margin-left:9%; margin-top: 1em">or one could use
the alternative single-operand forms</p>

<p style="margin-left:14%; margin-top: 1em">fadd st1 <br>
fadd to st1</p>


<p style="margin-left:9%; margin-top: 1em"><i>Uninitialised
storage</i> is reserved using the <i>RESB</i>, <i>RESW</i>,
<i>RESD</i>, <i>RESQ</i>, <i>REST</i> and <i>RESO</i>
pseudo-opcodes, each taking one parameter which gives the
number of bytes, words, doublewords, quadwords or ten-byte
words to reserve.</p>


<p style="margin-left:9%; margin-top: 1em"><i>Repetition</i>
of data items is not done by the <i>DUP</i> keyword as seen
in DOS assemblers, but by the use of the <i>TIMES</i>
prefix, like this:</p>

<p style="margin-left:14%; margin-top: 1em">message: times
3 db 'abc' <br>
times 64-$+message db 0</p>

<p style="margin-left:9%; margin-top: 1em">which defines
the string abcabcabc, followed by the right number of zero
bytes to make the total length up to 64 bytes.</p>

<p style="margin-left:9%; margin-top: 1em"><i>Symbol
references</i> are always understood to be immediate (i.e.
the address of the symbol), unless square brackets are used,
in which case the contents of the memory location are used.
Thus:</p>

<p style="margin-left:14%; margin-top: 1em">mov
ax,wordvar</p>

<p style="margin-left:9%; margin-top: 1em">loads AX with
the address of the variable wordvar, whereas</p>

<p style="margin-left:14%; margin-top: 1em">mov
ax,[wordvar] <br>
mov ax,[wordvar+1] <br>
mov ax,[es:wordvar+bx]</p>

<p style="margin-left:9%; margin-top: 1em">all refer to the
<i>contents</i> of memory locations. The syntaxes</p>

<p style="margin-left:14%; margin-top: 1em">mov
ax,es:wordvar[bx] <br>
es mov ax,wordvar[1]</p>

<p style="margin-left:9%; margin-top: 1em">are not legal at
all, although the use of a segment register name as an
instruction prefix is valid, and can be used with
instructions such as <i>LODSB</i> which can&rsquo;t be
overridden any other way.</p>


<p style="margin-left:9%; margin-top: 1em"><i>Constants</i>
may be expressed numerically in most formats: a trailing H,
Q or B denotes hex, octal or binary respectively, and a
leading &lsquo;0x&rsquo; or &lsquo;$&rsquo; denotes hex as
well. Leading zeros are not treated specially at all.
Character constants may be enclosed in single or double
quotes; there is no escape character. The ordering is
little-endian (reversed), so that the character constant
<i>'abcd</i>' denotes 0x64636261 and not 0x61626364.</p>

<p style="margin-left:9%; margin-top: 1em">Local labels
begin with a period, and their &lsquo;locality&rsquo; is
granted by the assembler prepending the name of the previous
non-local symbol. Thus declaring a label &lsquo;.loop&rsquo;
after a label &lsquo;label&rsquo; has actually defined a
symbol called &lsquo;label.loop&rsquo;.</p>

<h2>DIRECTIVES
<a name="DIRECTIVES"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em"><i>SECTION
name</i> or <i>SEGMENT name</i> causes <b>nasm</b> to direct
all following code to the named section. Section names vary
with output file format, although most formats support the
names <i>.text</i>, <i>.data</i> and <i>.bss</i>. (The
exception is the <i>obj</i> format, in which all segments
are user-definable.)</p>

<p style="margin-left:9%; margin-top: 1em"><i>ABSOLUTE
address</i> causes <b>nasm</b> to position its notional
assembly point at an absolute address: so no code or data
may be generated, but you can use <i>RESB</i>, <i>RESW</i>
and <i>RESD</i> to move the assembly point further on, and
you can define labels. So this directive may be used to
define data structures. When you have finished doing
absolute assembly, you must issue another <i>SECTION</i>
directive to return to normal assembly.</p>

<p style="margin-left:9%; margin-top: 1em"><i>BITS 16</i>,
<i>BITS 32</i> or <i>BITS 64</i> switches the default
processor mode for which <b>nasm</b> is generating code: it
is equivalent to <i>USE16</i> or <i>USE32</i> in DOS
assemblers.</p>

<p style="margin-left:9%; margin-top: 1em"><i>EXTERN
symbol</i> and <i>GLOBAL symbol</i> import and export symbol
definitions, respectively, from and to other modules. Note
that the <i>GLOBAL</i> directive must appear before the
definition of the symbol it refers to.</p>

<p style="margin-left:9%; margin-top: 1em"><i>STRUC
strucname</i> and <i>ENDSTRUC</i>, when used to bracket a
number of <i>RESB</i>, <i>RESW</i> or similar instructions,
define a data structure. In addition to defining the offsets
of the structure members, the construct also defines a
symbol for the size of the structure, which is simply the
structure name with <i>size</i> tacked on to the end.</p>

<h2>FORMAT-SPECIFIC DIRECTIVES
<a name="FORMAT-SPECIFIC DIRECTIVES"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em"><i>ORG
address</i> is used by the <i>bin</i> flat-form binary
output format, and specifies the address at which the output
code will eventually be loaded.</p>

<p style="margin-left:9%; margin-top: 1em"><i>GROUP grpname
seg1 seg2</i>... is used by the obj (Microsoft 16-bit)
output format, and defines segment groups. This format also
uses <i>UPPERCASE</i>, which directs that all segment, group
and symbol names output to the object file should be in
uppercase. Note that the actual assembly is still case
sensitive.</p>

<p style="margin-left:9%; margin-top: 1em"><i>LIBRARY
libname</i> is used by the <i>rdf</i> output format, and
causes a dependency record to be written to the output file
which indicates that the program requires a certain library
in order to run.</p>

<h2>MACRO PREPROCESSOR
<a name="MACRO PREPROCESSOR"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Single-line
macros are defined using the <i>%define</i> or
<i>%idefine</i> commands, in a similar fashion to the C
preprocessor. They can be overloaded with respect to number
of parameters, although defining a macro with no parameters
prevents the definition of any macro with the same name
taking parameters, and vice versa. <i>%define</i> defines
macros whose names match case-sensitively, whereas
<i>%idefine</i> defines case-insensitive macros.</p>

<p style="margin-left:9%; margin-top: 1em">Multi-line
macros are defined using <i>%macro</i> and <i>%imacro</i>
(the distinction is the same as that between <i>%define</i>
and <i>%idefine</i>), whose syntax is as follows</p>

<p style="margin-left:14%; margin-top: 1em">%macro name
minprm[-maxprm][+][.nolist] [defaults] <br>
&lt;some lines of macro expansion text&gt; <br>
%endmacro</p>

<p style="margin-left:9%; margin-top: 1em">Again, these
macros may be overloaded. The trailing plus sign indicates
that any parameters after the last one get subsumed, with
their separating commas, into the last parameter. The
<i>defaults</i> part can be used to specify defaults for
unspecified macro parameters after <i>minparam</i>.
<i>%endm</i> is a valid synonym for <i>%endmacro</i>.</p>

<p style="margin-left:9%; margin-top: 1em">To refer to the
macro parameters within a macro expansion, you use
<i>%1</i>, <i>%2</i> and so on. You can also enforce that a
macro parameter should contain a condition code by using
<i>%+1</i>, and you can invert the condition code by using
<i>%-1</i>. You can also define a label specific to a macro
invocation by prefixing it with a double &lsquo;%&rsquo;
sign.</p>

<p style="margin-left:9%; margin-top: 1em">Files can be
included using the <i>%include</i> directive, which works
like C.</p>

<p style="margin-left:9%; margin-top: 1em">The preprocessor
has a &lsquo;context stack&rsquo;, which may be used by one
macro to store information that a later one will retrieve.
You can push a context on the stack using <i>%push</i>,
remove one using <i>%pop</i>, and change the name of the top
context (without disturbing any associated definitions)
using <i>%repl</i>. Labels and <i>%define</i> macros
specific to the top context may be defined by prefixing
their names with %$, and things specific to the next context
down with %$$, and so on.</p>

<p style="margin-left:9%; margin-top: 1em">Conditional
assembly is done by means of <i>%ifdef</i>, <i>%ifndef</i>,
<i>%else</i> and <i>%endif</i> as in C. (Except that
<i>%ifdef</i> can accept several putative macro names, and
will evaluate TRUE if any of them is defined.) In addition,
the directives <i>%ifctx</i> and <i>%ifnctx</i> can be used
to condition on the name of the top context on the context
stack. The obvious set of &lsquo;else-if&rsquo; directives,
<i>%elifdef</i>, <i>%elifndef</i>, <i>%elifctx</i> and
<i>%elifnctx</i> are also supported.</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Please report
bugs through the bug tracker function at
<b><font color="#0000FF">http://nasm.us</font></b><font color="#000000">.</font></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>as</b>(1),
<b>ld</b>(1).</font></p>
<hr>
</body>
</html>
