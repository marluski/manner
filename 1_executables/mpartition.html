<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Mon Apr  7 17:28:32 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>mpartition</title>

</head>
<body>

<h1 align="center">mpartition</h1>

<a href="#Name">Name</a><br>
<a href="#Note&nbsp;of&nbsp;warning">Note&nbsp;of&nbsp;warning</a><br>
<a href="#Description">Description</a><br>
<a href="#Choice&nbsp;of&nbsp;partition&nbsp;type">Choice&nbsp;of&nbsp;partition&nbsp;type</a><br>
<a href="#See&nbsp;Also">See&nbsp;Also</a><br>
<a href="#Viewing&nbsp;the&nbsp;texi&nbsp;doc">Viewing&nbsp;the&nbsp;texi&nbsp;doc</a><br>

<hr>


<h2>Name
<a name="Name"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">mpartition -
partition an MSDOS hard disk</p>

<h2>Note&nbsp;of&nbsp;warning
<a name="Note&nbsp;of&nbsp;warning"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">This manpage has
been automatically generated from mtools&rsquo;s texinfo
documentation, and may not be entirely accurate or complete.
See the end of this man page for details.</p>

<h2>Description
<a name="Description"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The mpartition
command is used to create MS-DOS file systems as partitions.
This is intended to be used on non-Linux systems, i.e.
systems where fdisk and easy access to SCSI devices are not
available. This command only works on drives whose partition
variable is set.</p>

<p style="margin-left:9%; margin-top: 1em">mpartition -p
<i>drive</i> <br>
mpartition -r <i>drive</i> <br>
mpartition -I [-B <i>bootSector</i>] <i>drive</i> <br>
mpartition -a <i>drive</i> <br>
mpartition -d <i>drive</i> <br>
mpartition -c [-s <i>sectors</i>] [-h <i>heads</i>] <br>
[-t <i>cylinders</i>] [-v [-T <i>type</i>] [-b <i><br>
begin</i>] [-l length] [-f]</p>

<p style="margin-left:9%; margin-top: 1em">Mpartition
supports the following operations:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p>p&nbsp;</p></td>
<td width="6%"></td>
<td width="82%">


<p>Prints a command line to recreate the partition for the
drive. Nothing is printed if the partition for the drive is
not defined, or an inconsistency has been detected. If
verbose (-v) is also set, prints the current partition
table.</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p>r&nbsp;</p></td>
<td width="6%"></td>
<td width="82%">


<p>Removes the partition described by <i>drive</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p>I&nbsp;</p></td>
<td width="6%"></td>
<td width="82%">


<p>Initializes the partition table, and removes all
partitions.</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p>c&nbsp;</p></td>
<td width="6%"></td>
<td width="82%">


<p>Creates the partition described by <i>drive</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p>a&nbsp;</p></td>
<td width="6%"></td>
<td width="82%">


<p>&quot;Activates&quot; the partition, i.e. makes it
bootable. Only one partition can be bootable at a time.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p>d&nbsp;</p></td>
<td width="6%"></td>
<td width="82%">


<p>&quot;Deactivates&quot; the partition, i.e. makes it
unbootable.</p> </td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">If no operation
is given, the current settings are printed.</p>

<p style="margin-left:9%; margin-top: 1em">For partition
creations, the following options are available: <br>
s&nbsp;<i>sectors&nbsp;</i></p>

<p style="margin-left:18%;">The number of sectors per track
of the partition (which is also the number of sectors per
track for the whole drive).</p>

<p style="margin-left:9%;">h&nbsp;<i>heads&nbsp;</i></p>

<p style="margin-left:18%;">The number of heads of the
partition (which is also the number of heads for the whole
drive). By default, the geometry information (number of
sectors and heads) is figured out from neighboring partition
table entries, or guessed from the size.</p>


<p style="margin-left:9%;">t&nbsp;<i>cylinders&nbsp;</i></p>

<p style="margin-left:18%;">The number of cylinders of the
partition (not the number of cylinders of the whole
drive.</p>

<p style="margin-left:9%;">b&nbsp;<i>begin&nbsp;</i></p>

<p style="margin-left:18%;">The starting offset of the
partition, expressed in sectors. If begin is not given,
mpartition lets the partition begin at the start of the disk
(partition number 1), or immediately after the end of the
previous partition.</p>

<p style="margin-left:9%;">l&nbsp;<i>length&nbsp;</i></p>

<p style="margin-left:18%;">The size (length) of the
partition, expressed in sectors. If end is not given,
mpartition figures out the size from the number of sectors,
heads and cylinders. If these are not given either, it gives
the partition the biggest possible size, considering disk
size and start of the next partition.</p>

<p style="margin-left:9%; margin-top: 1em">The following
option is available for all operation which modify the
partition table:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p>f&nbsp;</p></td>
<td width="6%"></td>
<td width="82%">


<p>Usually, before writing back any changes to the
partition, mpartition performs certain consistency checks,
such as checking for overlaps and proper alignment of the
partitions. If any of these checks fails, the partition
table is not changed. The -f allows you to override these
safeguards.</p> </td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">The following
options are available for all operations:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="4%">


<p style="margin-top: 1em">v&nbsp;</p></td>
<td width="5%"></td>
<td width="82%">


<p style="margin-top: 1em">Together with -p prints the
partition table as it is now (no change operation), or as it
is after it is modified.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="4%">


<p>vv&nbsp;</p></td>
<td width="5%"></td>
<td width="82%">


<p>If the verbosity flag is given twice, mpartition will
print out a hexdump of the partition table when reading it
from and writing it to the device.</p></td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">The following
option is available for partition table initialization: <br>
B&nbsp;<i>bootSector&nbsp;</i></p>

<p style="margin-left:18%;">Reads the template master boot
record from file <i>bootSector</i>.</p>

<h2>Choice&nbsp;of&nbsp;partition&nbsp;type
<a name="Choice&nbsp;of&nbsp;partition&nbsp;type"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Mpartition
proceeds as follows to pick a type for the partition:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="4%">


<p>-&nbsp;&nbsp;</p></td>
<td width="5%"></td>
<td width="82%">


<p>FAT32 partitions are assigned type 0x0C
(&lsquo;&lsquo;Win95 FAT32, LBA&rsquo;&rsquo;)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="4%">


<p>-&nbsp;&nbsp;</p></td>
<td width="5%"></td>
<td width="82%">


<p>For all others, if the partition fits entirely within
the first 65536 sectors of the disk, assign 0x01
(&lsquo;&lsquo;DOS FAT12, CHS&rsquo;&rsquo;) for FAT12
partition and 0x04 (&lsquo;&lsquo;DOS FAT16,
CHS&rsquo;&rsquo;) for FAT16 partitions</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="4%">


<p>-&nbsp;&nbsp;</p></td>
<td width="5%"></td>
<td width="82%">


<p>If not covered by the above, assign 0x06
(&lsquo;&lsquo;DOS BIG FAT16 CHS&rsquo;&rsquo;) if partition
fits entirely within the first 1024 cylinders (CHS mode)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="4%">


<p>-&nbsp;&nbsp;</p></td>
<td width="5%"></td>
<td width="82%">


<p>All remaining cases get 0x0E (&lsquo;&lsquo;Win95 BIG
FAT16, LBA&rsquo;&rsquo;)</p></td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">If number of fat
bits is not known (not specified in drive&rsquo;s
definition), then FAT12 is assumed for all drives with less
than 4096 sectors, and FAT16 for those with more than 4096
sectors.</p>

<p style="margin-left:9%; margin-top: 1em">This corresponds
more or less to the definitions outlined at
https://en.wikipedia.org/wiki/Partition_type#List_of_partition_IDs
and
https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-2000-server/cc977219(v=technet.10),
with two notable differences:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="4%">


<p style="margin-top: 1em">-&nbsp;&nbsp;</p></td>
<td width="5%"></td>
<td width="82%">


<p style="margin-top: 1em">If fat bits are unknown, the
reference documents consider drives with less than 32680
sectors to be FAT12. Mtools uses 4096 sectors as the cutoff
point, as older versions of DOS only support FAT12 on disks
with less than 4096 sectors (and these older versions are
the ones which would be most likely to use FAT12 in the
first place).</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="4%">


<p>-&nbsp;&nbsp;</p></td>
<td width="5%"></td>
<td width="82%">


<p>The reference documents use a 8GB (wikipedia) or a 4GB
(Microsoft) cutoff between 0x06 (DOS BIG FAT16 CHS) and
0x0E. Mtools uses 1024 cylinders. This is because any
partition beyond 1024 cylinders must be LBA and cannot be
CHS. 8GB works out to be the biggest capacity which can be
represented as CHS (63 sectors, 255 heads and 1024
cylinders). 4GB is the capacity limit for windows 2000, so
it makes sense that a documentation for windows 2000 would
specify this as the upper limit for any partition type.</p></td></tr>
</table>

<h2>See&nbsp;Also
<a name="See&nbsp;Also"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Mtools&rsquo;
texinfo doc</p>

<h2>Viewing&nbsp;the&nbsp;texi&nbsp;doc
<a name="Viewing&nbsp;the&nbsp;texi&nbsp;doc"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">This manpage has
been automatically generated from mtools&rsquo;s texinfo
documentation. However, this process is only approximative,
and some items, such as crossreferences, footnotes and
indices are lost in this translation process. Indeed, these
items have no appropriate representation in the manpage
format. Moreover, not all information has been translated
into the manpage version. Thus I strongly advise you to use
the original texinfo doc. See the end of this manpage for
instructions how to view the texinfo doc.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="5%">


<p style="margin-top: 1em">* &nbsp;&nbsp;</p></td>
<td width="4%"></td>
<td width="82%">


<p style="margin-top: 1em">To generate a printable copy
from the texinfo doc, run the following commands:</p></td></tr>
</table>


<p style="margin-left:22%; margin-top: 1em"><b>./configure;
make dvi; dvips mtools.dvi</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="5%">


<p style="margin-top: 1em">* &nbsp;&nbsp;</p></td>
<td width="4%"></td>
<td width="38%">


<p style="margin-top: 1em">To generate a html copy,
run:</p> </td>
<td width="44%">
</td></tr>
</table>


<p style="margin-left:22%; margin-top: 1em"><b>./configure;
make html</b></p>

<p style="margin-left:9%; margin-top: 1em">A premade html
can be found at
&lsquo;http://www.gnu.org/software/mtools/manual/mtools.html&rsquo;</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="5%">


<p style="margin-top: 1em">* &nbsp;&nbsp;</p></td>
<td width="4%"></td>
<td width="82%">


<p style="margin-top: 1em">To generate an info copy
(browsable using emacs&rsquo; info mode), run:</p></td></tr>
</table>


<p style="margin-left:22%; margin-top: 1em"><b>./configure;
make info</b></p>

<p style="margin-left:9%; margin-top: 1em">The texinfo doc
looks most pretty when printed or as html. Indeed, in the
info version certain examples are difficult to read due to
the quoting conventions used in info.</p>
<hr>
</body>
</html>
