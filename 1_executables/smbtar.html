<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Mon Apr  7 17:30:16 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SMBTAR</title>

</head>
<body>

<h1 align="center">SMBTAR</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#ENVIRONMENT VARIABLES">ENVIRONMENT VARIABLES</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#CAVEATS">CAVEATS</a><br>
<a href="#DIAGNOSTICS">DIAGNOSTICS</a><br>
<a href="#VERSION">VERSION</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">smbtar - shell
script for backing up SMB/CIFS shares directly to UNIX tape
drives</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="91%">


<p style="margin-top: 1em">smbtar [-r] [-i] [-a] [-v]
{-s&nbsp;server} [-p&nbsp;password] [-x&nbsp;services] [-X]
[-N&nbsp;filename] [-b&nbsp;blocksize] [-d&nbsp;directory]
[-l&nbsp;loglevel] [-u&nbsp;user] [-t&nbsp;tape]
{filenames}</p> </td></tr>
</table>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">This tool is
part of the <b>samba</b>(7) suite.</p>

<p style="margin-left:9%; margin-top: 1em">smbtar is a very
small shell script on top of <b>smbclient</b>(1) which dumps
SMB shares directly to tape.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">-s server</p>

<p style="margin-left:14%;">The SMB/CIFS server that the
share resides upon.</p>

<p style="margin-left:9%; margin-top: 1em">-x service</p>

<p style="margin-left:14%;">The share name on the server to
connect to. The default is &quot;backup&quot;.</p>

<p style="margin-left:9%; margin-top: 1em">-X</p>

<p style="margin-left:14%;">Exclude mode. Exclude
filenames... from tar create or restore.</p>

<p style="margin-left:9%; margin-top: 1em">-d directory</p>

<p style="margin-left:14%;">Change to initial
<i>directory</i> before restoring / backing up files.</p>

<p style="margin-left:9%; margin-top: 1em">-v</p>

<p style="margin-left:14%;">Verbose mode.</p>

<p style="margin-left:9%; margin-top: 1em">-p password</p>

<p style="margin-left:14%;">The password to use to access a
share. Default: none</p>

<p style="margin-left:9%; margin-top: 1em">-u user</p>

<p style="margin-left:14%;">The user id to connect as.
Default: UNIX login name.</p>

<p style="margin-left:9%; margin-top: 1em">-a</p>

<p style="margin-left:14%;">Reset DOS archive bit mode to
indicate file has been archived.</p>

<p style="margin-left:9%; margin-top: 1em">-t tape</p>

<p style="margin-left:14%;">Tape device. May be regular
file or tape device. Default: <i>$TAPE</i> environmental
variable; if not set, a file called tar.out.</p>

<p style="margin-left:9%; margin-top: 1em">-b blocksize</p>

<p style="margin-left:14%;">Blocking factor. Defaults to
20. See tar(1) for a fuller explanation.</p>

<p style="margin-left:9%; margin-top: 1em">-N filename</p>

<p style="margin-left:14%;">Backup only files newer than
filename. Could be used (for example) on a log file to
implement incremental backups.</p>

<p style="margin-left:9%; margin-top: 1em">-i</p>

<p style="margin-left:14%;">Incremental mode; tar files are
only backed up if they have the archive bit set. The archive
bit is reset after each file is read.</p>

<p style="margin-left:9%; margin-top: 1em">-r</p>

<p style="margin-left:14%;">Restore. Files are restored to
the share from the tar file.</p>

<p style="margin-left:9%; margin-top: 1em">-l log level</p>

<p style="margin-left:14%;">Log (debug) level. Corresponds
to the <i>-d</i> flag of <b>smbclient</b>(1).</p>

<h2>ENVIRONMENT VARIABLES
<a name="ENVIRONMENT VARIABLES"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The <i>$TAPE</i>
variable specifies the default tape device to write to. May
be overridden with the -t option.</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The smbtar
script has different options from ordinary tar and from
smbclient's tar command.</p>

<h2>CAVEATS
<a name="CAVEATS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Sites that are
more careful about security may not like the way the script
handles PC passwords. Backup and restore work on entire
shares; should work on file lists. smbtar works best with
GNU tar and may not work well with other versions.</p>

<h2>DIAGNOSTICS
<a name="DIAGNOSTICS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">See the
<i>DIAGNOSTICS</i> section for the <b>smbclient</b>(1)
command.</p>

<h2>VERSION
<a name="VERSION"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">This man page is
part of version 4.22.0 of the Samba suite.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em"><b>smbd</b>(8),
<b>smbclient</b>(1), <b>smb.conf</b>(5).</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The original
Samba software and related utilities were created by Andrew
Tridgell. Samba is now developed by the Samba Team as an
Open Source project similar to the way the Linux kernel is
developed.</p>

<p style="margin-left:9%; margin-top: 1em">Ricky Poulten
wrote the tar extension and this man page. The smbtar script
was heavily rewritten and improved by Martin Kraemer. Many
thanks to everyone who suggested extensions, improvements,
bug fixes, etc. The man page sources were converted to YODL
format (another excellent piece of Open Source software,
available at ftp://ftp.icce.rug.nl/pub/unix/) and updated
for the Samba 2.0 release by Jeremy Allison. The conversion
to DocBook for Samba 2.2 was done by Gerald Carter. The
conversion to DocBook XML 4.2 for Samba 3.0 was done by
Alexander Bokovoy.</p>
<hr>
</body>
</html>
