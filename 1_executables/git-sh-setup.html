<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Mon Apr  7 17:26:21 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>GIT-SH-SETUP</title>

</head>
<body>

<h1 align="center">GIT-SH-SETUP</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#FUNCTIONS">FUNCTIONS</a><br>
<a href="#GIT">GIT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">git-sh-setup -
Common Git shell script setup code</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em"><i>. &quot;$(git
--exec-path)/git-sh-setup&quot;</i></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">This is not a
command the end user would want to run. Ever. This
documentation is meant for people who are studying the
Porcelain-ish scripts and/or are writing new ones.</p>

<p style="margin-left:9%; margin-top: 1em">The <i>git
sh-setup</i> scriptlet is designed to be sourced (using .)
by other shell scripts to set up some variables pointing at
the normal Git directories and a few helper shell
functions.</p>

<p style="margin-left:9%; margin-top: 1em">Before sourcing
it, your script should set up a few variables; <b>USAGE</b>
(and <b>LONG_USAGE</b>, if any) is used to define the
message given by <b>usage</b>() shell function.
<b>SUBDIRECTORY_OK</b> can be set if the script can run from
a subdirectory of the working tree (some commands do
not).</p>

<p style="margin-left:9%; margin-top: 1em">The scriptlet
sets <b>GIT_DIR</b> and <b>GIT_OBJECT_DIRECTORY</b> shell
variables, but does <b>not</b> export them to the
environment.</p>

<h2>FUNCTIONS
<a name="FUNCTIONS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">die</p>

<p style="margin-left:14%;">exit after emitting the
supplied error message to the standard error stream.</p>

<p style="margin-left:9%; margin-top: 1em">usage</p>

<p style="margin-left:14%;">die with the usage message.</p>


<p style="margin-left:9%; margin-top: 1em">set_reflog_action</p>

<p style="margin-left:14%;">Set <b>GIT_REFLOG_ACTION</b>
environment to a given string (typically the name of the
program) unless it is already set. Whenever the script runs
a <b>git</b> command that updates refs, a reflog entry is
created using the value of this string to leave the record
of what command updated the ref.</p>

<p style="margin-left:9%; margin-top: 1em">git_editor</p>

<p style="margin-left:14%;">runs an editor of user&rsquo;s
choice (GIT_EDITOR, core.editor, VISUAL or EDITOR) on a
given file, but error out if no editor is specified and the
terminal is dumb.</p>


<p style="margin-left:9%; margin-top: 1em">is_bare_repository</p>

<p style="margin-left:14%;">outputs <b>true</b> or
<b>false</b> to the standard output stream to indicate if
the repository is a bare repository (i.e. without an
associated working tree).</p>


<p style="margin-left:9%; margin-top: 1em">cd_to_toplevel</p>

<p style="margin-left:14%;">runs chdir to the toplevel of
the working tree.</p>


<p style="margin-left:9%; margin-top: 1em">require_work_tree</p>

<p style="margin-left:14%;">checks if the current directory
is within the working tree of the repository, and otherwise
dies.</p>


<p style="margin-left:9%; margin-top: 1em">require_work_tree_exists</p>

<p style="margin-left:14%;">checks if the working tree
associated with the repository exists, and otherwise dies.
Often done before calling cd_to_toplevel, which is
impossible to do if there is no working tree.</p>


<p style="margin-left:9%; margin-top: 1em">require_clean_work_tree
&lt;action&gt; [&lt;hint&gt;]</p>

<p style="margin-left:14%;">checks that the working tree
and index associated with the repository have no uncommitted
changes to tracked files. Otherwise it emits an error
message of the form <b>Cannot</b>
<i>&lt;action&gt;</i><b>:</b> <i>&lt;reason&gt;</i>.
<i>&lt;hint&gt;</i>, and dies. Example:</p>


<p style="margin-left:19%; margin-top: 1em">require_clean_work_tree
rebase &quot;Please commit or stash them.&quot;</p>


<p style="margin-left:9%; margin-top: 1em">get_author_ident_from_commit</p>

<p style="margin-left:14%;">outputs code for use with eval
to set the GIT_AUTHOR_NAME, GIT_AUTHOR_EMAIL and
GIT_AUTHOR_DATE variables for a given commit.</p>


<p style="margin-left:9%; margin-top: 1em">create_virtual_base</p>

<p style="margin-left:14%;">modifies the first file so only
lines in common with the second file remain. If there is
insufficient common material, then the first file is left
empty. The result is suitable as a virtual base input for a
3-way merge.</p>

<h2>GIT
<a name="GIT"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Part of the
<b>git</b>(1) suite</p>
<hr>
</body>
</html>
